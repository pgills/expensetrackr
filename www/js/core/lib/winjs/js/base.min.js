!function(a){a.WinJS=a.WinJS||{},WinJS.Utilities=WinJS.Utilities||{},WinJS.Utilities._writeProfilerMark=function(b){a.msWriteProfilerMark&&msWriteProfilerMark(b)}}(this),WinJS.Utilities._writeProfilerMark("WinJS.2.1 2.0.1.WinJS.2014.4.28 base.js,StartTM"),function(a,b){"use strict";function c(a,c,d){var e,f,g,h=Object.keys(c);for(f=0,g=h.length;g>f;f++){var i=h[f],j=95!==i.charCodeAt(0),k=c[i];!k||"object"!=typeof k||k.value===b&&"function"!=typeof k.get&&"function"!=typeof k.set?j?a[i]=k:(e=e||{},e[i]={value:k,enumerable:j,configurable:!0,writable:!0}):(k.enumerable===b&&(k.enumerable=j),d&&k.setName&&"function"==typeof k.setName&&k.setName(d+"."+i),e=e||{},e[i]=k)}e&&Object.defineProperties(a,e)}!function(b){function d(a,b,d){var e=a||{};if(b)for(var f=b.split("."),g=0,h=f.length;h>g;g++){var i=f[g];e[i]||Object.defineProperty(e,i,{value:{},writable:!1,enumerable:!0,configurable:!0}),e=e[i]}return d&&c(e,d,b||"<ANONYMOUS>"),e}function e(b,c){return d(a,b,c)}function f(a){if("string"==typeof a){var b=a;a=function(){return WinJS.Utilities.getMember(b)}}var c,d,e=h.uninitialized;return{setName:function(a){c=a},get:function(){switch(e){case h.initialized:return d;case h.uninitialized:e=h.working;try{WinJS.Utilities._writeProfilerMark("WinJS.Namespace._lazy:"+c+",StartTM"),d=a()}finally{WinJS.Utilities._writeProfilerMark("WinJS.Namespace._lazy:"+c+",StopTM"),e=h.uninitialized}return a=null,e=h.initialized,d;case h.working:throw"Illegal: reentrancy on initialization";default:throw"Illegal"}},set:function(a){switch(e){case h.working:throw"Illegal: reentrancy on initialization";default:e=h.initialized,d=a}},enumerable:!0,configurable:!0}}a[b]||(a[b]=Object.create(Object.prototype));var g=a[b];g.Namespace||(g.Namespace=Object.create(Object.prototype));var h={uninitialized:1,working:2,initialized:3};Object.defineProperties(g.Namespace,{defineWithParent:{value:d,writable:!0,enumerable:!0,configurable:!0},define:{value:e,writable:!0,enumerable:!0,configurable:!0},_lazy:{value:f,writable:!0,enumerable:!0,configurable:!0}})}("WinJS"),function(a){function b(b,d,e){return b=b||function(){},a.Utilities.markSupportedForProcessing(b),d&&c(b.prototype,d),e&&c(b,e),b}function d(d,e,f,g){if(d){e=e||function(){};var h=d.prototype;return e.prototype=Object.create(h),a.Utilities.markSupportedForProcessing(e),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0,enumerable:!0}),f&&c(e.prototype,f),g&&c(e,g),e}return b(e,f,g)}function e(a){a=a||function(){};var b,d;for(b=1,d=arguments.length;d>b;b++)c(a.prototype,arguments[b]);return a}a.Namespace.define("WinJS.Class",{define:b,derive:d,mix:e})}(WinJS)}(this),function(a,b){"use strict";function c(a){return a}function d(a,b,c){return a.split(".").reduce(function(a,b){return a?c(a[b]):null},b)}function e(a){return a.length>0&&0!==a.indexOf("-moz")&&"-"===a.charAt(0)&&(a=a.slice(1)),a.replace(/\-[a-z]/g,function(a){return a[1].toUpperCase()})}function f(a,b){return""===a?b:a+b.charAt(0).toUpperCase()+b.slice(1)}function g(a,b){return(""!==a?"-"+a.toLowerCase()+"-":"")+b}function h(){if(!a.document)return{};for(var b={},c=document.documentElement.style,d=["","webkit","ms","Moz"],h=["animation","transition","transform","animation-name","animation-duration","animation-delay","animation-timing-function","animation-iteration-count","animation-direction","animation-fill-mode","grid-column","grid-columns","grid-column-span","grid-row","grid-rows","grid-row-span","transform-origin","transition-property","transition-duration","transition-delay","transition-timing-function","scroll-snap-points-x","scroll-snap-points-y","scroll-chaining","scroll-limit","scroll-limit-x-max","scroll-limit-x-min","scroll-limit-y-max","scroll-limit-y-min","scroll-snap-type","scroll-snap-x","scroll-snap-y","overflow-style","user-select"],i={},j=0,k=h.length;k>j;j++)for(var l=h[j],m=e(l),n=0,o=d.length;o>n;n++){var p=d[n],q=f(p,m);if(q in c){var r=g(p,l);b[l]={cssName:r,scriptName:q},i[l]=p;break}}return b.animationPrefix=g(i.animation,""),b.keyframes=g(i.animation,"keyframes"),b}function i(){for(var b={},c=["","WebKit"],d=[{eventObject:"TransitionEvent",events:["transitionStart","transitionEnd"]},{eventObject:"AnimationEvent",events:["animationStart","animationEnd"]}],e=0,g=d.length;g>e;e++){for(var h=d[e],i="",j=0,k=c.length;k>j;j++){var l=c[j];if(l+h.eventObject in a){i=l.toLowerCase();break}}for(var j=0,m=h.events.length;m>j;j++){var n=h.events[j];b[n]=f(i,n),""===i&&(b[n]=b[n].toLowerCase())}}return b.manipulationStateChanged="MSManipulationEvent"in a?"ManipulationEvent":null,b}var j=!!a.Windows,k={get notSupportedForProcessing(){return b.Resources._getWinJSString("base/notSupportedForProcessing").value}};b.Namespace.define("WinJS.Utilities",{_setHasWinRT:{value:function(a){j=a},configurable:!1,writable:!1,enumerable:!1},hasWinRT:{get:function(){return j},configurable:!1,enumerable:!0},_getMemberFiltered:d,getMember:function(b,e){return b?d(b,e||a,c):null},_browserStyleEquivalents:h(),_browserEventEquivalents:i(),_getCamelCasedName:e,ready:function(c,d){return new b.Promise(function(e,f){function g(){if(c)try{c(),e()}catch(a){f(a)}else e()}var h=b.Utilities.testReadyState;h||(h=a.document?document.readyState:"complete"),"complete"===h||a.document&&null!==document.body?d?b.Utilities.Scheduler.schedule(function(){g()},b.Utilities.Scheduler.Priority.normal,null,"WinJS.Utilities.ready"):g():a.addEventListener("DOMContentLoaded",g,!1)})},strictProcessing:{get:function(){return!0},configurable:!1,enumerable:!0},markSupportedForProcessing:{value:function(a){return a.supportedForProcessing=!0,a},configurable:!1,writable:!1,enumerable:!0},requireSupportedForProcessing:{value:function(c){var d=!0;switch(d=d&&c!==a,d=d&&c!==a.location,d=d&&!(c instanceof HTMLIFrameElement),d=d&&!("function"==typeof c&&!c.supportedForProcessing),a.frames.length){case 0:break;case 1:d=d&&c!==a.frames[0];break;default:for(var e=0,f=a.frames.length;d&&f>e;e++)d=d&&c!==a.frames[e]}if(d)return c;throw new b.ErrorFromName("WinJS.Utilities.requireSupportedForProcessing",b.Resources._formatString(k.notSupportedForProcessing,c))},configurable:!1,writable:!1,enumerable:!0},_setImmediate:a.setImmediate?a.setImmediate.bind(a):function(a){setTimeout(a,0)},_yieldForEvents:a.setImmediate?a.setImmediate.bind(a):function(a){setTimeout(a,0)},_yieldForDomModification:a.setImmediate?a.setImmediate.bind(a):function(a){setTimeout(a,0)},_shallowCopy:function(a){return this._mergeAll([a])},_merge:function(a,b){return this._mergeAll([a,b])},_mergeAll:function(a){var b={};return a.forEach(function(a){Object.keys(a).forEach(function(c){b[c]=a[c]})}),b},_getProfilerMarkIdentifier:function(a){var b="";return a.id&&(b+=" id='"+a.id+"'"),a.className&&(b+=" class='"+a.className+"'"),b},_now:function(){return a.performance&&performance.now()||Date.now()},_traceAsyncOperationStarting:a.Debug&&Debug.msTraceAsyncOperationStarting&&Debug.msTraceAsyncOperationStarting.bind(a.Debug)||c,_traceAsyncOperationCompleted:a.Debug&&Debug.msTraceAsyncOperationCompleted&&Debug.msTraceAsyncOperationCompleted.bind(a.Debug)||c,_traceAsyncCallbackStarting:a.Debug&&Debug.msTraceAsyncCallbackStarting&&Debug.msTraceAsyncCallbackStarting.bind(a.Debug)||c,_traceAsyncCallbackCompleted:a.Debug&&Debug.msTraceAsyncCallbackCompleted&&Debug.msTraceAsyncCallbackCompleted.bind(a.Debug)||c}),b.Namespace.define("WinJS",{validation:!1,strictProcessing:{value:function(){},configurable:!1,writable:!1,enumerable:!1}})}(this,WinJS),function(){"use strict";function a(a,b,c){var f=a;return"function"==typeof f&&(f=f()),(c&&e.test(c)?"":c?c+": ":"")+(b?b.replace(d,":")+": ":"")+f}function b(a,b,c){var d=WinJS.Utilities.formatLog(a,b,c);console[c&&e.test(c)?c:"log"](d)}function c(a){return a.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&")}var d=/\s+/g,e=/^(error|warn|info|log)$/;WinJS.Namespace.define("WinJS.Utilities",{startLog:function(a){a=a||{},"string"==typeof a&&(a={tags:a});var e=a.type&&new RegExp("^("+c(a.type).replace(d," ").split(" ").join("|")+")$"),f=a.excludeTags&&new RegExp("(^|\\s)("+c(a.excludeTags).replace(d," ").split(" ").join("|")+")(\\s|$)","i"),g=a.tags&&new RegExp("(^|\\s)("+c(a.tags).replace(d," ").split(" ").join("|")+")(\\s|$)","i"),h=a.action||b;if(!(e||f||g||WinJS.log))return void(WinJS.log=h);var i=function(a,b,c){e&&!e.test(c)||f&&f.test(b)||g&&!g.test(b)||h(a,b,c),i.next&&i.next(a,b,c)};i.next=WinJS.log,WinJS.log=i},stopLog:function(){delete WinJS.log},formatLog:a})}(),function(a){"use strict";function b(a){var b="_on"+a+"state";return{get:function(){var a=this[b];return a&&a.userHandler},set:function(c){var d=this[b];c?(d||(d={wrapper:function(a){return d.userHandler(a)},userHandler:c},Object.defineProperty(this,b,{value:d,enumerable:!1,writable:!0,configurable:!0}),this.addEventListener(a,d.wrapper,!1)),d.userHandler=c):d&&(this.removeEventListener(a,d.wrapper,!1),this[b]=null)},enumerable:!0}}function c(){for(var a={},c=0,d=arguments.length;d>c;c++){var e=arguments[c];a["on"+e]=b(e)}return a}var d=a.Class.define(function(a,b,c){this.detail=b,this.target=c,this.timeStamp=Date.now(),this.type=a},{bubbles:{value:!1,writable:!1},cancelable:{value:!1,writable:!1},currentTarget:{get:function(){return this.target}},defaultPrevented:{get:function(){return this._preventDefaultCalled}},trusted:{value:!1,writable:!1},eventPhase:{value:0,writable:!1},target:null,timeStamp:null,type:null,preventDefault:function(){this._preventDefaultCalled=!0},stopImmediatePropagation:function(){this._stopImmediatePropagationCalled=!0},stopPropagation:function(){}},{supportedForProcessing:!1}),e={_listeners:null,addEventListener:function(a,b,c){c=c||!1,this._listeners=this._listeners||{};for(var d=this._listeners[a]=this._listeners[a]||[],e=0,f=d.length;f>e;e++){var g=d[e];if(g.useCapture===c&&g.listener===b)return}d.push({listener:b,useCapture:c})},dispatchEvent:function(a,b){var c=this._listeners&&this._listeners[a];if(c){var e=new d(a,b,this);c=c.slice(0,c.length);for(var f=0,g=c.length;g>f&&!e._stopImmediatePropagationCalled;f++)c[f].listener(e);return e.defaultPrevented||!1}return!1},removeEventListener:function(a,b,c){c=c||!1;var d=this._listeners&&this._listeners[a];if(d)for(var e=0,f=d.length;f>e;e++){var g=d[e];if(g.listener===b&&g.useCapture===c){d.splice(e,1),0===d.length&&delete this._listeners[a];break}}}};a.Namespace.define("WinJS.Utilities",{_createEventProperty:b,createEventProperties:c,eventMixin:e})}(WinJS),function(a,b,c){"use strict";var d,e,f=!1,g="contextchanged",h=b.Class.mix(b.Class.define(null,{},{supportedForProcessing:!1}),b.Utilities.eventMixin),i=new h,j={get malformedFormatStringInput(){return b.Resources._getWinJSString("base/malformedFormatStringInput").value}};b.Namespace.define("WinJS.Resources",{addEventListener:function(a,c,d){if(b.Utilities.hasWinRT&&!f&&a===g)try{var e=b.Resources._getResourceContext();e?e.qualifierValues.addEventListener("mapchanged",function(a){b.Resources.dispatchEvent(g,{qualifier:a.key,changed:a.target[a.key]})},!1):Windows.ApplicationModel.Resources.Core.ResourceManager.current.defaultContext.qualifierValues.addEventListener("mapchanged",function(a){b.Resources.dispatchEvent(g,{qualifier:a.key,changed:a.target[a.key]})},!1),f=!0}catch(h){}i.addEventListener(a,c,d)},removeEventListener:i.removeEventListener.bind(i),dispatchEvent:i.dispatchEvent.bind(i),_formatString:function(a){var c=arguments;return c.length>1&&(a=a.replace(/({{)|(}})|{(\d+)}|({)|(})/g,function(a,d,e,f,g,h){if(g||h)throw b.Resources._formatString(j.malformedFormatStringInput,g||h);return d&&"{"||e&&"}"||c[(0|f)+1]})),a},_getStringWinRT:function(a){if(!d){var e=Windows.ApplicationModel.Resources.Core.ResourceManager.current.mainResourceMap;try{d=e.getSubtree("Resources")}catch(f){}d||(d=e)}var g,h,i;try{var j=b.Resources._getResourceContext();i=j?d.getValue(a,j):d.getValue(a),i&&(g=i.valueAsString,g===c&&(g=i.toString()))}catch(f){}if(!g)return{value:a,empty:!0};try{h=i.getQualifierValue("Language")}catch(f){return{value:g}}return{value:g,lang:h}},_getStringJS:function(b){var c=a.strings&&a.strings[b];return"string"==typeof c&&(c={value:c}),c||{value:b,empty:!0}},_getResourceContext:function(){return a.document&&(e||(e=Windows.ApplicationModel.Resources.Core.ResourceContext.getForCurrentView())),e}}),Object.defineProperties(b.Resources,b.Utilities.createEventProperties(g));var k;b.Resources.getString=function(a){return(k=k||(b.Utilities.hasWinRT?b.Resources._getStringWinRT:b.Resources._getStringJS))(a)}}(this,WinJS),function(a,b){"use strict";function c(){}function d(a,b){var c;c=b&&"object"==typeof b&&"function"==typeof b.then?E:I,a._value=b,a._setState(c)}function e(a,b,c,d,e,f){return{exception:a,error:b,promise:c,handler:f,id:d,parent:e}}function f(a,b,c,d){var f=c._isException,g=c._errorId;return e(f?b:null,f?null:b,a,g,c,d)}function g(a,b,c){var d=c._isException,f=c._errorId;return q(a,f,d),e(d?b:null,d?null:b,a,f,c)}function h(a,b){var c=++M;return q(a,c),e(null,b,a,c)}function i(a,b){var c=++M;return q(a,c,!0),e(b,null,a,c)}function j(a,b,c,d){var e=WinJS.Utilities._traceAsyncOperationStarting("WinJS.Promise.done");p(a,{c:b,e:c,p:d,asyncOpID:e})}function k(a,b,c,d){a._value=b,n(a,b,c,d),a._setState(K)}function l(b,c){var d=b._value,e=b._listeners;if(e){b._listeners=null;var f,g;for(f=0,g=Array.isArray(e)?e.length:1;g>f;f++){var h=1===g?e:e[f],i=h.c,j=h.promise;if(WinJS.Utilities._traceAsyncOperationCompleted(h.asyncOpID,a.Debug&&Debug.MS_ASYNC_OP_STATUS_SUCCESS),j){WinJS.Utilities._traceAsyncCallbackStarting(h.asyncOpID);try{j._setCompleteValue(i?i(d):d)}catch(k){j._setExceptionValue(k)}finally{WinJS.Utilities._traceAsyncCallbackCompleted()}j._state!==E&&j._listeners&&c.push(j)}else S.prototype.done.call(b,i)}}}function m(b,c){var d=b._value,e=b._listeners;if(e){b._listeners=null;var g,h;for(g=0,h=Array.isArray(e)?e.length:1;h>g;g++){var i=1===h?e:e[g],j=i.e,k=i.promise,l=a.Debug&&(d&&d.name===z?Debug.MS_ASYNC_OP_STATUS_CANCELED:Debug.MS_ASYNC_OP_STATUS_ERROR);if(WinJS.Utilities._traceAsyncOperationCompleted(i.asyncOpID,l),k){var m=!1;try{j?(WinJS.Utilities._traceAsyncCallbackStarting(i.asyncOpID),m=!0,j.handlesOnError||n(k,d,f,b,j),k._setCompleteValue(j(d))):k._setChainedErrorValue(d,b)}catch(o){k._setExceptionValue(o)}finally{m&&WinJS.Utilities._traceAsyncCallbackCompleted()}k._state!==E&&k._listeners&&c.push(k)}else Q.prototype.done.call(b,null,j)}}}function n(a,b,c,d,e){if(x._listeners[y]){if(b instanceof Error&&b.message===z)return;x.dispatchEvent(y,c(a,b,d,e))}}function o(a,b){var c=a._listeners;if(c){var d,e;for(d=0,e=Array.isArray(c)?c.length:1;e>d;d++){var f=1===e?c:c[d],g=f.p;if(g)try{g(b)}catch(h){}f.c||f.e||!f.promise||f.promise._progress(b)}}}function p(a,b){var c=a._listeners;c?(c=Array.isArray(c)?c:[c],c.push(b)):c=b,a._listeners=c}function q(a,b,c){a._isException=c||!1,a._errorId=b}function r(a,b,c,d){a._value=b,n(a,b,c,d),a._setState(L)}function s(a,b){var c;c=b&&"object"==typeof b&&"function"==typeof b.then?E:J,a._value=b,a._setState(c)}function t(a,b,c,d){var e=new P(a),f=WinJS.Utilities._traceAsyncOperationStarting("WinJS.Promise.then");return p(a,{promise:e,c:b,e:c,p:d,asyncOpID:f}),e}function u(a){var b;return new WinJS.Promise(function(c){a?b=setTimeout(c,a):WinJS.Utilities._setImmediate(c)},function(){b&&clearTimeout(b)})}function v(a,b){var c=function(){b.cancel()},d=function(){a.cancel()};return a.then(c),b.then(d,d),b}a.Debug&&(a.Debug.setNonUserCodeExceptions=!0);var w=WinJS.Class.mix(WinJS.Class.define(null,{},{supportedForProcessing:!1}),WinJS.Utilities.eventMixin),x=new w;x._listeners={};var y="error",z="Canceled",A=!1,B={promise:1,thenPromise:2,errorPromise:4,exceptionPromise:8,completePromise:16};B.all=B.promise|B.thenPromise|B.errorPromise|B.exceptionPromise|B.completePromise;var C,D,E,F,G,H,I,J,K,L,M=1;C={name:"created",enter:function(a){a._setState(D)},cancel:c,done:c,then:c,_completed:c,_error:c,_notify:c,_progress:c,_setCompleteValue:c,_setErrorValue:c},D={name:"working",enter:c,cancel:function(a){a._setState(G)},done:j,then:t,_completed:d,_error:k,_notify:c,_progress:o,_setCompleteValue:s,_setErrorValue:r},E={name:"waiting",enter:function(a){var b=a._value;if(b instanceof P&&b._state!==L&&b._state!==J)p(b,{promise:a});else{var c=function(d){b._errorId?a._chainedError(d,b):(n(a,d,f,b,c),a._error(d))};c.handlesOnError=!0,b.then(a._completed.bind(a),c,a._progress.bind(a))}},cancel:function(a){a._setState(F)},done:j,then:t,_completed:d,_error:k,_notify:c,_progress:o,_setCompleteValue:s,_setErrorValue:r},F={name:"waiting_canceled",enter:function(a){a._setState(H);var b=a._value;b.cancel&&b.cancel()},cancel:c,done:j,then:t,_completed:d,_error:k,_notify:c,_progress:o,_setCompleteValue:s,_setErrorValue:r},G={name:"canceled",enter:function(a){a._setState(H),a._cancelAction()},cancel:c,done:j,then:t,_completed:d,_error:k,_notify:c,_progress:o,_setCompleteValue:s,_setErrorValue:r},H={name:"canceling",enter:function(a){var b=new Error(z);b.name=b.message,a._value=b,a._setState(K)},cancel:c,done:c,then:c,_completed:c,_error:c,_notify:c,_progress:c,_setCompleteValue:c,_setErrorValue:c},I={name:"complete_notify",enter:function(a){if(a.done=S.prototype.done,a.then=S.prototype.then,a._listeners)for(var b,c=[a];c.length;)b=c.shift(),b._state._notify(b,c);a._setState(J)},cancel:c,done:null,then:null,_completed:c,_error:c,_notify:l,_progress:c,_setCompleteValue:c,_setErrorValue:c},J={name:"success",enter:function(a){a.done=S.prototype.done,a.then=S.prototype.then,a._cleanupAction()},cancel:c,done:null,then:null,_completed:c,_error:c,_notify:l,_progress:c,_setCompleteValue:c,_setErrorValue:c},K={name:"error_notify",enter:function(a){if(a.done=Q.prototype.done,a.then=Q.prototype.then,a._listeners)for(var b,c=[a];c.length;)b=c.shift(),b._state._notify(b,c);a._setState(L)},cancel:c,done:null,then:null,_completed:c,_error:c,_notify:m,_progress:c,_setCompleteValue:c,_setErrorValue:c},L={name:"error",enter:function(a){a.done=Q.prototype.done,a.then=Q.prototype.then,a._cleanupAction()},cancel:c,done:null,then:null,_completed:c,_error:c,_notify:m,_progress:c,_setCompleteValue:c,_setErrorValue:c};var N,O=WinJS.Class.define(null,{_listeners:null,_nextState:null,_state:null,_value:null,cancel:function(){this._state.cancel(this),this._run()},done:function(a,b,c){this._state.done(this,a,b,c)},then:function(a,b,c){return this._state.then(this,a,b,c)},_chainedError:function(a,b){var c=this._state._error(this,a,g,b);return this._run(),c},_completed:function(a){var b=this._state._completed(this,a);return this._run(),b},_error:function(a){var b=this._state._error(this,a,h);return this._run(),b},_progress:function(a){this._state._progress(this,a)},_setState:function(a){this._nextState=a},_setCompleteValue:function(a){this._state._setCompleteValue(this,a),this._run()},_setChainedErrorValue:function(a,b){var c=this._state._setErrorValue(this,a,g,b);return this._run(),c},_setExceptionValue:function(a){var b=this._state._setErrorValue(this,a,i);return this._run(),b},_run:function(){for(;this._nextState;)this._state=this._nextState,this._nextState=null,this._state.enter(this)}},{supportedForProcessing:!1}),P=WinJS.Class.derive(O,function(a){A&&(A===!0||A&B.thenPromise)&&(this._stack=WinJS.Promise._getStack()),this._creator=a,this._setState(C),this._run()},{_creator:null,_cancelAction:function(){this._creator&&this._creator.cancel()},_cleanupAction:function(){this._creator=null}},{supportedForProcessing:!1}),Q=WinJS.Class.define(function(a){A&&(A===!0||A&B.errorPromise)&&(this._stack=WinJS.Promise._getStack()),this._value=a,n(this,a,h)},{cancel:function(){},done:function(a,b){var c=this._value;if(b)try{b.handlesOnError||n(null,c,f,this,b);var d=b(c);return void(d&&"object"==typeof d&&"function"==typeof d.done&&d.done())}catch(e){c=e}c instanceof Error&&c.message===z||WinJS.Utilities.Scheduler.schedule(function(){throw c},WinJS.Utilities.Scheduler.Priority.normal,null,"WinJS.Promise._throwException")},then:function(a,b){if(!b)return this;var c,d=this._value;try{b.handlesOnError||n(null,d,f,this,b),c=new S(b(d))}catch(e){c=e===d?this:new R(e)}return c}},{supportedForProcessing:!1}),R=WinJS.Class.derive(Q,function(a){A&&(A===!0||A&B.exceptionPromise)&&(this._stack=WinJS.Promise._getStack()),this._value=a,n(this,a,i)},{},{supportedForProcessing:!1}),S=WinJS.Class.define(function(a){if(A&&(A===!0||A&B.completePromise)&&(this._stack=WinJS.Promise._getStack()),a&&"object"==typeof a&&"function"==typeof a.then){var b=new P(null);return b._setCompleteValue(a),b}this._value=a},{cancel:function(){},done:function(a){if(a)try{var b=a(this._value);b&&"object"==typeof b&&"function"==typeof b.done&&b.done()}catch(c){WinJS.Utilities.Scheduler.schedule(function(){throw c},WinJS.Utilities.Scheduler.Priority.normal,null,"WinJS.Promise._throwException")}},then:function(a){try{var b=a?a(this._value):this._value;return b===this._value?this:new S(b)}catch(c){return new R(c)}}},{supportedForProcessing:!1}),T=WinJS.Class.derive(O,function(a,b){A&&(A===!0||A&B.promise)&&(this._stack=WinJS.Promise._getStack()),this._oncancel=b,this._setState(C),this._run();try{var c=this._completed.bind(this),d=this._error.bind(this),e=this._progress.bind(this);a(c,d,e)}catch(f){this._setExceptionValue(f)}},{_oncancel:null,_cancelAction:function(){if(this._oncancel)try{this._oncancel()}catch(a){}},_cleanupAction:function(){this._oncancel=null}},{addEventListener:function(a,b,c){x.addEventListener(a,b,c)},any:function(a){return new T(function(b,c){{var d=Object.keys(a);Array.isArray(a)?[]:{}}0===d.length&&b();var e=0;d.forEach(function(f){T.as(a[f]).then(function(){b({key:f,value:a[f]})},function(g){return g instanceof Error&&g.name===z?void(++e===d.length&&b(WinJS.Promise.cancel)):void c({key:f,value:a[f]})})})},function(){var b=Object.keys(a);b.forEach(function(b){var c=T.as(a[b]);"function"==typeof c.cancel&&c.cancel()})})},as:function(a){return a&&"object"==typeof a&&"function"==typeof a.then?a:new S(a)},cancel:{get:function(){return N=N||new Q(new WinJS.ErrorFromName(z))}},dispatchEvent:function(a,b){return x.dispatchEvent(a,b)},is:function(a){return a&&"object"==typeof a&&"function"==typeof a.then},join:function(a){return new T(function(c,d,e){var f=Object.keys(a),g=Array.isArray(a)?[]:{},h=Array.isArray(a)?[]:{},i=0,j=f.length,k=function(a){if(0===--j){var b=Object.keys(g).length;if(0===b)c(h);else{var i=0;f.forEach(function(a){var b=g[a];b instanceof Error&&b.name===z&&i++}),i===b?c(WinJS.Promise.cancel):d(g)}}else e({Key:a,Done:!0})};return f.forEach(function(c){var d=a[c];d===b?i++:T.then(d,function(a){h[c]=a,k(c)},function(a){g[c]=a,k(c)})}),j-=i,0===j?void c(h):void 0},function(){Object.keys(a).forEach(function(b){var c=T.as(a[b]);"function"==typeof c.cancel&&c.cancel()})})},removeEventListener:function(a,b,c){x.removeEventListener(a,b,c)},supportedForProcessing:!1,then:function(a,b,c,d){return T.as(a).then(b,c,d)},thenEach:function(a,b,c,d){var e=Array.isArray(a)?[]:{};return Object.keys(a).forEach(function(f){e[f]=T.as(a[f]).then(b,c,d)}),T.join(e)},timeout:function(a,b){var c=u(a);return b?v(c,b):c},wrap:function(a){return new S(a)},wrapError:function(a){return new Q(a)},_veryExpensiveTagWithStack:{get:function(){return A},set:function(a){A=a}},_veryExpensiveTagWithStack_tag:B,_getStack:function(){if(a.Debug&&Debug.debuggerEnabled)try{throw new Error}catch(b){return b.stack}},_cancelBlocker:function(a){if(!T.is(a))return T.wrap(a);var b,c,d=new WinJS.Promise(function(a,d){b=a,c=d},function(){b=null,c=null});return a.then(function(a){b&&b(a)},function(a){c&&c(a)}),d}});Object.defineProperties(T,WinJS.Utilities.createEventProperties(y));var U=WinJS.Class.derive(O,function(a){this._oncancel=a,this._setState(C),this._run()},{_cancelAction:function(){this._oncancel&&this._oncancel()},_cleanupAction:function(){this._oncancel=null}},{supportedForProcessing:!1}),V=WinJS.Class.define(function(a){this._promise=new U(a)},{promise:{get:function(){return this._promise}},cancel:function(){this._promise.cancel()},complete:function(a){this._promise._completed(a)},error:function(a){this._promise._error(a)},progress:function(a){this._promise._progress(a)}},{supportedForProcessing:!1});WinJS.Namespace.define("WinJS",{Promise:T,_Signal:V})}(this),function(){"use strict";function a(a){var b={},c="_prev"+a,d="_next"+a;return b["_remove"+a]=function(){var a=this[c],b=this[d];b&&(b[c]=a),a&&(a[d]=b),this[c]=null,this[d]=null},b["_insert"+a+"Before"]=function(a){var b=this[c];return b&&(b[d]=a),a[d]=this,a[c]=b,this[c]=a,a},b["_insert"+a+"After"]=function(a){var b=this[d];return this[d]=a,a[d]=b,a[c]=this,b&&(b[c]=a),a},b}WinJS.Namespace.define("WinJS.Utilities",{_linkedListMixin:a})}(this),function(a,b){"use strict";function c(a,c,d){return d!==b?"("+a+";"+c+";"+d+")":c!==b?"("+a+";"+c+")":a!==b?"("+a+")":""}function d(a,b,d,e){WinJS.Utilities._writeProfilerMark("WinJS.Scheduler:"+a+c(d,e)+","+b)}function e(a,d,e,f,g){var h=a.name||f!==b||g!==b;WinJS.Utilities._writeProfilerMark("WinJS.Scheduler:"+d+":"+a.id+(h?c(a.name,f,g):"")+","+e)}function f(){return!1}function g(a){throw"Illegal call by job("+a.id+") in state: "+this.name}function h(a){return function(b,c,d){b._setState(a,c,d)}}function i(a,b){a._setPriority(b)}function j(a,b){function c(a,b){WinJS.log&&WinJS.log(b+": MARKER: "+a.name,"winjs scheduler","log")}function d(a,b){WinJS.log&&WinJS.log(b+": JOB("+a.id+"): state: "+(a._state?a._state.name:"")+(a.name?", name: "+a.name:""),"winjs scheduler","log")}WinJS.log&&WinJS.log("highWaterMark: "+vb,"winjs scheduler","log");var e=0,f=b?pb[pb.length-1]:pb[0],g=f;do g instanceof gb&&c(g,e),g instanceof M&&d(g,e),e++,g=b?g["_prev"+a]:g["_next"+a];while(g)}function k(){function a(a,c){b+="    "+(c?"*":" ")+"id: "+a.id+", priority: "+A(a.priority).name+(a.name?", name: "+a.name:"")+"\n"}var b="";b+="Jobs:\n";var c=A(vb),d=0;for(rb&&(a(rb,!0),d++);c.priority>=ob.min;)c instanceof M&&(a(c,!1),d++),c=c._nextJob;0===d&&(b+="     None\n"),b+="Drain requests:\n";for(var e=0,f=tb.length;f>e;e++)b+="    "+(0===e?"*":" ")+"priority: "+A(tb[e].priority).name+", name: "+tb[e].name+"\n";return 0===tb.length&&(b+="     None\n"),b}function l(){var a=pb[0];do{if(a instanceof M)return!1;a=a._nextJob}while(a);return!0}function m(){return 0===tb.length?null:tb[0].priority}function n(a){d("drain","StartTM",a.name,A(a.priority).name)}function o(a,b){b&&d("drain-canceled","info",a.name,A(a.priority).name),d("drain","StopTM",a.name,A(a.priority).name)}function p(a,b,c){tb.push({priority:a,complete:b,name:c}),1===tb.length&&(n(tb[0]),a>vb&&(vb=a,jb=!0))}function q(a,b){var c,d=tb.length;for(c=0;d>c;c++)if(tb[c].complete===a){0===c&&(o(tb[0],b),tb[1]&&n(tb[1])),tb.splice(c,1);break}}function r(){var a=tb.shift();a&&(o(a),tb[0]&&n(tb[0]),a.complete())}function s(){var a=!1;if(tb.length)for(var b=m();+b===b&&b>vb;)ib=b,r(),a=!0,b=m();return a}function t(a){return a>=ob.aboveNormal+1?yb.HIGH:a>=ob.belowNormal?yb.NORMAL:yb.IDLE}function u(a,b){return zb[a]>=zb[b]}function v(a,b){return zb[a]>zb[b]}function w(a){switch(a){case yb.HIGH:return!1;case yb.NORMAL:return yb.isTaskScheduledAtPriorityOrHigher(yb.HIGH);case yb.IDLE:return yb.isTaskScheduledAtPriorityOrHigher(yb.NORMAL)}}function x(a,b){var c=A(b);c.priority>vb&&(vb=c.priority,jb=!0),c._insertJobAfter(a)}function y(a,b){var c=A(b);c.priority>vb&&(vb=c.priority,jb=!0),c._nextMarker._insertJobBefore(a)}function z(a){return a=0|a,a=Math.max(a,mb),a=Math.min(a,nb)}function A(a){return a=z(a),pb[-1*(a-nb)]}function B(a){hb=!0,d("timeslice","StartTM");var b,c,f=!0;jb=!1;try{for(var g,h=Ab(),i=h+ub,j=!1,k=!1,l=function(){return k=!1,jb?!0:w(t(vb))?!0:tb.length?!1:Ab()>i?(k=!0,!0):!1};vb>=ob.min&&!l()&&!j;){b=!1,c=A(vb)._nextJob;do{if(ib=c.priority,c instanceof M)g!==c.priority&&(+g===g&&d("priority","StopTM",A(g).name),d("priority","StartTM",A(c.priority).name),g=c.priority),b=!0,f=!1,rb=c,e(rb,"job-running","StartTM",A(ib).name),c._execute(l),e(rb,"job-running","StopTM",A(ib).name),rb=null,f=!0;else{var m=t(vb);vb=c.priority,b=s();var n=t(vb);!v(m,n)||sb&&!yb.isTaskScheduledAtPriorityOrHigher(n)||(j=!0)}c=c._nextJob}while(c&&!b&&!j&&!w(t(vb)));jb=!1}}finally{rb=null,f||(e(c,"job-error","info"),e(c,"job-running","StopTM",A(ib).name),c.cancel()),+g===g&&d("priority","StopTM",A(g).name);for(var o=!1;vb>=ob.min&&!o;){b=!1,c=A(vb)._nextJob;do c instanceof M?o=!0:(vb=c.priority,b=s()),c=c._nextJob;while(c&&!b&&!o)}var p;p=f?k?"timeslice exhausted":vb<ob.min?"jobs exhausted":j?"reached WWA priority boundary":"WWA host work":"job error",a&&(qb=null),hb=!1,vb>=ob.min&&C(),d("yielding","info",p),d("timeslice","StopTM")}}function C(a){+a!==a&&(a=vb);var b=t(a);if(!hb&&(!qb||sb&&!u(qb,b))){var c=++Bb,d=function(){c>Cb&&(Cb=Bb,B(!0))};yb.execAsyncAtPriority(d,b),qb=b}}function D(a,c){var d=lb++;c===b&&(c="Drain Request "+d),a=+a===a?a:ob.min,a=z(a);var e,f=new J(function(b){e=b,p(a,e,c)},function(){q(e,!0)});return hb||C(),f}function E(a){return yb.execAtPriority(a,yb.HIGH)}function F(){return new P}function G(a,b,d,e){b=b||ob.normal,d=d||null;var f=++kb,g=WinJS.Utilities._traceAsyncOperationStarting("WinJS.Utilities.Scheduler.schedule: "+f+c(e));return e=e||"",new M(f,a,b,d,e,g)}function H(){if(hb)return ib;switch(yb.getCurrentPriority()){case yb.HIGH:return ob.high;case yb.NORMAL:return ob.normal;case yb.IDLE:return ob.idle}}function I(a){return function(b,c){var d;return new WinJS.Promise(function(e){d=G(function(){e(b)},a,null,c)},function(){d.cancel()})}}var J=WinJS.Promise,K=WinJS.Utilities._linkedListMixin,L={get jobInfoIsNoLongerValid(){return WinJS.Resources._getWinJSString("base/jobInfoIsNoLongerValid").value}},M=WinJS.Class.define(function(a,b,c,d,f,g){this._id=a,this._work=b,this._context=d,this._name=f,this._asyncOpID=g,this._setPriority(c),this._setState(R),e(this,"job-scheduled","info")},{completed:{get:function(){return!!this._state.completed}},id:{get:function(){return this._id}},name:{get:function(){return this._name},set:function(a){this._name=a}},owner:{get:function(){return this._owner},set:function(a){this._owner&&this._owner._remove(this),this._owner=a,this._owner&&this._owner._add(this)}},priority:{get:function(){return this._priority},set:function(a){a=z(a),this._state.setPriority(this,a)}},cancel:function(){this._state.cancel(this)},pause:function(){this._state.pause(this)},resume:function(){this._state.resume(this)},_execute:function(a){this._state.execute(this,a)},_executeDone:function(a){return this._state.executeDone(this,a)},_blockedDone:function(a){return this._state.blockedDone(this,a)},_setPriority:function(a){+this._priority===this._priority&&this._priority!==a&&e(this,"job-priority-changed","info",A(this._priority).name,A(a).name),this._priority=a},_setState:function(a,b,c){this._state&&WinJS.log&&WinJS.log("Transitioning job ("+this.id+") from: "+this._state.name+" to: "+a.name,"winjs scheduler","log"),this._state=a,this._state.enter(this,b,c)}});WinJS.Class.mix(M,K("Job"));var N={complete:1,"continue":2,block:3},O=WinJS.Class.define(function(a,b){this._job=b,this._result=null,this._yieldPolicy=N.complete,this._shouldYield=a},{job:{get:function(){return this._throwIfDisabled(),this._job}},shouldYield:{get:function(){return this._throwIfDisabled(),this._shouldYield()}},setPromise:function(a){this._throwIfDisabled(),this._result=a,this._yieldPolicy=N.block},setWork:function(a){this._throwIfDisabled(),this._result=a,this._yieldPolicy=N.continue},_disablePublicApi:function(){this._publicApiDisabled=!0},_throwIfDisabled:function(){if(this._publicApiDisabled)throw new WinJS.ErrorFromName("WinJS.Utilities.Scheduler.JobInfoIsNoLongerValid",L.jobInfoIsNoLongerValid)}}),P=WinJS.Class.define(function(){this._jobs={}},{cancelAll:function(){var a=this._jobs,b=Object.keys(a);this._jobs={};for(var c=0,d=b.length;d>c;c++)a[b[c]].cancel()},_add:function(a){this._jobs[a.id]=a},_remove:function(a){delete this._jobs[a.id]}}),Q=WinJS.Class.define(function(a){this.name=a,this.enter=g,this.execute=g,this.executeDone=g,this.blockedDone=g,this.cancel=g,this.pause=g,this.resume=g,this.setPriority=g
}),R=new Q("created"),S=new Q("scheduled"),T=new Q("paused"),U=new Q("canceled"),V=new Q("running"),W=new Q("running_paused"),X=new Q("running_resumed"),Y=new Q("running_canceled"),Z=new Q("running_canceled_blocked"),$=new Q("cooperative_yield"),_=new Q("cooperative_yield_paused"),ab=new Q("blocked"),bb=new Q("blocked_waiting"),cb=new Q("blocked_paused"),db=new Q("blocked_paused_waiting"),eb=new Q("blocked_canceled"),fb=new Q("complete");R.enter=function(a){y(a,a.priority),a._setState(S)},S.enter=function(){C()},S.execute=h(V),S.cancel=h(U),S.pause=h(T),S.resume=f,S.setPriority=function(a,b){a.priority!==b&&(a._setPriority(b),a.pause(),a.resume())},T.enter=function(a){e(a,"job-paused","info"),a._removeJob()},T.cancel=h(U),T.pause=f,T.resume=function(a){e(a,"job-resumed","info"),y(a,a.priority),a._setState(S)},T.setPriority=i,U.enter=function(b){e(b,"job-canceled","info"),WinJS.Utilities._traceAsyncOperationCompleted(b._asyncOpID,a.Debug&&Debug.MS_ASYNC_OP_STATUS_CANCELED),b._removeJob(),b._work=null,b._context=null,b.owner=null},U.cancel=f,U.pause=f,U.resume=f,U.setPriority=f,V.enter=function(a,b){a._removeJob();var c=a.priority,d=a._work,e=a._context;a._work=null,a._context=null;var f=new O(b,a);WinJS.Utilities._traceAsyncCallbackStarting(a._asyncOpID);try{yb.execAtPriority(function(){d.call(e,f)},t(c))}finally{WinJS.Utilities._traceAsyncCallbackCompleted(),f._disablePublicApi()}a._context=e;var g=a._executeDone(f._yieldPolicy);a._setState(g,f._result,c)},V.executeDone=function(a,b){switch(b){case N.complete:return fb;case N.continue:return $;case N.block:return ab}},V.cancel=function(a){jb=!0,a._setState(Y)},V.pause=function(a){jb=!0,a._setState(W)},V.resume=f,V.setPriority=i,W.enter=f,W.executeDone=function(a,b){switch(b){case N.complete:return fb;case N.continue:return _;case N.block:return cb}},W.cancel=h(Y),W.pause=f,W.resume=h(X),W.setPriority=i,X.enter=f,X.executeDone=function(a,b){switch(b){case N.complete:return fb;case N.continue:return $;case N.block:return ab}},X.cancel=h(Y),X.pause=h(W),X.resume=f,X.setPriority=i,Y.enter=f,Y.executeDone=function(a,b){switch(b){case N.complete:case N.continue:return U;case N.block:return Z}},Y.cancel=f,Y.pause=f,Y.resume=f,Y.setPriority=f,Z.enter=function(a,b){b.cancel(),a._setState(U)},$.enter=function(a,b,c){e(a,"job-yielded","info"),c===a.priority?x(a,a.priority):y(a,a.priority),a._work=b,a._setState(S)},_.enter=function(a,b){e(a,"job-yielded","info"),a._work=b,a._setState(T)},ab.enter=function(a,b,c){e(a,"job-blocked","StartTM"),a._work=b,a._setState(bb),b.done(function(b){e(a,"job-blocked","StopTM");var d=a._blockedDone(b);a._setState(d,b,c)},function(b){return b&&"Canceled"===b.name||e(a,"job-error","info"),e(a,"job-blocked","StopTM"),a._setState(U),J.wrapError(b)})},bb.enter=f,bb.blockedDone=function(a,b){return"function"==typeof b?$:fb},bb.cancel=h(eb),bb.pause=h(db),bb.resume=f,bb.setPriority=i,cb.enter=function(a,b,c){e(a,"job-blocked","StartTM"),a._work=b,a._setState(db),b.done(function(b){e(a,"job-blocked","StopTM");var d=a._blockedDone(b);a._setState(d,b,c)},function(b){return b&&"Canceled"===b.name||e(a,"job-error","info"),e(a,"job-blocked","StopTM"),a._setState(U),J.wrapError(b)})},db.enter=f,db.blockedDone=function(a,b){return"function"==typeof b?_:fb},db.cancel=h(eb),db.pause=f,db.resume=h(bb),db.setPriority=i,eb.enter=function(a){a._work.cancel(),a._work=null},eb.blockedDone=function(){return U},eb.cancel=f,eb.pause=f,eb.resume=f,eb.setPriority=f,fb.completed=!0,fb.enter=function(b){WinJS.Utilities._traceAsyncOperationCompleted(b._asyncOpID,a.Debug&&Debug.MS_ASYNC_OP_STATUS_SUCCESS),b._work=null,b._context=null,b.owner=null,e(b,"job-completed","info")},fb.cancel=f,fb.pause=f,fb.resume=f,fb.setPriority=f;var gb=WinJS.Class.define(function(a,b){this.priority=a,this.name=b},{});WinJS.Class.mix(gb,K("Job"),K("Marker"));var hb,ib,jb,kb=0,lb=0,mb=-15,nb=15,ob={max:15,high:13,aboveNormal:9,normal:0,belowNormal:-9,idle:-13,min:-15},pb=[new gb(15,"max"),new gb(14,"14"),new gb(13,"high"),new gb(12,"12"),new gb(11,"11"),new gb(10,"10"),new gb(9,"aboveNormal"),new gb(8,"8"),new gb(7,"7"),new gb(6,"6"),new gb(5,"5"),new gb(4,"4"),new gb(3,"3"),new gb(2,"2"),new gb(1,"1"),new gb(0,"normal"),new gb(-1,"-1"),new gb(-2,"-2"),new gb(-3,"-3"),new gb(-4,"-4"),new gb(-5,"-5"),new gb(-6,"-6"),new gb(-7,"-7"),new gb(-8,"-8"),new gb(-9,"belowNormal"),new gb(-10,"-10"),new gb(-11,"-11"),new gb(-12,"-12"),new gb(-13,"idle"),new gb(-14,"-14"),new gb(-15,"min"),new gb(-16,"<TAIL>")],qb=null,rb=null,sb=!(!a.MSApp||!a.MSApp.execAtPriority),tb=[],ub=30,vb=ob.min;pb.reduce(function(a,b){return a&&(a._insertJobAfter(b),a._insertMarkerAfter(b)),b});var wb=a.setImmediate?a.setImmediate.bind(a):function(a){setTimeout(a,16)},xb={execAsyncAtPriority:function(a,b){b===yb.HIGH&&setTimeout(a,0),wb(a)},execAtPriority:function(a){return a()},getCurrentPriority:function(){return xb.NORMAL},isTaskScheduledAtPriorityOrHigher:function(){return!1},HIGH:"high",NORMAL:"normal",IDLE:"idle"},yb=sb?a.MSApp:xb,zb={};zb[yb.IDLE]=1,zb[yb.NORMAL]=2,zb[yb.HIGH]=3;var Ab=a.performance&&performance.now.bind(performance)||Date.now.bind(Date),Bb=0,Cb=0;WinJS.Namespace.define("WinJS.Utilities.Scheduler",{Priority:ob,schedule:G,createOwnerToken:F,execHigh:E,requestDrain:D,currentPriority:{get:H},schedulePromiseHigh:I(ob.high),schedulePromiseAboveNormal:I(ob.aboveNormal),schedulePromiseNormal:I(ob.normal),schedulePromiseBelowNormal:I(ob.belowNormal),schedulePromiseIdle:I(ob.idle),retrieveState:k,_JobNode:M,_JobInfo:O,_OwnerToken:P,_dumpList:j,_isEmpty:{get:l},_usingWwaScheduler:{get:function(){return sb},set:function(b){sb=b,yb=sb?a.MSApp:xb}},_MSApp:{get:function(){return yb},set:function(a){yb=a}},_TIME_SLICE:ub})}(this),function(a,b){"use strict";b.Namespace.define("WinJS",{ErrorFromName:b.Class.derive(Error,function(a,b){this.name=a,this.message=b||a},{},{supportedForProcessing:!1})})}(this,WinJS),function(){"use strict";function a(a,b,d){c.schedule(function(){a(b)},d,null,"WinJS.xhr")}function b(){}var c=WinJS.Utilities.Scheduler;WinJS.Namespace.define("WinJS",{xhr:function(d){var e;return new WinJS.Promise(function(f,g,h){var i=c.currentPriority;e=new XMLHttpRequest,e.onreadystatechange=function(){return e._canceled?void(e.onreadystatechange=b):void(4===e.readyState?(e.status>=200&&e.status<300?a(f,e,i):a(g,e,i),e.onreadystatechange=b):a(h,e,i))},e.open(d.type||"GET",d.url,!0,d.user,d.password),e.responseType=d.responseType||"",Object.keys(d.headers||{}).forEach(function(a){e.setRequestHeader(a,d.headers[a])}),d.customRequestInitializer&&d.customRequestInitializer(e),void 0===d.data?e.send():e.send(d.data)},function(){e.onreadystatechange=b,e._canceled=!0,e.abort()})}})}(),function(a){"use strict";var b,c,d,e,f,g,h={get nonStaticHTML(){return WinJS.Resources._getWinJSString("base/nonStaticHTML").value}};b=c=function(a,b){a.innerHTML=b},d=e=function(a,b){a.outerHTML=b},f=g=function(a,b,c){a.insertAdjacentHTML(b,c)};var i=a.MSApp;if(i)c=function(a,b){i.execUnsafeLocalFunction(function(){a.innerHTML=b})},e=function(a,b){i.execUnsafeLocalFunction(function(){a.outerHTML=b})},g=function(a,b,c){i.execUnsafeLocalFunction(function(){a.insertAdjacentHTML(b,c)})};else if(a.msIsStaticHTML){var j=function(b){if(!a.msIsStaticHTML(b))throw new WinJS.ErrorFromName("WinJS.Utitilies.NonStaticHTML",h.nonStaticHTML)};b=function(a,b){j(b),a.innerHTML=b},d=function(a,b){j(b),a.outerHTML=b},f=function(a,b,c){j(c),a.insertAdjacentHTML(b,c)}}WinJS.Namespace.define("WinJS.Utilities",{setInnerHTML:b,setInnerHTMLUnsafe:c,setOuterHTML:d,setOuterHTMLUnsafe:e,insertAdjacentHTML:f,insertAdjacentHTMLUnsafe:g})}(this),function(){"use strict";var a="WinJS.2.1",b="Developer.";0===a.indexOf(b)&&(a=a.substring(b.length)),WinJS.Namespace.define("WinJS.Resources",{_getWinJSString:function(b){return WinJS.Resources.getString("ms-resource://"+a+"/"+b)}})}(this),function(){"use strict";WinJS.Namespace.define("WinJS.Utilities",{markDisposable:function(a,b){var c=!1;WinJS.Utilities.addClass(a,"win-disposable");var d=a.winControl||a;d.dispose=function(){c||(c=!0,WinJS.Utilities.disposeSubTree(a),b&&b())}},disposeSubTree:function(a){if(a){WinJS.Utilities._writeProfilerMark("WinJS.Utilities.disposeSubTree,StartTM");for(var b=a.querySelectorAll(".win-disposable"),c=0,d=b.length;d>c;){var e=b[c];e.winControl&&e.winControl.dispose&&e.winControl.dispose(),e.dispose&&e.dispose(),c+=e.querySelectorAll(".win-disposable").length+1}WinJS.Utilities._writeProfilerMark("WinJS.Utilities.disposeSubTree,StopTM")}},_disposeElement:function(a){if(a){var b=!1;a.winControl&&a.winControl.dispose&&(a.winControl.dispose(),b=!0),a.dispose&&(a.dispose(),b=!0),b||WinJS.Utilities.disposeSubTree(a)}}})}(),function(a,b){"use strict";function c(a,b){d(a,b)}function d(a,b,c){if("object"==typeof b)for(var d=Object.keys(b),e=0,f=d.length;f>e;e++){var g=d[e],h=b[g];if(g.length>2){var i=g[0],j=g[1];if(!("o"!==i&&"O"!==i||"n"!==j&&"N"!==j)&&"function"==typeof h&&a.addEventListener){a.addEventListener(g.substr(2),h);continue}}c||(a[g]=h)}}a.document&&b.Namespace.define("WinJS.UI",{DOMEventMixin:b.Namespace._lazy(function(){return{_domElement:null,addEventListener:function(a,b,c){(this.element||this._domElement).addEventListener(a,b,c||!1)},dispatchEvent:function(a,b){var c=document.createEvent("Event");return c.initEvent(a,!1,!1),c.detail=b,"object"==typeof b&&Object.keys(b).forEach(function(a){c[a]=b[a]}),(this.element||this._domElement).dispatchEvent(c)},removeEventListener:function(a,b,c){(this.element||this._domElement).removeEventListener(a,b,c||!1)}}}),setOptions:c,_setOptions:d})}(this,WinJS),function(a,b){"use strict";function c(a){var c=function(c){for(var d,e=a;e;){if(e.msParentSelectorScope){var f=e.parentNode;if(f&&(d=b.Utilities._matchesSelector(f,c)?f:f.querySelector(c)))break}e=e.parentNode}return d||document.querySelector(c)};return h(c)}function d(d,e){return new b.Promise(function(f,h){try{var i,j=d.getAttribute("data-win-options");j&&(i=b.UI.optionsParser(j,a,{select:c(d)}));var k,l=1;e.length>2&&l++;var m=function(){l--,0===l&&(d.winControl=d.winControl||k,f(k))};k=new e(d,i,m),m()}catch(n){b.log&&b.log(b.Resources._formatString(g.errorActivatingControl,n&&n.message),"winjs controls","error"),h(n)}})}function e(a,c){return new b.Promise(function(e,g){b.Utilities._writeProfilerMark("WinJS.UI:processAll,StartTM"),a=a||document.body;var h=0,j="[data-win-control]",k=a.querySelectorAll(j),l=[];!c&&f(a)&&l.push(a);for(var m=0,n=k.length;n>m;m++)l.push(k[m]);if(0===l.length)return b.Utilities._writeProfilerMark("WinJS.UI:processAll,StopTM"),void e(a);for(var o=function(){h-=1,0>h&&(b.Utilities._writeProfilerMark("WinJS.UI:processAll,StopTM"),e(a))},p=new Array(l.length),m=0,n=l.length;n>m;m++){var q,r=l[m],s=r.winControl;s?q=s.constructor:p[m]=q=f(r),q&&q.isDeclarativeControlContainer&&(m+=r.querySelectorAll(j).length)}b.Utilities._writeProfilerMark("WinJS.UI:processAllActivateControls,StartTM");for(var m=0,n=l.length;n>m;m++){var t=p[m],r=l[m];if(t&&!r.winControl&&(h++,d(r,t).then(o,function(a){b.Utilities._writeProfilerMark("WinJS.UI:processAll,StopTM"),g(a)}),t.isDeclarativeControlContainer&&"function"==typeof t.isDeclarativeControlContainer)){var u=i(t.isDeclarativeControlContainer);u(r.winControl,b.UI.processAll)}}b.Utilities._writeProfilerMark("WinJS.UI:processAllActivateControls,StopTM"),o()})}function f(c){if(c.getAttribute){var d=c.getAttribute("data-win-control");if(d)return b.Utilities._getMemberFiltered(d.trim(),a,i)}}if(a.document){var g={get errorActivatingControl(){return b.Resources._getWinJSString("base/errorActivatingControl").value}},h=b.Utilities.markSupportedForProcessing,i=b.Utilities.requireSupportedForProcessing,j=!1;b.Namespace.define("WinJS.UI",{scopedSelect:function(a,b){return c(b)(a)},processAll:function(a,c){return j?e(a,c):b.Utilities.ready().then(function(){return j=!0,e(a,c)})},process:function(a){if(a&&a.winControl)return b.Promise.as(a.winControl);var c=f(a);return c?d(a,c):b.Promise.as()}})}}(this,WinJS),function(a,b){"use strict";a.document&&b.Namespace.define("WinJS.Utilities",{QueryCollection:b.Class.derive(Array,function(a){a&&this.include(a)},{forEach:function(a,b){return Array.prototype.forEach.apply(this,[a,b]),this},get:function(a){return this[a]},setAttribute:function(a,b){return this.forEach(function(c){c.setAttribute(a,b)}),this},getAttribute:function(a){return this.length>0?this[0].getAttribute(a):void 0},addClass:function(a){return this.forEach(function(c){b.Utilities.addClass(c,a)}),this},hasClass:function(a){return this.length>0?b.Utilities.hasClass(this[0],a):!1},removeClass:function(a){return this.forEach(function(c){b.Utilities.removeClass(c,a)}),this},toggleClass:function(a){return this.forEach(function(c){b.Utilities.toggleClass(c,a)}),this},listen:function(a,b,c){return this.forEach(function(d){d.addEventListener(a,b,c)}),this},removeEventListener:function(a,b,c){return this.forEach(function(d){d.removeEventListener(a,b,c)}),this},setStyle:function(a,b){return this.forEach(function(c){c.style[a]=b}),this},clearStyle:function(a){return this.forEach(function(b){b.style[a]=""}),this},query:function(a){var c=new b.Utilities.QueryCollection;return this.forEach(function(b){c.include(b.querySelectorAll(a))}),c},include:function(a){if("number"==typeof a.length)for(var b=0;b<a.length;b++)this.push(a[b]);else a.DOCUMENT_FRAGMENT_NODE&&a.nodeType===a.DOCUMENT_FRAGMENT_NODE?this.include(a.childNodes):this.push(a)},control:function(a,c){return a&&"function"==typeof a?this.forEach(function(b){b.winControl=new a(b,c)}):(c=a,this.forEach(function(a){b.UI.process(a).done(function(a){a&&b.UI.setOptions(a,c)})})),this}},{supportedForProcessing:!1}),query:function(a,c){return new b.Utilities.QueryCollection((c||document).querySelectorAll(a))},id:function(a){var c=document.getElementById(a);return new b.Utilities.QueryCollection(c?[c]:[])},children:function(a){return new b.Utilities.QueryCollection(a.children)}})}(this,WinJS),function(a,b){"use strict";function c(a){for(var b=a.length,c=b-1;c>=0;c--)a[c]||(a.splice(c,1),b--);return b}function d(a){var b=a.className||"";return"string"==typeof b?b:b.baseVal||""}function e(a,b){var c=a.className||"";return"string"==typeof c?a.className=b:a.className.baseVal=b,a}function f(a,c){return b.Utilities.convertToPixels(a,window.getComputedStyle(a,null)[c])}function g(a,b,c,d,e){var f=b.toLowerCase();a._eventsMap||(a._eventsMap={}),a._eventsMap[f]||(a._eventsMap[f]=[]),a._eventsMap[f].push({listener:c,useCapture:d,data:e})}function h(a,b,c,d){var e=b.toLowerCase(),f=a._eventsMap&&a._eventsMap[e];if(f)for(var g=f.length-1;g>=0;g--){var h=f[g];if(h.listener===c&&!!d==!!h.useCapture)return f.splice(g,1),h}return null}function i(a,b){var c=b.toLowerCase();return a._eventsMap&&a._eventsMap[c]&&a._eventsMap[c].slice(0)||[]}function j(a,b,c){for(;a;){for(var d=i(a,b),e=0,f=d.length;f>e;e++)d[e].listener.call(a,c);a=a.parentNode}}function k(a){return(a.relatedTarget&&"IFRAME"===a.relatedTarget.tagName||a.target&&"IFRAME"===a.target.tagName)&&(a.relatedTarget=null),a}function l(a,b,c,d){if(d)throw"This custom WinJS event only supports bubbling";g(a,b,c,d)}function m(a,b){b._handledTouch=!0;for(var c=b.changedTouches,d=null,e=0,f=c.length;f>e;e++){var g=c[e];b.pointerType=s.MSPOINTER_TYPE_TOUCH,b.pointerId=g.identifier,b.screenX=g.screenX,b.screenY=g.screenY,b.clientX=g.clientX,b.clientY=g.clientY,b.pageX=g.pageX,b.pageY=g.pageY,b.radiusX=g.radiusX,b.radiusY=g.radiusY,b.rotationAngle=g.rotationAngle,b.force=g.force,b._currentTouch=g,d=d||a(b)}return d}function n(a,b){return b.pointerType=s.MSPOINTER_TYPE_MOUSE,b.pointerId=-1,a(b)}function o(a,b,c,d){var e,f,h,i=b.toLowerCase(),j=u[i];j.mouse&&(e=function(a){return a._normalizedType=i,h?void(h=!1):n(c,a)},a.addEventListener(j.mouse,e,d)),j.touch&&(f=function(a){return a._normalizedType=i,h=!0,m(c,a)},a.addEventListener(j.touch,f,d)),g(a,b,c,d,{mouseWrapper:e,touchWrapper:f})}function p(a,b,c,d){var e=b.toLowerCase(),f=h(a,b,c,d);if(f){var g=u[e];f.data.mouseWrapper&&a.removeEventListener(g.mouse,f.data.mouseWrapper,d),f.data.touchWrapper&&a.removeEventListener(g.touch,f.data.touchWrapper,d)}}if(a.document){var q=a.MSGestureEvent||{MSGESTURE_FLAG_BEGIN:1,MSGESTURE_FLAG_CANCEL:4,MSGESTURE_FLAG_END:2,MSGESTURE_FLAG_INERTIA:8,MSGESTURE_FLAG_NONE:0},r=a.MSManipulationEvent||{MS_MANIPULATION_STATE_ACTIVE:1,MS_MANIPULATION_STATE_CANCELLED:6,MS_MANIPULATION_STATE_COMMITTED:7,MS_MANIPULATION_STATE_DRAGGING:5,MS_MANIPULATION_STATE_INERTIA:2,MS_MANIPULATION_STATE_PRESELECT:3,MS_MANIPULATION_STATE_SELECTING:4,MS_MANIPULATION_STATE_STOPPED:0},s=a.MSPointerEvent||{MSPOINTER_TYPE_TOUCH:"touch",MSPOINTER_TYPE_PEN:"pen",MSPOINTER_TYPE_MOUSE:"mouse"},t=null;a.addEventListener("blur",function(){var a=t;a&&j(a,"focusout",k({type:"focusout",target:a,relatedTarget:null})),t=null}),document.documentElement.addEventListener("focus",function(a){var b=t;t=a.target,b&&j(b,"focusout",k({type:"focusout",target:b,relatedTarget:t})),t&&j(t,"focusin",k({type:"focusin",target:t,relatedTarget:b}))},!0);var u={pointerdown:{touch:"touchstart",mouse:"mousedown"},pointerup:{touch:"touchend",mouse:"mouseup"},pointermove:{touch:"touchmove",mouse:"mousemove"},pointerenter:{touch:null,mouse:"mouseenter"},pointerover:{touch:null,mouse:"mouseover"},pointerout:{touch:"touchleave",mouse:"mouseout"},pointercancel:{touch:"touchcancel",mouse:null}},v={focusout:{register:l,unregister:h},focusin:{register:l,unregister:h}};if(!a.PointerEvent){var w={register:o,unregister:p};v.pointerdown=w,v.pointerup=w,v.pointermove=w,v.pointerenter=w,v.pointerover=w,v.pointerout=w,v.pointercancel=w}var x=b.Class.define(function(a){this._callback=a,this._toDispose=[],this._attributeFilter=[],this._scheduled=!1,this._pendingChanges=[],this._observerCount=0,this._handleCallback=this._handleCallback.bind(this),this._targetElements=[]},{observe:function(a,b){-1===this._targetElements.indexOf(a)&&this._targetElements.push(a),this._observerCount++,b.attributes&&this._addRemovableListener(a,"DOMAttrModified",this._handleCallback),b.attributeFilter&&(this._attributeFilter=b.attributeFilter)},disconnect:function(){this._observerCount=0,this._targetElements=[],this._toDispose.forEach(function(a){a()})},_addRemovableListener:function(a,b,c){a.addEventListener(b,c),this._toDispose.push(function(){a.removeEventListener(b,c)})},_handleCallback:function(a){if(a.stopPropagation(),(!this._attributeFilter.length||-1!==this._attributeFilter.indexOf(a.attrName))&&-1!==this._targetElements.indexOf(a.target)){var c=a.attrName;"tabindex"===c&&(c="tabIndex"),this._pendingChanges.push({type:"attributes",target:a.target,attributeName:c}),1===this._observerCount?this._dispatchEvent():this._scheduled===!1&&(this._scheduled=!0,b.Utilities._setImmediate(this._dispatchEvent.bind(this)))}},_dispatchEvent:function(){try{this._callback(this._pendingChanges)}finally{this._pendingChanges=[],this._scheduled=!1}}},{_isShim:!0}),y=a.MutationObserver||x,z=0;b.Namespace.define("WinJS.Utilities",{_dataKey:"_msDataKey",_pixelsRE:/^-?\d+\.?\d*(px)?$/i,_numberRE:/^-?\d+/i,_uniqueID:function(a){return a.uniqueID||a._uniqueID||(a._uniqueID="element__"+ ++z),a.uniqueID||a._uniqueID},_createGestureRecognizer:function(){if(a.MSGesture)return new MSGesture;var b=function(){};return{addEventListener:b,removeEventListener:b,addPointer:b,stop:b}},_MSGestureEvent:q,_MSManipulationEvent:r,_elementsFromPoint:function(a,b){return document.msElementsFromPoint?document.msElementsFromPoint(a,b):[document.elementFromPoint(a,b)]},_matchesSelector:function(a,b){var c=a.matches||a.msMatchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector;return c.call(a,b)},_addEventListener:function(a,b,c,d){var e=b&&b.toLowerCase(),f=v[e];f?f.register(a,b,c,d):a.addEventListener(b,c,d)},_removeEventListener:function(a,b,c,d){var e=b&&b.toLowerCase(),f=v[e];f?f.unregister(a,b,c,d):a.removeEventListener(b,c,d)},_bubbleEvent:j,_setPointerCapture:function(a,b){a.setPointerCapture&&a.setPointerCapture(b)},_releasePointerCapture:function(a,b){a.releasePointerCapture&&a.releasePointerCapture(b)},_MSPointerEvent:s,_zoomTo:function(a,b){a.msZoomTo?a.msZoomTo(b):("number"==typeof b.contentX&&(a.scrollLeft=b.contentX),"number"==typeof b.contentY&&(a.scrollTop=b.contentY))},_setActive:function(b){var c=!0;try{a.HTMLElement&&HTMLElement.prototype.setActive?b.setActive():b.focus()}catch(d){c=!1}return c},_MutationObserver:y,Key:{backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause:19,capsLock:20,escape:27,space:32,pageUp:33,pageDown:34,end:35,home:36,leftArrow:37,upArrow:38,rightArrow:39,downArrow:40,insert:45,deleteKey:46,num0:48,num1:49,num2:50,num3:51,num4:52,num5:53,num6:54,num7:55,num8:56,num9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,leftWindows:91,rightWindows:92,menu:93,numPad0:96,numPad1:97,numPad2:98,numPad3:99,numPad4:100,numPad5:101,numPad6:102,numPad7:103,numPad8:104,numPad9:105,multiply:106,add:107,subtract:109,decimalPoint:110,divide:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,numLock:144,scrollLock:145,browserBack:166,browserForward:167,semicolon:186,equal:187,comma:188,dash:189,period:190,forwardSlash:191,graveAccent:192,openBracket:219,backSlash:220,closeBracket:221,singleQuote:222,IME:229},data:function(a){return a[b.Utilities._dataKey]||(a[b.Utilities._dataKey]={}),a[b.Utilities._dataKey]},hasClass:function(a,b){if(a.classList)return a.classList.contains(b);for(var c=d(a),e=c.trim().split(" "),f=e.length,g=0;f>g;g++)if(e[g]==b)return!0;return!1},addClass:function(a,b){if(a.classList){if(b.indexOf(" ")<0)a.classList.add(b);else{var f=b.split(" ");c(f);for(var g=0,h=f.length;h>g;g++)a.classList.add(f[g])}return a}var i,j=d(a),k=j.split(" "),l=c(k);if(b.indexOf(" ")>=0){var f=b.split(" ");c(f);for(var g=0;l>g;g++){var m=f.indexOf(k[g]);m>=0&&f.splice(m,1)}f.length>0&&(i=f.join(" "))}else{for(var n=!1,g=0;l>g;g++)if(k[g]===b){n=!0;break}n||(i=b)}return i&&(l>0&&k[0].length>0?e(a,j+" "+i):e(a,i)),a},removeClass:function(a,b){if(a.classList){if(0===a.classList.length)return a;var f=b.split(" ");c(f);for(var g=0,h=f.length;h>g;g++)a.classList.remove(f[g]);return a}var f,i,j=d(a);if(b.indexOf(" ")>=0)f=b.split(" "),i=c(f);else{if(j.indexOf(b)<0)return a;f=[b],i=1}for(var k,l=j.split(" "),m=c(l),g=m-1;g>=0;g--)f.indexOf(l[g])>=0&&(l.splice(g,1),k=!0);return k&&e(a,l.join(" ")),a},toggleClass:function(a,b){if(a.classList)return a.classList.toggle(b),a;for(var c=d(a),f=c.trim().split(" "),g=f.length,h=!1,i=0;g>i;i++)f[i]==b&&(h=!0);return h?e(a,f.reduce(function(a,c){return c==b?a:a&&a.length>0?a+" "+c:c},"")):g>0&&f[0].length>0?e(a,c+" "+b):e(a,c+b),a},getRelativeLeft:function(a,b){if(!a)return 0;for(var c=a.offsetLeft,d=a.parentNode;d&&(c-=d.offsetLeft,d!==b);)d=d.parentNode;return c},getRelativeTop:function(a,b){if(!a)return 0;for(var c=a.offsetTop,d=a.parentNode;d&&(c-=d.offsetTop,d!==b);)d=d.parentNode;return c},empty:function(a){if(a.childNodes&&a.childNodes.length>0)for(var b=a.childNodes.length-1;b>=0;b--)a.removeChild(a.childNodes.item(b));return a},_isDOMElement:function(a){return a&&"object"==typeof a&&"string"==typeof a.tagName},getContentWidth:function(a){var b=f(a,"borderLeftWidth")+f(a,"borderRightWidth"),c=f(a,"paddingLeft")+f(a,"paddingRight");return a.offsetWidth-b-c},getTotalWidth:function(a){var b=f(a,"marginLeft")+f(a,"marginRight");return a.offsetWidth+b},getContentHeight:function(a){var b=f(a,"borderTopWidth")+f(a,"borderBottomWidth"),c=f(a,"paddingTop")+f(a,"paddingBottom");return a.offsetHeight-b-c},getTotalHeight:function(a){var b=f(a,"marginTop")+f(a,"marginBottom");return a.offsetHeight+b},getPosition:function(a){for(var b=a,c=a.offsetParent,d=a.offsetTop,e=a.offsetLeft;(a=a.parentNode)&&a!==document.body&&a!==document.documentElement;){d-=a.scrollTop;var f=document.defaultView.getComputedStyle(a,null).direction;e-="rtl"!==f?a.scrollLeft:-a.scrollLeft,a===c&&(d+=a.offsetTop,e+=a.offsetLeft,c=a.offsetParent)}return{left:e,top:d,width:b.offsetWidth,height:b.offsetHeight}},convertToPixels:function(a,b){if(!this._pixelsRE.test(b)&&this._numberRE.test(b)){var c=a.style.left;return a.style.left=b,b=a.style.pixelLeft,a.style.left=c,b}return Math.round(parseFloat(b,10))||0},eventWithinElement:function(a,b){var c=b.relatedTarget;return c&&c!==a?a.contains(c):!1}})}}(this,WinJS),function(a){"use strict";function b(a){var b=document.createElement("a");return b.href=a,b.href}function c(a){return document.location.href.toLowerCase()===a.toLowerCase()}if(a.document){var d={};WinJS.Namespace.define("WinJS.UI.Pages",{_mixin:{dispose:function(){this._disposed||(this._disposed=!0,WinJS.Utilities.disposeSubTree(this.element),this.element=null)},load:function(a){return this.selfhost?void 0:WinJS.UI.Fragments.renderCopy(b(a))},init:function(){},processed:function(){},render:function(a,b,c){return this.selfhost||a.appendChild(c),a},ready:function(){},error:function(a){return WinJS.Promise.wrapError(a)}},define:function(a,e){a=b(a);var f=d[a.toLowerCase()];return f||(f=WinJS.Class.define(function(b,d,e,f){var g=this;this._disposed=!1,this.element=b=b||document.createElement("div"),WinJS.Utilities.addClass(b,"win-disposable"),b.msSourceLocation=a,this.uri=a,this.selfhost=c(a),b.winControl=this,WinJS.Utilities.addClass(b,"pagecontrol");var h=" uri='"+a+"'"+WinJS.Utilities._getProfilerMarkIdentifier(this.element);WinJS.Utilities._writeProfilerMark("WinJS.UI.Pages:createPage"+h+",StartTM");var i=WinJS.Promise.wrap().then(function(){return g.load(a)}),j=i.then(function(a){return WinJS.Promise.join({loadResult:a,initResult:g.init(b,d)})}).then(function(a){return g.render(b,d,a.loadResult)});this.elementReady=j.then(function(){return b}),this.renderComplete=j.then(function(a){return WinJS.UI.processAll(a).then(function(){return a})}).then(function(){return g.processed(b,d)}).then(function(){return g});var k=function(){e&&e(g),WinJS.Utilities._writeProfilerMark("WinJS.UI.Pages:createPage"+h+",StopTM")};this.renderComplete.then(k,k),this.renderComplete.then(function(){return f}).then(function(){g.ready(b,d)}).then(null,function(a){return g.error(a)})},WinJS.UI.Pages._mixin),f=WinJS.Class.mix(f,WinJS.UI.DOMEventMixin),d[a.toLowerCase()]=f),e&&(f=WinJS.Class.mix(f,e)),c(a)&&WinJS.Utilities.ready(function(){WinJS.UI.Pages.render(a,document.body)}),f},get:function(a){a=b(a);var c=d[a.toLowerCase()];return c||(c=WinJS.UI.Pages.define(a)),c},_remove:function(a){a=b(a),WinJS.UI.Fragments.clearCache(a),delete d[a.toLowerCase()]},render:function(a,b,c,d){var e=WinJS.UI.Pages.get(a),f=new e(b,c,null,d);return f.renderComplete}}),WinJS.Namespace.define("WinJS.UI",{HtmlControl:WinJS.Class.define(function(a,b,c){WinJS.UI.Pages.render(b.uri,a,b).then(c,function(){c()})})})}}(this),function(a,b){"use strict";function c(a,c,d,e){var f=a.src,g=!f;if(g&&(f=c+"script["+d+"]"),f=f.toLowerCase(),!(f in t)){var h=null;t[f]=!0;var i=document.createElement("script");if(a.language&&i.setAttribute("language","javascript"),i.setAttribute("type",a.type),i.setAttribute("async","false"),a.id&&i.setAttribute("id",a.id),g){var j=a.text;h=e.then(function(){i.text=j}).then(null,function(){})}else h=new b.Promise(function(b){i.onload=i.onerror=function(){b()},i.setAttribute("src",a.src)});return s.appendChild(i),{promise:h,inline:g}}}function d(a,b,c){var d=(b+"script["+c+"]").toLowerCase();d in u||(u[d]=!0,s.appendChild(a.cloneNode(!0)))}function e(a){var b=a.href.toLowerCase();if(!(b in v)){v[b]=!0;var c=a.cloneNode(!1);c.href=a.href,s.appendChild(c)}}function f(a,c){if("string"==typeof a)return h(a,c);var d={docfrag:b.Utilities.data(a).docFragment};if(!d.docfrag){for(var e=document.createDocumentFragment();a.childNodes.length>0;)e.appendChild(a.childNodes[0]);d.docfrag=b.Utilities.data(a).docFragment=e,a.setAttribute("data-win-hasfragment","")}return c&&o(a),b.Promise.as(d)}function g(a,c){return b.UI.Fragments._populateDocument(a,c).then(function(){return a.document?i(c,a):a}).then(b.UI.Fragments._cleanupDocument).then(function(){return a})}function h(a,c){var d=a.toLowerCase(),e=x[d];if(e)return c&&delete x[d],e.promise?e.promise:b.Promise.as(e);e={},c||(x[d]=e);var f=e.promise=g(e,a);return e.promise.then(function(){delete e.promise}),f}function i(a,f){var g=f.document,h=g.body,i=[];r(g.querySelectorAll('link[rel="stylesheet"], link[type="text/css"]'),e),r(g.getElementsByTagName("style"),function(b,c){d(b,a,c)});var j=b.Promise.as();r(g.getElementsByTagName("script"),function(b,d){var e=c(b,a,d,j);e&&(e.inline||(j=e.promise),i.push(e.promise))}),r(h.getElementsByTagName("img"),function(a){a.src=a.src}),r(h.getElementsByTagName("a"),function(a){if(""!==a.href){var b=a.getAttribute("href");b&&"#"!=b[0]&&(a.href=a.href)}});for(var k=h.getElementsByTagName("script");k.length>0;){var l=k[0];l.parentNode.removeChild(l)}return b.Promise.join(i).then(function(){for(var a=document.createDocumentFragment(),b=document.importNode(g.body,!0);b.childNodes.length>0;)a.appendChild(b.childNodes[0]);return f.docfrag=a,f})}function j(){w||(w=!0,r(s.querySelectorAll("script"),function(a){t[a.src.toLowerCase()]=!0}),r(s.querySelectorAll('link[rel="stylesheet"], link[type="text/css"]'),function(a){v[a.href.toLowerCase()]=!0}))}function k(a,b){return l(a,b,!0)}function l(a,c,d){var e=(a instanceof HTMLElement?b.Utilities._getProfilerMarkIdentifier(a):" href='"+a+"'")+"["+ ++y+"]";return b.Utilities._writeProfilerMark("WinJS.UI.Fragments:render"+e+",StartTM"),j(),f(a,!d).then(function(a){var f=a.docfrag;d&&(f=f.cloneNode(!0));for(var g=f.firstChild;g;)1===g.nodeType&&(g.msParentSelectorScope=!0),g=g.nextSibling;var h;return c?(c.appendChild(f),h=c):h=f,b.Utilities._writeProfilerMark("WinJS.UI.Fragments:render"+e+",StopTM"),h})}function m(a,b){return l(a,b,!1)}function n(a){return j(),f(a).then(function(a){return a.docfrag})}function o(a){a?"string"==typeof a?delete x[a.toLowerCase()]:(delete b.Utilities.data(a).docFragment,a.removeAttribute("data-win-hasfragment")):x={}}function p(a){if(b.Utilities.hasWinRT){var c=document.createElement("a");c.href=a;var d=c.href,e=new Windows.Foundation.Uri(d),f=e.schemeName;if("ms-appx"!==f)throw new b.ErrorFromName("WinJS.UI.Fragments.InvalidUri",q.invalidFragmentUri);return d}return a}var q={get invalidFragmentUri(){return b.Resources._getWinJSString("base/invalidFragmentUri").value}};if(a.document){var r=function(a,b){for(var c=0,d=a.length;d>c;c++)b(a[c],c)},s=document.head||document.getElementsByTagName("head")[0],t={},u={},v={},w=!1,x={},y=1;b.Namespace.define("WinJS.UI.Fragments",{renderCopy:k,render:m,cache:n,clearCache:o,_cacheStore:{get:function(){return x}},_forceLocal:p})}}(this,WinJS),function(a){"use strict";function b(a){var b=a.iframe;b&&(b.contentDocument.removeEventListener("DOMContentLoaded",a.domContentLoaded,!1),b.parentNode.removeChild(b),delete a.document,delete a.iframe,delete a.domContentLoaded)}function c(a,b){return new WinJS.Promise(function(c){var d=document.createElement("iframe");d.src=b,d.style.display="none",a.domContentLoaded=function(){a.document=d.contentDocument,a.iframe=d,c()},document.body.appendChild(d),d.contentWindow.onerror=function(){return!0},d.contentDocument.addEventListener("DOMContentLoaded",a.domContentLoaded,!1)})}function d(a){return a.document&&delete a.document,WinJS.Promise.as()}function e(a,b){b=WinJS.UI.Fragments._forceLocal(b);var c=document.implementation.createHTMLDocument("frag"),d=c.createElement("base");c.head.appendChild(d);var e=c.createElement("a");return c.body.appendChild(e),d.href=document.location.href,e.setAttribute("href",b),d.href=e.href,a.document=c,WinJS.xhr({url:b}).then(function(a){WinJS.Utilities.setInnerHTMLUnsafe(c.documentElement,a.responseText),c.head.appendChild(d)})}a.document&&(a.document&&document.implementation.createHTMLDocument&&"file:"!==document.location.protocol?WinJS.Namespace.define("WinJS.UI.Fragments",{_populateDocument:e,_cleanupDocument:d}):WinJS.Namespace.define("WinJS.UI.Fragments",{_populateDocument:c,_cleanupDocument:b}))
}(this),function optionsLexerInit(global,undefined){"use strict";WinJS.Namespace.define("WinJS.UI",{_optionsLexer:WinJS.Namespace._lazy(function(){function reservedWord(a){return{type:tokenType.reservedWord,value:a,length:a.length,keyword:!0}}function reservedWordLookup(a){switch(a.charCodeAt(0)){case 98:switch(a){case"break":return reservedWord(a)}break;case 99:switch(a){case"case":case"catch":case"class":case"const":case"continue":return reservedWord(a)}break;case 100:switch(a){case"debugger":case"default":case"delete":case"do":return reservedWord(a)}break;case 101:switch(a){case"else":case"enum":case"export":case"extends":return reservedWord(a)}break;case 102:switch(a){case"false":return tokens.falseLiteral;case"finally":case"for":case"function":return reservedWord(a)}break;case 105:switch(a){case"if":case"import":case"in":case"instanceof":return reservedWord(a)}break;case 110:switch(a){case"null":return tokens.nullLiteral;case"new":return reservedWord(a)}break;case 114:switch(a){case"return":return reservedWord(a)}break;case 115:switch(a){case"super":case"switch":return reservedWord(a)}break;case 116:switch(a){case"true":return tokens.trueLiteral;case"this":return tokens.thisKeyword;case"throw":case"try":case"typeof":return reservedWord(a)}break;case 118:switch(a){case"var":case"void":return reservedWord(a)}break;case 119:switch(a){case"while":case"with":return reservedWord(a)}}}var tokenType={leftBrace:1,rightBrace:2,leftBracket:3,rightBracket:4,separator:5,colon:6,semicolon:7,comma:8,dot:9,nullLiteral:10,trueLiteral:11,falseLiteral:12,numberLiteral:13,stringLiteral:14,identifier:15,reservedWord:16,thisKeyword:17,leftParentheses:18,rightParentheses:19,eof:20,error:21},tokens={leftBrace:{type:tokenType.leftBrace,length:1},rightBrace:{type:tokenType.rightBrace,length:1},leftBracket:{type:tokenType.leftBracket,length:1},rightBracket:{type:tokenType.rightBracket,length:1},colon:{type:tokenType.colon,length:1},semicolon:{type:tokenType.semicolon,length:1},comma:{type:tokenType.comma,length:1},dot:{type:tokenType.dot,length:1},nullLiteral:{type:tokenType.nullLiteral,length:4,value:null,keyword:!0},trueLiteral:{type:tokenType.trueLiteral,length:4,value:!0,keyword:!0},falseLiteral:{type:tokenType.falseLiteral,length:5,value:!1,keyword:!0},thisKeyword:{type:tokenType.thisKeyword,length:4,value:"this",keyword:!0},leftParentheses:{type:tokenType.leftParentheses,length:1},rightParentheses:{type:tokenType.rightParentheses,length:1},eof:{type:tokenType.eof,length:0}},lexer=function(){function isIdentifierStartCharacter(a,b,c,d){switch(a){case a>=97&&122>=a&&a:case a>=65&&90>=a&&a:case 36:case 95:return!0;case isWhitespace(a)&&a:case isLineTerminator(a)&&a:return!1;case a>127&&a:return!0;case 92:return d>c+4&&117===b.charCodeAt(c)&&isHexDigit(b.charCodeAt(c+1))&&isHexDigit(b.charCodeAt(c+2))&&isHexDigit(b.charCodeAt(c+3))&&isHexDigit(b.charCodeAt(c+4))?!0:!1;default:return!1}}function readIdentifierPart(a,b,c){for(var d=!1;c>b;){var e=a.charCodeAt(b);switch(e){case e>=97&&122>=e&&e:case e>=65&&90>=e&&e:case 36:case 95:break;case isWhitespace(e)&&e:case isLineTerminator(e)&&e:return d?-b:b;case e>127&&e:break;case e>=48&&57>=e&&e:break;case 92:if(c>b+5&&117===a.charCodeAt(b+1)&&isHexDigit(a.charCodeAt(b+2))&&isHexDigit(a.charCodeAt(b+3))&&isHexDigit(a.charCodeAt(b+4))&&isHexDigit(a.charCodeAt(b+5))){b+=5,d=!0;break}return d?-b:b;default:return d?-b:b}b++}return d?-b:b}function readIdentifierToken(a,b,c){var d=b;b=readIdentifierPart(a,b,c);var e=!1;0>b&&(b=-b,e=!0);var f=a.substr(d,b-d);e&&(f=""+JSON.parse('"'+f+'"'));var g=reservedWordLookup(f);return g?g:{type:tokenType.identifier,length:b-d,value:f}}function isHexDigit(a){switch(a){case a>=48&&57>=a&&a:case a>=97&&102>=a&&a:case a>=65&&70>=a&&a:return!0;default:return!1}}function readHexIntegerLiteral(a,b,c){for(;c>b&&isHexDigit(a.charCodeAt(b));)b++;return b}function isDecimalDigit(a){switch(a){case a>=48&&57>=a&&a:return!0;default:return!1}}function readDecimalDigits(a,b,c){for(;c>b&&isDecimalDigit(a.charCodeAt(b));)b++;return b}function readDecimalLiteral(a,b,c){if(b=readDecimalDigits(a,b,c),c>b&&46===a.charCodeAt(b)&&c>b+1&&isDecimalDigit(a.charCodeAt(b+1))&&(b=readDecimalDigits(a,b+2,c)),c>b){var d=a.charCodeAt(b);if(101===d||69===d){var e=b+1;c>e&&(d=a.charCodeAt(e),(43===d||45===d)&&e++,b=readDecimalDigits(a,e,c))}}return b}function readDecimalLiteralToken(a,b,c,d){var c=readDecimalLiteral(a,c,d),e=c-b;return{type:tokenType.numberLiteral,length:e,value:+a.substr(b,e)}}function isLineTerminator(a){switch(a){case 10:case 13:case 8232:case 8233:return!0;default:return!1}}function readStringLiteralToken(text,offset,limit){var startOffset=offset,quoteCharCode=text.charCodeAt(offset),hasEscape=!1;for(offset++;limit>offset&&!isLineTerminator(text.charCodeAt(offset));){if(limit>offset+1&&92===text.charCodeAt(offset))switch(hasEscape=!0,text.charCodeAt(offset+1)){case quoteCharCode:case 92:case 10:case 8232:case 8233:offset+=2;continue;case 13:offset+=limit>offset+2&&10===text.charCodeAt(offset+2)?3:2;continue}if(offset++,text.charCodeAt(offset-1)===quoteCharCode)break}var length=offset-startOffset;hasEscape=hasEscape||1===length||text.charCodeAt(offset-1)!==quoteCharCode;var stringValue;return stringValue=hasEscape?eval(text.substr(startOffset,length)):text.substr(startOffset+1,length-2),{type:tokenType.stringLiteral,length:length,value:stringValue}}function isWhitespace(a){switch(a){case 9:case 11:case 12:case 32:case 160:case 65279:return!0;case 5760>a&&a:return!1;case 5760:case 6158:case a>=8192&&8202>=a&&a:case 8239:case 8287:case 12288:return!0;default:return!1}}function readWhitespace(a,b,c){for(;c>b;){var d=a.charCodeAt(b);switch(d){case 9:case 11:case 12:case 32:case 160:case 65279:break;case 5760>d&&d:return b;case 5760:case 6158:case d>=8192&&8202>=d&&d:case 8239:case 8287:case 12288:break;default:return b}b++}return b}function lex(a,b,c,d){for(;d>c;){var e,f=c,g=b.charCodeAt(c++);switch(g){case isWhitespace(g)&&g:case isLineTerminator(g)&&g:c=readWhitespace(b,c,d),e={type:tokenType.separator,length:c-f};continue;case 34:case 39:e=readStringLiteralToken(b,c-1,d);break;case 40:e=tokens.leftParentheses;break;case 41:e=tokens.rightParentheses;break;case 43:case 45:if(d>c){var h=b.charCodeAt(c);if(46===h){var i=c+1;if(d>i&&isDecimalDigit(b.charCodeAt(i))){e=readDecimalLiteralToken(b,f,i,d);break}}else if(isDecimalDigit(h)){e=readDecimalLiteralToken(b,f,c,d);break}}e={type:tokenType.error,length:c-f,value:b.substring(f,c)};break;case 44:e=tokens.comma;break;case 46:e=tokens.dot,d>c&&isDecimalDigit(b.charCodeAt(c))&&(e=readDecimalLiteralToken(b,f,c,d));break;case 48:var j=d>c?b.charCodeAt(c):0;if(120===j||88===j){var k=readHexIntegerLiteral(b,c+1,d);e={type:tokenType.numberLiteral,length:k-f,value:+b.substr(f,k-f)}}else e=readDecimalLiteralToken(b,f,c,d);break;case g>=49&&57>=g&&g:e=readDecimalLiteralToken(b,f,c,d);break;case 58:e=tokens.colon;break;case 59:e=tokens.semicolon;break;case 91:e=tokens.leftBracket;break;case 93:e=tokens.rightBracket;break;case 123:e=tokens.leftBrace;break;case 125:e=tokens.rightBrace;break;default:if(isIdentifierStartCharacter(g,b,c,d)){e=readIdentifierToken(b,c-1,d);break}e={type:tokenType.error,length:c-f,value:b.substring(f,c)}}c+=e.length-1,a.push(e)}}return function(a){var b=[];return lex(b,a,0,a.length),b.push(tokens.eof),b}}();return lexer.tokenType=tokenType,lexer})})}(this),function(a,b){"use strict";function c(){throw"Illegal"}function d(a){for(var b=Object.keys(f.tokenType),c=0,d=b.length;d>c;c++)if(a===f.tokenType[b[c]])return b[c];return"<unknown>"}var e={get invalidOptionsRecord(){return WinJS.Resources._getWinJSString("base/invalidOptionsRecord").value},get unexpectedTokenExpectedToken(){return WinJS.Resources._getWinJSString("base/unexpectedTokenExpectedToken").value},get unexpectedTokenExpectedTokens(){return WinJS.Resources._getWinJSString("base/unexpectedTokenExpectedTokens").value},get unexpectedTokenGeneric(){return WinJS.Resources._getWinJSString("base/unexpectedTokenGeneric").value}},f=WinJS.Namespace.defineWithParent(null,null,{lexer:WinJS.Namespace._lazy("WinJS.UI._optionsLexer"),tokenType:WinJS.Namespace._lazy("WinJS.UI._optionsLexer.tokenType")}),g=WinJS.Utilities.requireSupportedForProcessing,h=WinJS.Namespace.defineWithParent(null,null,{BaseInterpreter:WinJS.Namespace._lazy(function(){return WinJS.Class.define(null,{_error:function(a){throw new WinJS.ErrorFromName("WinJS.UI.ParseError",a)},_currentOffset:function(){for(var a=(this._tokens.length,this._pos),b=0,c=0;a>c;c++)b+=this._tokens[c].length;return b},_evaluateAccessExpression:function(a){switch(this._current.type){case f.tokenType.dot:switch(this._read(),this._current.type){case f.tokenType.identifier:case this._current.keyword&&this._current.type:var b=this._current.value;return this._read(),a[b];default:this._unexpectedToken(f.tokenType.identifier,f.tokenType.reservedWord)}return;case f.tokenType.leftBracket:this._read();var c=this._evaluateValue();return this._read(f.tokenType.rightBracket),a[c]}},_evaluateAccessExpressions:function(a){for(;;)switch(this._current.type){case f.tokenType.dot:case f.tokenType.leftBracket:a=this._evaluateAccessExpression(a);break;default:return a}},_evaluateIdentifier:function(a,b){var c=this._readIdentifier();return b=a?b[c]:this._context[c]},_evaluateIdentifierExpression:function(){var a=this._evaluateIdentifier(!1);switch(this._current.type){case f.tokenType.dot:case f.tokenType.leftBracket:return this._evaluateAccessExpressions(a);default:return a}},_initialize:function(a,b,c,d){this._originalSource=b,this._tokens=a,this._context=c,this._functionContext=d,this._pos=0,this._current=this._tokens[0]},_read:function(a){a&&this._current.type!==a&&this._unexpectedToken(a),this._current!==f.tokenType.eof&&(this._current=this._tokens[++this._pos])},_peek:function(a){return a&&this._current.type!==a?void 0:this._current!==f.tokenType.eof?this._tokens[this._pos+1]:void 0},_readAccessExpression:function(a){switch(this._current.type){case f.tokenType.dot:switch(this._read(),this._current.type){case f.tokenType.identifier:case this._current.keyword&&this._current.type:a.push(this._current.value),this._read();break;default:this._unexpectedToken(f.tokenType.identifier,f.tokenType.reservedWord)}return;case f.tokenType.leftBracket:return this._read(),a.push(this._evaluateValue()),void this._read(f.tokenType.rightBracket)}},_readAccessExpressions:function(a){for(;;)switch(this._current.type){case f.tokenType.dot:case f.tokenType.leftBracket:this._readAccessExpression(a);break;default:return}},_readIdentifier:function(){var a=this._current.value;return this._read(f.tokenType.identifier),a},_readIdentifierExpression:function(){var a=[];switch(this._peek(f.tokenType.thisKeyword)&&0===a.length?this._read():a.push(this._readIdentifier()),this._current.type){case f.tokenType.dot:case f.tokenType.leftBracket:this._readAccessExpressions(a)}return a},_unexpectedToken:function(a){var b=this._current.type===f.tokenType.error?"'"+this._current.value+"'":d(this._current.type);if(a)if(1==arguments.length)a=d(a),this._error(WinJS.Resources._formatString(e.unexpectedTokenExpectedToken,b,a,this._currentOffset()));else{for(var c=[],g=0,h=arguments.length;h>g;g++)c.push(d(arguments[g]));a=c.join(", "),this._error(WinJS.Resources._formatString(e.unexpectedTokenExpectedTokens,b,a,this._currentOffset()))}else this._error(WinJS.Resources._formatString(e.unexpectedTokenGeneric,b,this._currentOffset()))}},{supportedForProcessing:!1})}),OptionsInterpreter:WinJS.Namespace._lazy(function(){return WinJS.Class.derive(h.BaseInterpreter,function(a,b,c,d){this._initialize(a,b,c,d)},{_error:function(a){throw new WinJS.ErrorFromName("WinJS.UI.ParseError",WinJS.Resources._formatString(e.invalidOptionsRecord,this._originalSource,a))},_evaluateArrayLiteral:function(){var a=[];return this._read(f.tokenType.leftBracket),this._readArrayElements(a),this._read(f.tokenType.rightBracket),a},_evaluateObjectLiteral:function(){var a={};return this._read(f.tokenType.leftBrace),this._readObjectProperties(a),this._tryReadComma(),this._read(f.tokenType.rightBrace),a},_evaluateOptionsLiteral:function(){var a=this._evaluateValue();return this._current.type!==f.tokenType.eof&&this._unexpectedToken(f.tokenType.eof),a},_peekValue:function(){switch(this._current.type){case f.tokenType.falseLiteral:case f.tokenType.nullLiteral:case f.tokenType.stringLiteral:case f.tokenType.trueLiteral:case f.tokenType.numberLiteral:case f.tokenType.leftBrace:case f.tokenType.leftBracket:case f.tokenType.identifier:return!0;default:return!1}},_evaluateValue:function(){switch(this._current.type){case f.tokenType.falseLiteral:case f.tokenType.nullLiteral:case f.tokenType.stringLiteral:case f.tokenType.trueLiteral:case f.tokenType.numberLiteral:var a=this._current.value;return this._read(),a;case f.tokenType.leftBrace:return this._evaluateObjectLiteral();case f.tokenType.leftBracket:return this._evaluateArrayLiteral();case f.tokenType.identifier:return g(this._peek(f.tokenType.identifier).type==f.tokenType.leftParentheses?this._evaluateObjectQueryExpression():this._evaluateIdentifierExpression());default:this._unexpectedToken(f.tokenType.falseLiteral,f.tokenType.nullLiteral,f.tokenType.stringLiteral,f.tokenType.trueLiteral,f.tokenType.numberLiteral,f.tokenType.leftBrace,f.tokenType.leftBracket,f.tokenType.identifier)}},_tryReadElement:function(a){return this._peekValue()?(a.push(this._evaluateValue()),!0):!1},_tryReadComma:function(){return this._peek(f.tokenType.comma)?(this._read(),!0):!1},_tryReadElision:function(a){for(var c=!1;this._tryReadComma();)a.push(b),c=!0;return c},_readArrayElements:function(a){for(;!this._peek(f.tokenType.rightBracket);){var b=this._tryReadElision(a),c=this._tryReadElement(a),d=this._peek(f.tokenType.comma);if(!c||!d){if(c||b)break;this._unexpectedToken(f.tokenType.falseLiteral,f.tokenType.nullLiteral,f.tokenType.stringLiteral,f.tokenType.trueLiteral,f.tokenType.numberLiteral,f.tokenType.leftBrace,f.tokenType.leftBracket,f.tokenType.identifier);break}this._read()}},_readObjectProperties:function(a){for(;!this._peek(f.tokenType.rightBrace);){var b=this._tryReadObjectProperty(a),c=this._peek(f.tokenType.comma);if(!b||!c){if(b)break;this._unexpectedToken(f.tokenType.numberLiteral,f.tokenType.stringLiteral,f.tokenType.identifier);break}this._read()}},_tryReadObjectProperty:function(a){switch(this._current.type){case f.tokenType.numberLiteral:case f.tokenType.stringLiteral:case f.tokenType.identifier:case this._current.keyword&&this._current.type:var b=this._current.value;return this._read(),this._read(f.tokenType.colon),a[b]=this._evaluateValue(),!0;default:return!1}},_failReadObjectProperty:function(){this._unexpectedToken(f.tokenType.numberLiteral,f.tokenType.stringLiteral,f.tokenType.identifier,f.tokenType.reservedWord)},_evaluateObjectQueryExpression:function(){var a=this._current.value;this._read(f.tokenType.identifier),this._read(f.tokenType.leftParentheses);var b=this._current.value;this._read(f.tokenType.stringLiteral),this._read(f.tokenType.rightParentheses);var c=g(this._functionContext[a])(b);switch(this._current.type){case f.tokenType.dot:case f.tokenType.leftBracket:return this._evaluateAccessExpressions(c);default:return c}},run:function(){return this._evaluateOptionsLiteral()}},{supportedForProcessing:!1})}),OptionsParser:WinJS.Namespace._lazy(function(){return WinJS.Class.derive(h.OptionsInterpreter,function(a,b){this._initialize(a,b)},{_evaluateAccessExpression:c,_evaluateAccessExpressions:c,_evaluateIdentifier:c,_evaluateIdentifierExpression:c,_evaluateObjectQueryExpression:c,_evaluateValue:function(){switch(this._current.type){case f.tokenType.falseLiteral:case f.tokenType.nullLiteral:case f.tokenType.stringLiteral:case f.tokenType.trueLiteral:case f.tokenType.numberLiteral:var a=this._current.value;return this._read(),a;case f.tokenType.leftBrace:return this._evaluateObjectLiteral();case f.tokenType.leftBracket:return this._evaluateArrayLiteral();case f.tokenType.identifier:return this._peek(f.tokenType.identifier).type==f.tokenType.leftParentheses?this._readObjectQueryExpression():this._readIdentifierExpression();default:this._unexpectedToken(f.tokenType.falseLiteral,f.tokenType.nullLiteral,f.tokenType.stringLiteral,f.tokenType.trueLiteral,f.tokenType.numberLiteral,f.tokenType.leftBrace,f.tokenType.leftBracket,f.tokenType.identifier)}},_readIdentifierExpression:function(){var a=h.BaseInterpreter.prototype._readIdentifierExpression.call(this);return new l(a)},_readObjectQueryExpression:function(){var a=this._current.value;this._read(f.tokenType.identifier),this._read(f.tokenType.leftParentheses);var b=this._current.value;this._read(f.tokenType.stringLiteral),this._read(f.tokenType.rightParentheses);var c=new k(a,b);switch(this._current.type){case f.tokenType.dot:case f.tokenType.leftBracket:var d=[c];return this._readAccessExpressions(d),new l(d);default:return c}}},{supportedForProcessing:!1})})}),i=function(a,b,c){var d=f.lexer(a),e=new h.OptionsInterpreter(d,a,b||{},c||{});return e.run()};Object.defineProperty(i,"_BaseInterpreter",{get:function(){return h.BaseInterpreter}});var j=function(a){var b=f.lexer(a),c=new h.OptionsParser(b,a);return c.run()},k=WinJS.Class.define(function(a,b){this.target=a,this.arg0Value=b});k.supportedForProcessing=!1;var l=WinJS.Class.define(function(a){this.parts=a});l.supportedForProcessing=!1,WinJS.Namespace.define("WinJS.UI",{optionsParser:i,_optionsParser:j,_CallExpression:k,_IdentifierExpression:l})}(this),function(a,b){"use strict";function c(a,b,c){var d=document.createEvent("UIEvent");d.initUIEvent(b,!1,!1,window,c?1:0),a.dispatchEvent(d)}function d(a,d,e,f){var g=e.contains(document.activeElement)||a.sync;g||(a.sync=!0,b.Utilities._yieldForEvents(function(){a.sync=!1})),c(e,g?"onTabExit":"onTabEnter",!g&&f||g&&!f),d.stopPropagation(),d.preventDefault()}function e(a){return d(this,a,a.target.nextSibling,!0)}function f(a){return d(this,a,a.target.previousSibling,!1)}function g(a,b){function c(a){var c=document.createElement("DIV");return c.tabIndex=b?b:0,c.addEventListener("beforeactivate",a),c.setAttribute("aria-hidden",!0),c}var d=a.parentNode,g=c(e.bind(this));d.insertBefore(g,a);var h=c(f.bind(this));d.insertBefore(h,a.nextSibling);var i=1;this.addRef=function(){i++},this.release=function(){return 0===--i&&(g.parentElement&&d.removeChild(g),h.parentElement&&d.removeChild(h)),i},this.updateTabIndex=function(a){g.tabIndex=a,h.tabIndex=a}}a.document&&(b.Namespace.define("WinJS.UI.TrackTabBehavior",{attach:function(a,b){return a["win-trackTabHelperObject"]?a["win-trackTabHelperObject"].addRef():a["win-trackTabHelperObject"]=new g(a,b),a["win-trackTabHelperObject"]},detach:function(a){a["win-trackTabHelperObject"].release()||delete a["win-trackTabHelperObject"]}}),b.Namespace.define("WinJS.UI",{TabContainer:b.Class.define(function(a){this._element=a,this._tabIndex=0;var c=this;this._tabExitHandler=function(){c._canFocus(!1)},a.addEventListener("onTabEnter",function(){c.childFocus?c.childFocus.focus():c._canFocus(!1)}),a.addEventListener("onTabExit",function(){c._canFocus(!0)}),this._elementTabHelper=b.UI.TrackTabBehavior.attach(a,this._tabIndex)},{dispose:function(){b.UI.TrackTabBehavior.detach(this._element,this._tabIndex)},childFocus:{set:function(a){a!=this._focusElement&&(this._focusElement&&(b.UI.TrackTabBehavior.detach(this._focusElement),this._childTabHelper=null,this._focusElement.removeEventListener("onTabExit",this._tabExitHandler)),a&&a.parentNode?(this._focusElement=a,this._childTabHelper=b.UI.TrackTabBehavior.attach(a,this._tabIndex),this._focusElement.addEventListener("onTabExit",this._tabExitHandler)):this._focusElement=null)},get:function(){return this._focusElement}},tabIndex:{set:function(a){this._tabIndex=a,this._elementTabHelper.updateTabIndex(a),this._childTabHelper&&this._childTabHelper.updateTabIndex(a)},get:function(){return this._tabIndex}},_element:null,_skipper:function(a){a.stopPropagation(),a.preventDefault()},_canFocus:function(a){a?this._element.removeEventListener("beforeactivate",this._skipper):this._element.addEventListener("beforeactivate",this._skipper)},_focusElement:null},{supportedForProcessing:!1})}))}(this,WinJS),function(a,b){"use strict";function c(a){return a instanceof Array||a instanceof NodeList||a instanceof HTMLCollection?a:a?[a]:[]}function d(){return++x,"WinJSUIAnimation"+x}function e(a){return"WinJSUIAnimation"===a.substring(0,16)}function f(a){window.getComputedStyle(a,null).opacity}function g(a,b){return function(c){var d={};for(var e in c){var f=c[e];"function"==typeof f&&(f=f(a,b)),d[e]=f}return d.exactTiming||(d.delay+=F._libraryDelay),d}}function h(a,b){var c=a+"|"+b,d=y[c];d&&d(z)}function i(a,b,c){y[a+"|"+b]=c}function j(a,b){delete y[a+"|"+b]}function k(a,b,c,d,e){var g=e.styleCaches[b]||new B(b,e,c);g.cref+=d.length,d.forEach(function(a){h(b,a.property)}),(e.isTransition||d.some(function(a){return g.removed[a[e.nameField]]}))&&(f(a),g.removed={});var i=d.map(function(a){return a[e.nameField]+" "+e.props.map(function(b){return(b[1]?a[b[1]]:"")+b[2]}).join(" ")}).join(", "),j=d.map(function(a){return a[e.nameField]}).join(", ");return""!==g.names&&(i=g.names+", "+i,j=g.names+", "+j),c[e.shorthandProp]=i,g.names=j,g}function l(a,b){b?a():v.schedule(function(){a()},v.Priority.normal,null,"WinJS.UI._Animation._completeAnimationPromise")}function m(a,c,d,e,f){if(d.length>0){var h=a.style,m=b.Utilities._uniqueID(a);if(t||(t=document.createElement("DIV").style),d=d.map(g(c,a)),d.forEach(function(a){var c=b.Utilities._getCamelCasedName(a.property);a.hasOwnProperty("from")&&(h[c]=a.from),t[c]=a.to,a.to=t[c],a.propertyScriptName=c}),f){var n=k(a,m,h,d,C),o=a.disabled?document:a;d.forEach(function(c){var d;e.push(new b.Promise(function(e){d=function(d){f&&(o.removeEventListener(b.Utilities._browserEventEquivalents.transitionEnd,f,!1),j(m,c.property),n.removeName(h,c.propertyScriptName,d?a:null,c.skipStylesReset),clearTimeout(k),f=null),l(e,d===A)};var f=function(b){b.target===a&&b.propertyName===c.property&&d()};i(m,c.property,d),o.addEventListener(b.Utilities._browserEventEquivalents.transitionEnd,f,!1);var g=0;h[c.propertyScriptName]!==c.to&&(h[c.propertyScriptName]=c.to,g=50);var k=setTimeout(function(){k=setTimeout(d,c.delay+c.duration)},g)},function(){d(A)}))})}else d.forEach(function(a){h[a.propertyScriptName]=a.to})}}function n(a,c,e,f,h){if(h&&e.length>0){var m=a.style,n=b.Utilities._uniqueID(a);e=e.map(g(c,a));var o,p=a.disabled?document:a;e.forEach(function(a){if(a.keyframe)a.keyframe=w.animationPrefix+a.keyframe;else{o||(o=document.createElement("STYLE"),document.documentElement.appendChild(o)),a.keyframe=d();var b="@"+w.keyframes+" "+a.keyframe+" { from {"+a.property+":"+a.from+";} to {"+a.property+":"+a.to+";}}";o.sheet.insertRule(b,0)}});var q=k(a,n,m,e,D);e.forEach(function(c){var d;f.push(new b.Promise(function(e){d=function(a){f&&(p.removeEventListener(b.Utilities._browserEventEquivalents.animationEnd,f,!1),j(n,c.property),q.removeName(m,c.keyframe),clearTimeout(g),f=null),l(e,a===A)};var f=function(b){b.target===a&&b.animationName===c.keyframe&&d()};i(n,c.property,d);var g=setTimeout(function(){g=setTimeout(d,c.delay+c.duration)},50);p.addEventListener(b.Utilities._browserEventEquivalents.animationEnd,f,!1)},function(){d(A)}))}),o&&setTimeout(function(){var a=o.parentElement;a&&a.removeChild(o)},50)}}function o(){u||(u=b.Utilities.hasWinRT?new Windows.UI.ViewManagement.UISettings:{animationsEnabled:!0})}function p(){return o(),E+u.animationsEnabled>0}function q(a,d,e){try{for(var f=b.UI.isAnimationEnabled(),g=c(a),h=c(d),i=[],j=0;j<g.length;j++)if(g[j]instanceof Array)for(var k=0;k<g[j].length;k++)e(g[j][k],j,h,i,f);else e(g[j],j,h,i,f);return i.length?b.Promise.join(i):v.schedulePromiseNormal(null,"WinJS.UI._Animation._completeActionPromise").then(null,function(){})}catch(l){return b.Promise.wrapError(l)}}function r(a){return Array.isArray(a)?a.map(function(a){return r(a)}):a?(a.delay=b.UI._animationTimeAdjustment(a.delay),a.duration=b.UI._animationTimeAdjustment(a.duration),a):void 0}function s(a){return b.Utilities._fastAnimations?r(a):a}if(a.document)var t,u,v=b.Utilities.Scheduler,w=b.Utilities._browserStyleEquivalents,x=0,y=[],z=1,A=2,B=b.Class.define(function(a,b,c){this.cref=0,this.id=a,this.desc=b,this.removed={},this.prevStyles=b.props.map(function(a){return c[a[0]]}),this.prevNames=this.names=c[b.nameProp],b.styleCaches[a]=this},{destroy:function(a,b){var c=this.desc;delete c.styleCaches[this.id],b||(""===this.prevNames&&this.prevStyles.every(function(a){return""===a})?a[c.shorthandProp]="":(c.props.forEach(function(b,c){a[b[0]]=this.prevStyles[c]},this),a[c.nameProp]=this.prevNames))},removeName:function(a,b,c,d){var g=this.names,h=g.split(", "),i=h.lastIndexOf(b);i>=0&&(h.splice(i,1),this.names=g=h.join(", "),""===g&&this.desc.isTransition&&(g="none")),--this.cref?(a[this.desc.nameProp]=g,e(b)||(this.removed[b]=!0)):(c&&"none"===g&&(a[this.desc.nameProp]=g,f(c)),this.destroy(a,d))}}),C={shorthandProp:w.transition.scriptName,nameProp:w["transition-property"].scriptName,nameField:"property",props:[[w["transition-duration"].scriptName,"duration","ms"],[w["transition-timing-function"].scriptName,"timing",""],[w["transition-delay"].scriptName,"delay","ms"]],isTransition:!0,styleCaches:[]},D={shorthandProp:w.animation.scriptName,nameProp:w["animation-name"].scriptName,nameField:"keyframe",props:[[w["animation-duration"].scriptName,"duration","ms"],[w["animation-timing-function"].scriptName,"timing",""],[w["animation-delay"].scriptName,"delay","ms"],[w["animation-iteration-count"].scriptName,"","1"],[w["animation-direction"].scriptName,"","normal"],[w["animation-fill-mode"].scriptName,"","both"]],isTransition:!1,styleCaches:[]},E=0,F=b.Namespace.define("WinJS.UI",{disableAnimations:function(){E--},enableAnimations:function(){E++},isAnimationEnabled:p,_libraryDelay:0,executeAnimation:function(a,b){return q(a,s(b),n)},executeTransition:function(a,b){return q(a,s(b),m)},_animationTimeAdjustment:function(a){return b.Utilities._fastAnimations?a/20:a}})}(this,WinJS),function(){"use strict";var a=WinJS.Utilities.markSupportedForProcessing;WinJS.Namespace.define("WinJS.UI",{eventHandler:function(b){return a(b)},Orientation:{horizontal:"horizontal",vertical:"vertical"}}),WinJS.Namespace.define("WinJS.Utilities",{_clamp:function(a,b,c,d){var e=Math.max(b,Math.min(c,+a));return 0===e?0:e||Math.max(b,Math.min(c,d))},_deprecated:function(a){console.warn(a)}}),WinJS.Namespace.define("WinJS.Utilities",{_syncRenderer:function(a,b){if(b=b||"div","function"==typeof a)return function(b,c){return c?(c.appendChild(a(b)),c):a(b)};var c;return"function"==typeof a.render?c=a:a.winControl&&"function"==typeof a.winControl.render&&(c=a.winControl),function(a,d){var e=d||document.createElement(b);if(c.render(a,e),d)return d;var f=e.firstElementChild;if(f&&e.dispose){var g=f.dispose;f.dispose=function(){f.dispose=g,e.appendChild(f),e.dispose()}}return f}},_getLowestTabIndexInList:function(a){for(var b,c=0,d=0;d<a.length;d++)b=parseInt(a[d].getAttribute("tabIndex"),10),b>0&&(c>b||!c)&&(c=b);return c},_getHighestTabIndexInList:function(a){for(var b,c=0,d=0;d<a.length;d++){if(b=parseInt(a[d].getAttribute("tabIndex"),10),0===b)return b;b>c&&(c=b)}return c},_trySetActive:function(a){return this._tryFocus(a,!0)},_tryFocus:function(a,b){var c=document.activeElement;if(a===c)return!0;var d=a.tabIndex>=0&&("A"===a.nodeName&&a.href||"LINK"===a.nodeName&&a.href||"BUTTON"===a.nodeName||"INPUT"===a.nodeName&&"hidden"!==a.type||"SELECT"===a.nodeName||"TEXTAREA"===a.nodeName||"MENUITEM"===a.nodeName||"TH"===a.nodeName&&a.sorted||a.draggable||null!==a.getAttribute("tabindex"));return d?(b?WinJS.Utilities._setActive(a):a.focus(),c!==document.activeElement?!0:!1):!1},_setActiveFirstFocusableElement:function(a){return this._focusFirstFocusableElement(a,!0)},_focusFirstFocusableElement:function(a,b){for(var c=a.getElementsByTagName("*"),d=this._getLowestTabIndexInList(c),e=0;d;){for(var f=0;f<c.length;f++)if(c[f].tabIndex===d){if(this._tryFocus(c[f],b))return!0}else d<c[f].tabIndex&&(c[f].tabIndex<e||0===e)&&(e=c[f].tabIndex);d=e,e=0}for(f=0;f<c.length;f++)if(this._tryFocus(c[f],b))return!0;return!1},_setActiveLastFocusableElement:function(a){return this._focusLastFocusableElement(a,!0)},_focusLastFocusableElement:function(a,b){{var c=a.getElementsByTagName("*"),d=this._getHighestTabIndexInList(c),e=0;document.activeElement}if(0===d){for(var f=c.length-1;f>=0;f--)if(c[f].tabIndex===d){if(this._tryFocus(c[f],b))return!0}else e<c[f].tabIndex&&(e=c[f].tabIndex);d=e,e=0}for(;d;){for(f=c.length-1;f>=0;f--)if(c[f].tabIndex===d){if(this._tryFocus(c[f],b))return!0}else e<c[f].tabIndex&&c[f].tabIndex<d&&(e=c[f].tabIndex);d=e,e=0}for(f=c.length-2;f>0;f--)if(this._tryFocus(c[f],b))return!0;return!1}})}(this),function(a,b,c){"use strict";function d(a){var b;try{b=JSON.stringify(a)}catch(c){b=JSON.stringify("[object]")}return b}function e(a){var b="def"+R++;return{deferral:Q[b]=a.getDeferral(),id:b}}function f(a,b){b&&(a=Q[b],delete Q[b]),a&&a.complete()}function g(){Q&&(Object.keys(Q).forEach(function(a){Q[a].complete()}),Q={})}function h(a){function c(c){return b.Utilities._writeProfilerMark("WinJS.Application:Event_"+a.type+",StopTM"),a._deferral&&f(a._deferral,a._deferralID),c}b.Utilities._writeProfilerMark("WinJS.Application:Event_"+a.type+",StartTM");var d=b.Promise.as();a.setPromise=function(a){d=d.then(function(){return a})},a.detail=a.detail||{},"object"==typeof a.detail&&(a.detail.setPromise=a.setPromise);try{if(P._listeners){var e=!1;g=P._listeners[a.type],g&&g.forEach(function(b){e=b.listener(a)||e})}var g=T[a.type];g&&g.forEach(function(b){b(a,e)})}catch(h){m({type:F,detail:h})}return d.then(c,function(a){return a=c(a),a&&"Canceled"===a.name?void 0:b.Promise.wrapError(a)})}function i(){return K||(K=new b._Signal,K.promise.done(function(){K=null},function(){K=null})),K}function j(a){function b(a){m({type:F,detail:a})}return 0===a.length?i().promise:h(a.shift()).then(null,b)}function k(a){function b(){return k}var c=a.job._queue;0===c.length&&I.length>0&&(c=a.job._queue=n()),a.setPromise(j(c).then(b,b))}function l(){function a(){d=!0}for(var b,c=[],d=!0;d;)0===c.length&&I.length>0&&(c=n()),d=!1,b=j(c),b.done(a,a);J=z.schedule(function(a){function c(){return k}a.setPromise(b.then(c,c))},z.Priority.high,null,"WinJS.Application._pumpEventQueue"),J._queue=c}function m(a){b.Utilities._writeProfilerMark("WinJS.Application:Event_"+a.type+" queued,Info"),I.push(a),L&&K&&K.complete(k)}function n(){var a=I;return I=[],a}function o(a){var c=e(a.activatedOperation);b.Application._loadState(a).then(function(){m({type:C,detail:a,_deferral:c.deferral,_deferralID:c.id})})}function p(a){var c=e(a.suspendingOperation);b.Application.queueEvent({type:A,_deferral:c.deferral,_deferralID:c.id})}function q(){if(m({type:D}),!N){var a={arguments:"",kind:"Windows.Launch",previousExecutionState:0};b.Application._loadState(a).then(function(){m({type:C,detail:a})})}}function r(){g(),m({type:B})}function s(a){var c={};for(var d in a)c[d]=a[d];var e,f=!0,g=b.Application._terminateApp;try{b.Application._terminateApp=function(a,b){f=!1,e=a,g!==S&&g(a,b)},h({type:F,detail:{error:c,errorLine:a.lineno,errorCharacter:a.colno,errorUrl:a.filename,errorMessage:a.message}})}finally{b.Application._terminateApp=g}return f}function t(a){var b=a.detail,c=b.id;if(b.parent)return void(b.handler&&y&&delete y[c]);var d=!y;y=y||[],y[c]=b,d&&z.schedule(function(){var a=y;y=null,a.forEach(function(a){m({type:F,detail:a})})},z.Priority.high,null,"WinJS.Application._queuePromiseErrors")}function u(a){var b={e:a,applicationcommands:c};P.dispatchEvent(G,b)}function v(a){var b={type:H};Object.defineProperty(b,"_winRTBackPressedEvent",{value:a,enumerable:!1}),h(b)}function w(){if(!M){if(M=!0,a.addEventListener("beforeunload",r,!1),N){a.addEventListener("error",s,!1);var c=Windows.UI.WebUI.WebUIApplication;if(c.addEventListener("activated",o,!1),c.addEventListener("suspending",p,!1),window.Windows&&Windows.UI&&Windows.UI.ApplicationSettings&&Windows.UI.ApplicationSettings.SettingsPane&&Windows.UI.ApplicationSettings.SettingsPane.getForCurrentView){var d=Windows.UI.ApplicationSettings.SettingsPane.getForCurrentView();
d.addEventListener("commandsrequested",u)}window.Windows&&Windows.Phone&&Windows.Phone.UI.Input.HardwareButtons&&Windows.Phone.UI.Input.HardwareButtons.addEventListener("backpressed",v)}b.Promise.addEventListener("error",t)}}function x(){if(M){if(M=!1,a.removeEventListener("beforeunload",r,!1),N){a.removeEventListener("error",s,!1);var c=Windows.UI.WebUI.WebUIApplication;if(c.removeEventListener("activated",o,!1),c.removeEventListener("suspending",p,!1),window.Windows&&Windows.UI&&Windows.UI.ApplicationSettings&&Windows.UI.ApplicationSettings.SettingsPane&&Windows.UI.ApplicationSettings.SettingsPane.getForCurrentView){var d=Windows.UI.ApplicationSettings.SettingsPane.getForCurrentView();d.removeEventListener("commandsrequested",u)}window.Windows&&Windows.Phone&&Windows.Phone.UI.Input.HardwareButtons&&Windows.Phone.UI.Input.HardwareButtons.removeEventListener("backpressed",v)}b.Promise.removeEventListener("error",t)}}a.Debug&&(a.Debug.setNonUserCodeExceptions=!0);var y,z=b.Utilities.Scheduler,A="checkpoint",B="unload",C="activated",D="loaded",E="ready",F="error",G="settings",H="backclick",I=[],J=null,K=null,L=!1,M=!1,N=b.Utilities.hasWinRT&&a.document,O=b.Class.mix(b.Class.define(null,{},{supportedForProcessing:!1}),b.Utilities.eventMixin),P=new O,Q={},R=0,S=function(a){MSApp.terminateApp(a)},T={activated:[function(){m({type:E})}],checkpoint:[function(a){b.Application._oncheckpoint(a)}],error:[function(a,c){if(!c&&(b.log&&b.log(d(a),"winjs","error"),N&&b.Application._terminateApp)){var e=a.detail,f=e&&(e.number||e.exception&&(e.exception.number||e.exception.code)||e.error&&e.error.number||e.errorCode||0),g={description:d(e),stack:e&&(e.stack||e.exception&&(e.exception.stack||e.exception.message)||e.error&&e.error.stack||null),errorNumber:f,number:f};b.Application._terminateApp(g,a)}}],backclick:[function(a,c){c?a._winRTBackPressedEvent.handled=!0:b.Navigation.canGoBack&&(b.Navigation.back(),a._winRTBackPressedEvent.handled=!0)}]};a.document&&document.addEventListener("DOMContentLoaded",q,!1),b.Namespace.define("WinJS.Application",{stop:function(){this.onactivated=null,this.oncheckpoint=null,this.onerror=null,this.onloaded=null,this.onready=null,this.onsettings=null,this.onunload=null,P=new O,b.Application.sessionState={},L=!1,n(),J&&J.cancel(),J=null,K=null,x(),g()},addEventListener:function(a,b,c){P.addEventListener(a,b,c)},removeEventListener:function(a,b,c){P.removeEventListener(a,b,c)},checkpoint:function(){m({type:A})},start:function(){w(),L=!0,l()},queueEvent:m,_terminateApp:S}),Object.defineProperties(b.Application,b.Utilities.createEventProperties(A,B,C,D,E,G,F,H))}(this,WinJS),function(a,b){"use strict";var c="navigated",d="navigating",e="beforenavigate",f=a.Class.mix(a.Class.define(null,{},{supportedForProcessing:!1}),a.Utilities.eventMixin),g=new f,h={backStack:[],current:{location:"",initialPlaceholder:!0},forwardStack:[]},i=function(b){return a.Utilities._writeProfilerMark("WinJS.Navigation:navigation,StartTM"),a.Promise.as().then(function(){var c=a.Promise.as(),d=g.dispatchEvent(e,{setPromise:function(a){c=c.then(function(){return a})},location:b.location,state:b.state});return c.then(function(a){return d||a})})},j=function(b){return a.Promise.as().then(function(){var c=a.Promise.as();return g.dispatchEvent(d,{setPromise:function(a){c=c.then(function(){return a})},location:h.current.location,state:h.current.state,delta:b}),c})},k=function(b,d){a.Utilities._writeProfilerMark("WinJS.Navigation:navigation,StopTM");var e=a.Promise.as(),f={value:b,location:h.current.location,state:h.current.state,setPromise:function(a){e=e.then(function(){return a})}};return!b&&d&&(f.error=d),g.dispatchEvent(c,f),e},l=function(c,d,e,f){return c=Math.min(c,d.length),c>0?i(d[d.length-c]).then(function(a){if(a)return!1;for(e.push(h.current);c-1>0;)c--,e.push(d.pop());return h.current=d.pop(),j(f).then(k,function(a){throw k(b,a||!0),a}).then(function(){return!0})}):a.Promise.wrap(!1)};a.Namespace.define("WinJS.Navigation",{canGoForward:{get:function(){return h.forwardStack.length>0}},canGoBack:{get:function(){return h.backStack.length>0}},location:{get:function(){return h.current.location}},state:{get:function(){return h.current.state},set:function(a){h.current.state=a}},history:{get:function(){return h},set:function(a){var b=h=a;b.backStack=b.backStack||[],b.forwardStack=b.forwardStack||[],b.current=b.current||{location:"",initialPlaceholder:!0},b.current.location=b.current.location||""}},forward:function(a){return a=a||1,l(a,h.forwardStack,h.backStack,a)},back:function(a){return a=a||1,l(a,h.backStack,h.forwardStack,-a)},navigate:function(a,c){var d={location:a,state:c};return i(d).then(function(a){return a?!1:(h.current.initialPlaceholder||h.backStack.push(h.current),h.forwardStack=[],h.current=d,j().then(k,function(a){throw k(b,a||!0),a}).then(function(){return!0}))})},addEventListener:function(a,b,c){g.addEventListener(a,b,c)},removeEventListener:function(a,b,c){g.removeEventListener(a,b,c)}}),Object.defineProperties(a.Navigation,a.Utilities.createEventProperties(c,d,e))}(WinJS),function(a){"use strict";function b(){var a,b,c,d=WinJS.Class.define(function(a){this.folder=a,this._path=a.path,a.tryGetItemAsync&&(this._tryGetItemAsync=a.tryGetItemAsync.bind(a))},{_tryGetItemAsync:function(a){return this.folder.getFileAsync(a).then(null,function(){return!1})},exists:function(a){return this._tryGetItemAsync(a).then(function(a){return a?!0:!1})},remove:function(a){return this._tryGetItemAsync(a).then(function(a){return a?a.deleteAsync():!1}).then(null,function(){return!1})},writeText:function(a,b){var c=Windows.Storage,d=this;return d.folder.createFileAsync(a,c.CreationCollisionOption.openIfExists).then(function(a){return c.FileIO?c.FileIO.writeTextAsync(a,b):c.StorageHelpers.writeAllTextUsingFileAsync(a,b)})},readText:function(a,b){var c=Windows.Storage;return this._tryGetItemAsync(a).then(function(a){return a?c.FileIO.readTextAsync(a):b}).then(null,function(){return b})}},{supportedForProcessing:!1});WinJS.Namespace.define("WinJS.Application",{local:{get:function(){return a||(a=new d(Windows.Storage.ApplicationData.current.localFolder)),a}},temp:{get:function(){return b||(b=new d(Windows.Storage.ApplicationData.current.temporaryFolder)),b}},roaming:{get:function(){return c||(c=new d(Windows.Storage.ApplicationData.current.roamingFolder)),c}}})}function c(){var a=WinJS.Class.define(function(){this.storage={}},{exists:function(a){return WinJS.Promise.as(void 0!==this.storage[a])},remove:function(a){return delete this.storage[a],WinJS.Promise.as()},writeText:function(a,b){return this.storage[a]=b,WinJS.Promise.as(b.length)},readText:function(a,b){var c=this.storage[a];return WinJS.Promise.as("string"==typeof c?c:b)}},{supportedForProcessing:!1});WinJS.Namespace.define("WinJS.Application",{local:new a,temp:new a,roaming:new a})}WinJS.Utilities.hasWinRT?b():c(),WinJS.Namespace.define("WinJS.Application",{sessionState:{},_loadState:function(a){var b=WinJS.Application;return 3===a.previousExecutionState?b.local.readText("_sessionState.json","{}").then(function(a){var c=JSON.parse(a);c&&Object.keys(c).length>0&&(b._sessionStateLoaded=!0),b.sessionState=c}).then(null,function(){b.sessionState={}}):WinJS.Promise.as()},_oncheckpoint:function(b){if(!(a.MSApp&&MSApp.getViewOpener&&MSApp.getViewOpener())){var c=WinJS.Application,d=c.sessionState;if(d&&Object.keys(d).length>0||c._sessionStateLoaded){var e;try{e=JSON.stringify(d)}catch(b){e="",WinJS.Application.queueEvent({type:"error",detail:b})}b.setPromise(c.local.writeText("_sessionState.json",e).then(null,function(a){c.queueEvent({type:"error",detail:a})}))}}}})}(this),function(){"use strict";function a(a,b){WinJS.Utilities._writeProfilerMark("WinJS.Binding:bindingParser,StartTM");var c=d.lexer(a),e=new f.BindingInterpreter(c,a,b||{}),g=e.run();return WinJS.Utilities._writeProfilerMark("WinJS.Binding:bindingParser,StopTM"),g}function b(a){WinJS.Utilities._writeProfilerMark("WinJS.Binding:bindingParser,StartTM");var b=d.lexer(a),c=new f.BindingParser(b,a),e=c.run();return WinJS.Utilities._writeProfilerMark("WinJS.Binding:bindingParser,StopTM"),e}var c={get invalidBinding(){return WinJS.Resources._getWinJSString("base/invalidBinding").value},get bindingInitializerNotFound(){return WinJS.Resources._getWinJSString("base/bindingInitializerNotFound").value}},d=WinJS.Namespace.defineWithParent(null,null,{lexer:WinJS.Namespace._lazy("WinJS.UI._optionsLexer"),tokenType:WinJS.Namespace._lazy("WinJS.UI._optionsLexer.tokenType")}),e=WinJS.Utilities.requireSupportedForProcessing,f=WinJS.Namespace.defineWithParent(null,null,{BindingInterpreter:WinJS.Namespace._lazy(function(){return WinJS.Class.derive(WinJS.UI.optionsParser._BaseInterpreter,function(a,b,c){this._initialize(a,b,c)},{_error:function(a){throw new WinJS.ErrorFromName("WinJS.Binding.ParseError",WinJS.Resources._formatString(c.invalidBinding,this._originalSource,a))},_evaluateInitializerName:function(){if(this._current.type===d.tokenType.identifier){var a=this._evaluateIdentifierExpression();return WinJS.log&&!a&&WinJS.log(WinJS.Resources._formatString(c.bindingInitializerNotFound,this._originalSource),"winjs binding","error"),e(a)}},_evaluateValue:function(){switch(this._current.type){case d.tokenType.stringLiteral:case d.tokenType.numberLiteral:var a=this._current.value;return this._read(),a;default:return void this._unexpectedToken(d.tokenType.stringLiteral,d.tokenType.numberLiteral)}},_readBindDeclarations:function(){for(var a=[];;)switch(this._current.type){case d.tokenType.identifier:case d.tokenType.thisKeyword:a.push(this._readBindDeclaration());break;case d.tokenType.semicolon:this._read();break;case d.tokenType.eof:return a;default:return void this._unexpectedToken(d.tokenType.identifier,d.tokenType.semicolon,d.tokenType.eof)}},_readBindDeclaration:function(){var a=this._readDestinationPropertyName();this._read(d.tokenType.colon);var b=this._readSourcePropertyName(),c=this._evaluateInitializerName();return{destination:a,source:b,initializer:c}},_readDestinationPropertyName:function(){return this._readIdentifierExpression()},_readSourcePropertyName:function(){return this._readIdentifierExpression()},run:function(){return this._readBindDeclarations()}},{supportedForProcessing:!1})}),BindingParser:WinJS.Namespace._lazy(function(){return WinJS.Class.derive(f.BindingInterpreter,function(a,b){this._initialize(a,b,{})},{_readInitializerName:function(){return this._current.type===d.tokenType.identifier?this._readIdentifierExpression():void 0},_readBindDeclaration:function(){var a=this._readDestinationPropertyName();this._read(d.tokenType.colon);var b=this._readSourcePropertyName(),c=this._readInitializerName();return{destination:a,source:b,initializer:c}}},{supportedForProcessing:!1})})});WinJS.Namespace.define("WinJS.Binding",{_bindingParser:a,_bindingParser2:b})}(this),function(a,b){"use strict";var c={get exceptionFromBindingInitializer(){return a.Resources._getWinJSString("base/exceptionFromBindingInitializer").value},get propertyIsUndefined(){return a.Resources._getWinJSString("base/propertyIsUndefined").value},get unsupportedDataTypeForBinding(){return a.Resources._getWinJSString("base/unsupportedDataTypeForBinding").value}},d={_listeners:null,_pendingNotifications:null,_notifyId:0,_getObservable:function(){return this},_cancel:function(a){var b=this._pendingNotifications,c=!1;if(b)for(var d=Object.keys(b),e=d.length-1;e>=0;e--){var f=b[d[e]];f.target===a&&(f.promise&&(f.promise.cancel(),f.promise=null),delete b[d[e]],c=!0)}return c},notify:function(b,d,e){var f=this._listeners&&this._listeners[b];if(f){var g=this;g._cancel(b),g._pendingNotifications=g._pendingNotifications||{};var h=g._notifyId++,i=g._pendingNotifications[h]={target:b},j=function(){delete g._pendingNotifications[h]};return i.promise=a.Utilities.Scheduler.schedulePromiseNormal(null,"WinJS.Binding.observableMixin.notify").then(function(){for(var b=0,g=f.length;g>b&&i.promise;b++)try{f[b](d,e)}catch(h){a.log&&a.log(a.Resources._formatString(c.exceptionFromBindingInitializer,h.toString()),"winjs binding","error")}return j(),d}),i.promise}return a.Promise.as()},bind:function(a,b){this._listeners=this._listeners||{};for(var c=this._listeners[a]=this._listeners[a]||[],d=!1,e=0,f=c.length;f>e;e++)if(c[e]===b){d=!0;break}return d||(c.push(b),b(o(this[a]))),this},unbind:function(a,b){if(this._listeners=this._listeners||{},a&&b){var c=this._listeners[a];if(c){for(var d,e=0,f=c.length;f>e;e++)c[e]!==b&&(d=d||[]).push(c[e]);this._listeners[a]=d}}else if(a)this._cancel(a),delete this._listeners[a];else{var g=this;if(g._pendingNotifications){var h=g._pendingNotifications;g._pendingNotifications={},Object.keys(h).forEach(function(a){var b=h[a];b.promise&&b.promise.cancel()})}this._listeners={}}return this}},e={_backingData:null,_initObservable:function(a){this._backingData=a||{}},getProperty:function(d){var e=this._backingData[d];return a.log&&e===b&&a.log(a.Resources._formatString(c.propertyIsUndefined,d),"winjs binding","warn"),n(e)},setProperty:function(a,b){return this.updateProperty(a,b),this},addProperty:function(a,b){return this[a]||Object.defineProperty(this,a,{get:function(){return this.getProperty(a)},set:function(b){this.setProperty(a,b)},enumerable:!0,configurable:!0}),this.setProperty(a,b)},updateProperty:function(b,c){var d=this._backingData[b],e=o(c);return d!==e&&(this._backingData[b]=e,this._backingData[b]===e)?this.notify(b,e,d):a.Promise.as()},removeProperty:function(a){var b,c=this._backingData[a];try{delete this._backingData[a]}catch(d){}try{delete this[a]}catch(d){}return this.notify(a,b,c),this}};Object.keys(d).forEach(function(a){e[a]=d[a]});var f=function(a,b){return j(a,b)},g=0,h=function(){return"bindHandler"+g++},i=function(b,c){if(!a.Utilities.hasWinRT)return b;var d=h();return a.Utilities._getWeakRefElement(c)[d]=b,function(b,e){var f=a.Utilities._getWeakRefElement(c);f&&f[d](b,e)}},j=function(c,d,e){function f(){m&&m.forEach(function(a){a.source.unbind(a.prop,a.listener)}),m=null}function g(a){l[a]&&(l[a].complexBind.cancel(),delete l[a])}if(c=a.Binding.as(c),!c)return{cancel:function(){},empty:!0};var k;e||(e=h(),k={},a.Utilities._createWeakRef(k,e));var l={},m=null;return Object.keys(d).forEach(function(a){var f=d[a];if(f instanceof Function)f=i(f,e),f.bindState=k,m=m||[],m.push({source:c,prop:a,listener:f}),c.bind(a,f);else{var h=function(c){g(a);var d=j(n(c),f,e);if(d.empty){var h=function(a){Object.keys(a).forEach(function(c){var d=a[c];d instanceof Function?d(b,b):h(d)})};h(f)}l[a]={source:c,complexBind:d}};h=i(h,e),h.bindState=k,m=m||[],m.push({source:c,prop:a,listener:h}),c.bind(a,h)}}),{cancel:function(){f(),Object.keys(l).forEach(function(a){g(a)})}}},k=a.Class.mix(function(a){this._initObservable(a),Object.defineProperties(this,l(a))},e),l=function(a){function b(a){c[a]={get:function(){return this.getProperty(a)},set:function(b){this.setProperty(a,b)},enumerable:!0,configurable:!0}}for(var c={};a&&a!==Object.prototype;)Object.keys(a).forEach(b),a=Object.getPrototypeOf(a);return c},m=function(b){if(!(!b||"object"!=typeof b||b instanceof Date||b instanceof Array))return a.Class.mix(function(a){this._initObservable(a||Object.create(b))},a.Binding.dynamicObservableMixin,a.Binding.expandProperties(b));if(a.validation)throw new a.ErrorFromName("WinJS.Binding.UnsupportedDataType",a.Resources._formatString(c.unsupportedDataTypeForBinding))},n=function(a){if(!a)return a;var b=typeof a;if("object"!==b||a instanceof Date||a instanceof Array)return a;if(a._getObservable)return a._getObservable();var c=new k(a);return c.backingData=a,Object.defineProperty(a,"_getObservable",{value:function(){return c},enumerable:!1,writable:!1}),c},o=function(a){return a&&a.backingData?a.backingData:a};a.Namespace.define("WinJS.Binding",{mixin:{value:e,enumerable:!1,writable:!0,configurable:!0},dynamicObservableMixin:{value:e,enumerable:!0,writable:!0,configurable:!0},observableMixin:{value:d,enumerable:!0,writable:!0,configurable:!0},expandProperties:l,define:m,as:n,unwrap:o,bind:f})}(WinJS),function(a,b,c){"use strict";if(a.document){{var d=b.Promise,e=d._cancelBlocker;b.Utilities.markSupportedForProcessing}b.Namespace.define("WinJS.Binding",{Template:b.Namespace._lazy(function(){function a(a,c,d){function f(){return b.Utilities.removeClass(h,"win-loading"),b.Utilities._writeProfilerMark("WinJS.Binding:templateRender"+a._profilerMarkIdentifier+",StopTM"),j||h}b.Utilities._writeProfilerMark("WinJS.Binding:templateRender"+a._profilerMarkIdentifier+",StartTM"),1===++a._counter&&(a.debugBreakOnRender||b.Binding.Template._debugBreakOnRender);var g=b.Promise.wrap(),h=d||document.createElement(a.element.tagName);b.Utilities.addClass(h,"win-template"),b.Utilities.addClass(h,"win-loading");var i,j,k=a,l=h.children.length,m=function(){var a=b.Utilities.data(h).winBindings;a&&a.forEach(function(a){a.cancel()}),g.cancel()};a.extractChild?i=b.UI.Fragments.renderCopy(k.href||k.element,document.createElement(k.element.tagName)).then(function(a){var c=a.firstElementChild;return j=c,b.Utilities.markDisposable(c,m),h.appendChild(c),c}):(b.Utilities.markDisposable(h,m),i=b.UI.Fragments.renderCopy(k.href||k.element,h));var n=i.then(function(){function a(){return d(b.UI.processAll).then(function(){return e(c)}).then(function(a){return d(b.Binding.processAll,a,!j&&!l,k.bindingCache)}).then(null,function(a){return"object"==typeof a&&"Canceled"===a.name&&(j||h).dispose(),b.Promise.wrapError(a)})}var d;if(0===l)d=function(a,b,c,d){return a(j||h,b,c,d)};else{var f=h.children;if(f.length===l+1)d=function(a,b,c,d){return a(f[l],b,c,d)};else{for(var i=[],m=l,n=f.length;n>m;m++)i.push(f[m]);d=function(a,c,d,e){var f=[];return i.forEach(function(b){f.push(a(b,c,d,e))}),b.Promise.join(f)}}}for(var o=h.firstElementChild;o;)o.msParentSelectorScope=!0,o=o.nextElementSibling;var p=k.processTimeout;return p?(0>p&&(p=0),b.Promise.timeout(p).then(function(){return g=a()})):g=a()}).then(f,function(a){return f(),b.Promise.wrapError(a)});return{element:i,renderComplete:n}}return b.Class.define(function(a,c){this._element=a||document.createElement("div"),this._element.winControl=this,this._profilerMarkIdentifier=b.Utilities._getProfilerMarkIdentifier(this._element),b.Utilities._writeProfilerMark("WinJS.Binding:newTemplate"+this._profilerMarkIdentifier+",StartTM");var d=this;this._element.renderItem=function(a,b){return d._renderItemImpl(a,b)},c=c||{},this.href=c.href,this.enableRecycling=!!c.enableRecycling,this.processTimeout=c.processTimeout||0,this.bindingInitializer=c.bindingInitializer,this.debugBreakOnRender=c.debugBreakOnRender,this.disableOptimizedProcessing=c.disableOptimizedProcessing,this.extractChild=c.extractChild,this._counter=0,this._compile=!!c._compile,this.href||(this.element.style.display="none"),this.bindingCache={expressions:{}},b.Utilities._writeProfilerMark("WinJS.Binding:newTemplate"+this._profilerMarkIdentifier+",StopTM")},{_shouldCompile:{get:function(){var a=!0;return a=a&&!b.Binding.Template._interpretAll,a=a&&!this.disableOptimizedProcessing,a&&(a=a&&0===this.processTimeout,a=a&&(!this.href||this.href instanceof HTMLElement),a||b.log&&b.log("Cannot compile templates which use processTimeout or href properties","winjs binding","warn")),a}},bindingInitializer:{get:function(){return this._bindingInitializer},set:function(a){this._bindingInitializer=a,this._reset()}},debugBreakOnRender:{get:function(){return this._debugBreakOnRender},set:function(a){this._debugBreakOnRender=!!a,this._reset()}},disableOptimizedProcessing:{get:function(){return this._disableOptimizedProcessing},set:function(a){this._disableOptimizedProcessing=!!a,this._reset()}},element:{get:function(){return this._element}},extractChild:{get:function(){return this._extractChild},set:function(a){this._extractChild=!!a,this._reset()}},processTimeout:{get:function(){return this._processTimeout||0},set:function(a){this._processTimeout=a,this._reset()}},render:b.Utilities.markSupportedForProcessing(function(a,b){return this._renderImpl(a,b)}),_renderImpl:function(c,d){if(this._shouldCompile)try{return this._renderImpl=this._compileTemplate({target:"render"}),this._renderImpl(c,d)}catch(e){return b.Promise.wrapError(e)}var f=a(this,c,d);return f.element.then(function(){return f.renderComplete})},_renderInterpreted:function(b,c){return a(this,b,c)},renderItem:function(a,b){return this._renderItemImpl(a,b)},_renderItemImpl:function(c,d){if(this._shouldCompile)try{return this._renderItemImpl=this._compileTemplate({target:"renderItem"}),this._renderItemImpl(c)}catch(e){return{element:b.Promise.wrapError(e),renderComplete:b.Promise.wrapError(e)}}var f=this;if(this.enableRecycling&&!this.bindingCache.elements&&(this.bindingCache.elements={}),this.enableRecycling&&d&&d.msOriginalTemplate===this){var g=this.bindingCache.elements[d.id],h=!0;if(g&&(g.bindings.forEach(function(a){a()}),g.bindings=[],h=!g.nocache),h)return{element:d,renderComplete:c.then(function(a){return b.Binding.processAll(d,a.data,!0,f.bindingCache)})}}var i=a(this,c.then(function(a){return a.data}));return i.element=i.element.then(function(a){return a.msOriginalTemplate=f,a}),i},_compileTemplate:function(a){var c=this,d=b.Binding._TemplateCompiler.compile(this,this.href||this.element,{debugBreakOnRender:this.debugBreakOnRender||b.Binding.Template._debugBreakOnRender,defaultInitializer:this.bindingInitializer||a.defaultInitializer,disableTextBindingOptimization:a.disableTextBindingOptimization||!1,target:a.target,extractChild:this.extractChild,profilerMarkIdentifier:this._profilerMarkIdentifier}),e=a.resetOnFragmentChange||window.Windows&&Windows.ApplicationModel&&Windows.ApplicationModel.DesignMode&&Windows.ApplicationModel.DesignMode.designModeEnabled;if(e){var f=new b.Utilities._MutationObserver(function(){c._reset(),f.disconnect()});f.observe(b.Utilities.data(this.element).docFragment,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}return d},_reset:function(){delete this._renderImpl,delete this._renderItemImpl}},{isDeclarativeControlContainer:{value:!0,writable:!1,configurable:!1},render:{value:function(a,c,d){return new b.Binding.Template(null,{href:a}).render(c,d)}}})})}),b.Utilities&&b.Utilities.QueryCollection&&b.Class.mix(b.Utilities.QueryCollection,{template:function(a,d,e){a instanceof b.Utilities.QueryCollection&&(a=a[0]);var f=a.winControl;null!==d&&d!==c&&d.forEach||(d=[d]),e=e||function(){};var g=this,h=[];return d.forEach(function(a){g.forEach(function(b){h.push(f.render(a,b))})}),e(b.Promise.join(h)),this}})}}(this,WinJS),function(a,b,c){"use strict";function d(a,b){var c=a._autoDispose;c&&c.push(b)}function e(a){a._autoDispose=(a._autoDispose||[]).filter(function(a){return a()})}function f(b,c){return b?b.winBindingToken===c?b:void(a.log&&a.log(a.Resources._formatString(C.duplicateBindingDetected,b.id),"winjs binding","error")):b}function g(a){if(a.winBindingToken)return a.winBindingToken;var b="_win_bind"+A++;return Object.defineProperty(a,"winBindingToken",{configurable:!1,writable:!1,enumerable:!1,value:b}),b}function h(a,b,c,d,e,f,g){var h=a.initializer;if(h&&(h=h.winControl||h["data-win-control"]||h),h instanceof Function){var i=h(d,a.source,e,a.destination);return g&&(i&&i.cancel?g.bindings.push(function(){i.cancel()}):g.nocache=!0),i}h&&h.render&&(f.count++,g&&(g.nocache=!0),E(h.render).call(h,p(d,a.source),e).then(function(){f.checkComplete()}))}function i(b,c,g,h,i,j){var k,l=!0,m=!1;e(h);var n=function(){if(!m){var d=f(a.Utilities._getWeakRefElement(b),c);return d||(a.log&&a.log(a.Resources._formatString(C.elementNotFound,b),"winjs binding","info"),k&&k.cancel()),d}},o=function(a){var b=n();b&&q(b,i.destination,a),l&&(g.checkComplete(),l=!1)};if(d(h,n),k=w(h,i.source,o)){var p=k.cancel;k.cancel=function(){return m=!0,p.call(k)},j&&j.bindings.push(function(){k.cancel()})}return k}function j(c,d,e,f,g,h,j){var k;return f!==b&&(f=a.Binding.as(f)),f._getObservable&&(k=f._getObservable()),k?(h.count++,i(d,e,h,k,c,j)):void q(g,c.destination,p(f,c.source))}function k(b,c){for(var d=b.length-1;d>=0;d--){var e=b[d],f=e.destination;if(1===f.length&&"id"===f[0]){if(a.validation)throw new a.ErrorFromName("WinJS.Binding.IdBindingNotSupported",a.Resources._formatString(C.idBindingNotSupported,c));a.log&&a.log(a.Resources._formatString(C.idBindingNotSupported,c),"winjs binding","error"),b.splice(d,1)}}return b}function l(c,d){if(d){var e,f=d.expressions[c];return f||(e=k(a.Binding._bindingParser(c,b),c),d.expressions[c]=e),e||(e=f),e}return k(a.Binding._bindingParser(c,b),c)}function m(c,d,e,f,i,k){a.Utilities._writeProfilerMark("WinJS.Binding:processAll,StartTM");var m,n={count:0,checkComplete:function(){this.count--,0===this.count&&(a.Utilities._writeProfilerMark("WinJS.Binding:processAll,StopTM"),k())}},o=c||document.body,p="[data-win-bind],[data-win-control]",q=o.querySelectorAll(p);!e&&o.getAttribute("data-win-bind")&&(m=o),n.count++;var r=d||b;a.Utilities._DOMWeakRefTable_fastLoadPath=!0;try{var s=a.Utilities.data(o);s.winBindings=s.winBindings||[];for(var t=m?-1:0,u=q.length;u>t;t++){var v=0>t?m:q[t];if(v.winControl&&v.winControl.constructor&&v.winControl.constructor.isDeclarativeControlContainer){t+=v.querySelectorAll(p).length;var w=v.winControl.constructor.isDeclarativeControlContainer;"function"==typeof w&&(w=E(w))(v.winControl,function(b){return a.Binding.processAll(b,d,!1,f,i)})}if(v.hasAttribute("data-win-bind")){var x=v.getAttribute("data-win-bind"),y=l(x,f);if(!y.implemented){for(var z=0,A=y.length;A>z;z++){var C=y[z];C.initializer=C.initializer||i,C.implementation=C.initializer?h:j}y.implemented=!0}n.count++;var D=g(v),F=B?D:v.id;F||(v.id=F=D),a.Utilities._createWeakRef(v,F);var G=a.Utilities.data(v);G.winBindings=null;var H;f&&f.elements&&(H=f.elements[F],H||(f.elements[F]=H={bindings:[]}));for(var I=0,J=y.length;J>I;I++){var K=y[I],L=K.implementation(K,F,D,r,v,n,H);L&&(G.winBindings=G.winBindings||[],G.winBindings.push(L),s.winBindings.push(L))}n.count--}}}finally{a.Utilities._DOMWeakRefTable_fastLoadPath=!1}n.checkComplete()}function n(b,c,d,e,f){return new a.Promise(function(a,g,h){m(b,c,d,e,f,a,g,h)}).then(null,function(b){return a.log&&a.log(a.Resources._formatString(C.errorInitializingBindings,b&&b.message),"winjs binding","error"),a.Promise.wrapError(b)})}function o(c){var d=function(d,e,h,i,j){var k=g(h),l=B?k:h.id;l||(h.id=l=k),a.Utilities._createWeakRef(h,l);var m;if(d!==b&&(d=a.Binding.as(d)),d._getObservable&&(m=d._getObservable()),m){var n=0,o=w(a.Binding.as(d),e,function(b){if(1!==++n||b!==j){var d=f(a.Utilities._getWeakRefElement(l),k);d?q(d,i,c(E(b))):o&&(a.log&&a.log(a.Resources._formatString(C.elementNotFound,l),"winjs binding","info"),o.cancel())}});return o}var r=p(d,e);r!==j&&q(h,i,c(r))};return D(d)}function p(a,d){if(a!==b&&(a=E(a)),d)for(var e=0,f=d.length;f>e&&null!==a&&a!==c;e++)a=E(a[d[e]]);return a}function q(b,d,e){E(e),b=E(b);for(var f=0,g=d.length-1;g>f;f++){if(b=E(b[d[f]]),!b)return void(a.log&&a.log(a.Resources._formatString(C.propertyDoesNotExist,d[f],d.join(".")),"winjs binding","error"));if(b instanceof Node)return void(a.log&&a.log(a.Resources._formatString(C.nestedDOMElementBindingNotSupported,d[f],d.join(".")),"winjs binding","error"))}if(0===d.length)return void(a.log&&a.log(C.cannotBindToThis,"winjs binding","error"));var h=d[d.length-1];a.log&&b[h]===c&&a.log(a.Resources._formatString(C.creatingNewProperty,h,d.join(".")),"winjs binding","warn"),b[h]=e}function r(b,c,d){return b=E(b),c&&1===c.length&&c[0]?void b.setAttribute(c[0],d):void(a.log&&a.log(C.attributeBindingSingleProperty,"winjs binding","error"))}function s(c,d,e,h,i){var j=g(e),k=B?j:e.id;k||(e.id=k=j),a.Utilities._createWeakRef(e,k);var l;if(c!==b&&(c=a.Binding.as(c)),c._getObservable&&(l=c._getObservable()),l){var m=0,n=w(l,d,function(b){if(1!==++m||b!==i){var c=f(a.Utilities._getWeakRefElement(k),j);c?r(c,h,E(b)):n&&(a.log&&a.log(a.Resources._formatString(C.elementNotFound,k),"winjs binding","info"),n.cancel())}});return n}var o=p(c,d);o!==i&&r(e,h,o)}function t(a,b,c,d){return r(c,d,p(a,b))}function u(a,b,c){c=E(c);var d=p(a,b);Array.isArray(d)?d.forEach(function(a){c.classList.add(a)}):d&&c.classList.add(d)}function v(a,b,c,d,e){return F(a,b,c,d,e)}function w(b,c,d){if(c.length>1){for(var e={},f=e,g=0,h=c.length-1;h>g;g++)f=f[c[g]]={};return f[c[c.length-1]]=d,a.Binding.bind(b,e,!0)}return 1===c.length?(b.bind(c[0],d,!0),{cancel:function(){b.unbind(c[0],d),this.cancel=x}}):void d(b)}function x(){}function y(a,b,c,d){return q(c,d,p(a,b)),{cancel:x}}function z(a){return D(a)}var A=1e3*Math.random()>>0,B=a.Utilities.hasWinRT&&b.msSetWeakWinRTProperty&&b.msGetWeakWinRTProperty,C={get attributeBindingSingleProperty(){return a.Resources._getWinJSString("base/attributeBindingSingleProperty").value},get cannotBindToThis(){return a.Resources._getWinJSString("base/cannotBindToThis").value},get creatingNewProperty(){return a.Resources._getWinJSString("base/creatingNewProperty").value},get duplicateBindingDetected(){return a.Resources._getWinJSString("base/duplicateBindingDetected").value},get elementNotFound(){return a.Resources._getWinJSString("base/elementNotFound").value},get errorInitializingBindings(){return a.Resources._getWinJSString("base/errorInitializingBindings").value},get propertyDoesNotExist(){return a.Resources._getWinJSString("base/propertyDoesNotExist").value},get idBindingNotSupported(){return a.Resources._getWinJSString("base/idBindingNotSupported").value},get nestedDOMElementBindingNotSupported(){return a.Resources._getWinJSString("base/nestedDOMElementBindingNotSupported").value}},D=a.Utilities.markSupportedForProcessing,E=a.Utilities.requireSupportedForProcessing,F=o(function(a){return a});a.Namespace.define("WinJS.Binding",{processAll:n,oneTime:z(y),defaultBind:z(v),converter:o,initializer:z,getValue:p,setAttribute:z(s),setAttributeOneTime:z(t),addClassOneTime:z(u)})}(WinJS,this),function(a){"use strict";function b(){0===i._DOMWeakRefTable_sweepPeriod&&(h=0);var a,b,c=Object.keys(l),e=Date.now()-i._DOMWeakRefTable_timeout;for(a=0,b=c.length;b>a;a++){var f=c[a];l[f].time<e&&delete l[f]}d()}function c(){if(!(a.Debug&&Debug.debuggerEnabled&&i._DOMWeakRefTable_noTimeoutUnderDebugger||h)){var c=i._DOMWeakRefTable_sweepPeriod;0===c?(WinJS.Utilities.Scheduler.schedule(b,WinJS.Utilities.Scheduler.Priority.idle,null,"WinJS.Utilities._DOMWeakRefTable.cleanup"),h=1):h=setInterval(b,i._DOMWeakRefTable_sweepPeriod)}}function d(){if(!(a.Debug&&Debug.debuggerEnabled&&i._DOMWeakRefTable_noTimeoutUnderDebugger)){var c=i._DOMWeakRefTable_sweepPeriod;0===c?h||0!==Object.keys(l).length&&(WinJS.Utilities.Scheduler.schedule(b,WinJS.Utilities.Scheduler.Priority.idle,null,"WinJS.Utilities._DOMWeakRefTable.cleanup"),h=1):h&&0===Object.keys(l).length&&(clearInterval(h),h=0)}}function e(a,b){return l[b]={element:a,time:Date.now()},c(),b}function f(a){if(WinJS.Utilities._DOMWeakRefTable_fastLoadPath){var b=l[a];return b?b.element:document.getElementById(a)}var c=document.getElementById(a);if(c)delete l[a],d();else{var b=l[a];b&&(b.time=Date.now(),c=b.element)}return c}if(WinJS.Utilities.hasWinRT&&a.msSetWeakWinRTProperty&&a.msGetWeakWinRTProperty){var g=new Windows.Foundation.Uri("about://blank");return void WinJS.Namespace.define("WinJS.Utilities",{_createWeakRef:function(a,b){return msSetWeakWinRTProperty(g,b,a),b},_getWeakRefElement:function(a){return msGetWeakWinRTProperty(g,a)}})}var h,i=WinJS.Utilities,j=500,k=1e3,l={};WinJS.Namespace.define("WinJS.Utilities",{_DOMWeakRefTable_noTimeoutUnderDebugger:!0,_DOMWeakRefTable_sweepPeriod:j,_DOMWeakRefTable_timeout:k,_DOMWeakRefTable_tableSize:{get:function(){return Object.keys(l).length}},_DOMWeakRefTable_fastLoadPath:!1,_createWeakRef:e,_getWeakRefElement:f})}(this),function(a,b){"use strict";function c(a){return Array.prototype.slice.call(a,0)}function d(a){return{handle:a.handle,key:a.key,data:a.data,groupKey:a.groupKey,groupSize:a.groupSize,firstItemKey:a.firstItemKey,firstItemIndexHint:a.firstItemIndexHint}}function e(a){return a===b?b:+a}function f(a,b){var c=a.length;
if(1>=c)return a;var d=c/2>>>0,e=f(a.slice(0,d),b),h=f(a.slice(d),b);return g(e,h,b)}function g(a,b,c){for(var d=[];a.length&&b.length;){var e=c(a[0],b[0]);d.push(0>=e?a.shift():b.shift())}return a.length&&d.push.apply(d,a),b.length&&d.push.apply(d,b),d}var h={get sparseArrayNotSupported(){return WinJS.Resources._getWinJSString("base/sparseArrayNotSupported").value},get illegalListLength(){return WinJS.Resources._getWinJSString("base/illegalListLength").value}},i=WinJS.Utilities._createEventProperty,j={},k=WinJS.Namespace.defineWithParent(null,null,{ListBase:WinJS.Namespace._lazy(function(){var a=WinJS.Class.define(null,{_annotateWithIndex:function(a,b){var c=d(a);return c.index=b,c},onitemchanged:i("itemchanged"),oniteminserted:i("iteminserted"),onitemmoved:i("itemmoved"),onitemmutated:i("itemmutated"),onitemremoved:i("itemremoved"),onreload:i("reload"),_notifyItemChanged:function(a,b,c,d,e,f){this._listeners&&this._listeners.itemchanged&&this.dispatchEvent("itemchanged",{key:a,index:b,oldValue:c,newValue:d,oldItem:e,newItem:f})},_notifyItemInserted:function(a,b,c){this._listeners&&this._listeners.iteminserted&&this.dispatchEvent("iteminserted",{key:a,index:b,value:c});var d=this.length;d!==this._lastNotifyLength&&(this.notify("length",d,this._lastNotifyLength),this._lastNotifyLength=d)},_notifyItemMoved:function(a,b,c,d){this._listeners&&this._listeners.itemmoved&&this.dispatchEvent("itemmoved",{key:a,oldIndex:b,newIndex:c,value:d})},_notifyItemMutated:function(a,b,c){this._listeners&&this._listeners.itemmutated&&this.dispatchEvent("itemmutated",{key:a,value:b,item:c})},_notifyItemRemoved:function(a,b,c,d){this._listeners&&this._listeners.itemremoved&&this.dispatchEvent("itemremoved",{key:a,index:b,value:c,item:d});var e=this.length;e!==this._lastNotifyLength&&(this.notify("length",e,this._lastNotifyLength),this._lastNotifyLength=e)},_notifyReload:function(){if(this._listeners&&this._listeners.reload&&this.dispatchEvent("reload"),a!==this._lastNotifyLength){var a=this.length;this.notify("length",a,this._lastNotifyLength),this._lastNotifyLength=a}},_normalizeIndex:function(a){return a=e(a),0>a?this.length+a:a},_notifyMutatedFromKey:function(a){var b=this.getItemFromKey(a);this._notifyItemMutated(a,b.data,b)},notifyReload:function(){this._notifyReload()},getAt:function(a){a=e(a);var b=this.getItem(a);return b&&b.data},_getArray:function(){for(var a=new Array(this.length),b=0,c=this.length;c>b;b++){var d=this.getItem(b);d&&(a[b]=d.data)}return a},_getFromKey:function(a){var b=this.getItemFromKey(a);return b&&b.data},_getKey:function(a){a=e(a);var b=this.getItem(a);return b&&b.key},concat:function(){var a=this._getArray();return a.concat.apply(a,arguments)},join:function(a){return this._getArray().join(a||",")},slice:function(a,b){return this._getArray().slice(a,b)},indexOf:function(a,b){b=e(b),b=Math.max(0,this._normalizeIndex(b)||0);for(var c=b,d=this.length;d>c;c++){var f=this.getItem(c);if(f&&f.data===a)return c}return-1},lastIndexOf:function(a,c){c=e(c);var d=this.length;c=Math.min(this._normalizeIndex(c!==b?c:d),d-1);var f;for(f=c;f>=0;f--){var g=this.getItem(f);if(g&&g.data===a)return f}return-1},every:function(a,b){return this._getArray().every(a,b)},filter:function(a,b){return this._getArray().filter(a,b)},forEach:function(a,b){this._getArray().forEach(a,b)},map:function(a,b){return this._getArray().map(a,b)},some:function(a,b){return this._getArray().some(a,b)},reduce:function(a,b){return arguments.length>1?this._getArray().reduce(a,b):this._getArray().reduce(a)},reduceRight:function(a,b){return arguments.length>1?this._getArray().reduceRight(a,b):this._getArray().reduceRight(a)},createFiltered:function(a){return new k.FilteredListProjection(this,a)},createGrouped:function(a,b,c){return new k.GroupedSortedListProjection(this,a,b,c)},createSorted:function(a){return new k.SortedListProjection(this,a)},dataSource:{get:function(){return this._dataSource=this._dataSource||new WinJS.Binding._BindingListDataSource(this)}}},{supportedForProcessing:!1});return WinJS.Class.mix(a,WinJS.Binding.observableMixin),WinJS.Class.mix(a,WinJS.Utilities.eventMixin),a}),ListBaseWithMutators:WinJS.Namespace._lazy(function(){return WinJS.Class.derive(k.ListBase,null,{pop:function(){return this.splice(-1,1)[0]},push:function(a){if(1===arguments.length)return this.splice(this.length,0,a),this.length;var b=c(arguments);return b.splice(0,0,this.length,0),this.splice.apply(this,b),this.length},shift:function(){return this.splice(0,1)[0]},unshift:function(a){if(1===arguments.length)this.splice(0,0,a);else{var b=c(arguments);b.splice(0,0,0,0),this.splice.apply(this,b)}return this.length}},{supportedForProcessing:!1})}),ListProjection:WinJS.Namespace._lazy(function(){return WinJS.Class.derive(k.ListBaseWithMutators,null,{_list:null,_myListeners:null,_addListListener:function(a,b){var c={name:a,handler:b.bind(this)};this._myListeners=this._myListeners||[],this._myListeners.push(c),this._list.addEventListener(a,c.handler)},dispose:function(){var a=this._list,b=this._myListeners;this._myListeners=[];for(var c=0,d=b.length;d>c;c++){var e=b[c];a.removeEventListener(e.name,e.handler)}this._list=new WinJS.Binding.List,this._listReload()},getItemFromKey:function(a){return this._list.getItemFromKey(a)},move:function(a,b){a=e(a),b=e(b),a===b||0>a||0>b||a>=this.length||b>=this.length||(a=this._list.indexOfKey(this._getKey(a)),b=this._list.indexOfKey(this._getKey(b)),this._list.move(a,b))},_notifyMutatedFromKey:function(a){this._list._notifyMutatedFromKey(a)},splice:function(a){a=e(a),a=Math.max(0,this._normalizeIndex(a));var b=c(arguments);return a===this.length?(b[0]=this._list.length,this._list.splice.apply(this._list,b)):(b[0]=this._getKey(a),this._spliceFromKey.apply(this,b))},_setAtKey:function(a,b){this._list._setAtKey(a,b)}},{supportedForProcessing:!1})}),FilteredListProjection:WinJS.Namespace._lazy(function(){return WinJS.Class.derive(k.ListProjection,function(a,b){this._list=a,this._addListListener("itemchanged",this._listItemChanged),this._addListListener("iteminserted",this._listItemInserted),this._addListListener("itemmutated",this._listItemMutated),this._addListListener("itemmoved",this._listItemMoved),this._addListListener("itemremoved",this._listItemRemoved),this._addListListener("reload",this._listReload),this._filter=b,this._initFilteredKeys()},{_filter:null,_filteredKeys:null,_initFilteredKeys:function(){for(var a=this._filter,b=this._list,c=[],d=0,e=b.length;e>d;d++){var f=b.getItem(d);f&&a(f.data)&&c.push(f.key)}this._filteredKeys=c},_findInsertionPosition:function(a,b){for(var c,d=this._filter;--b>=0;){var e=this._list.getItem(b);if(e&&d(e.data)){c=e.key;break}}var f=this._filteredKeys,g=c?f.indexOf(c)+1:0;return g},_listItemChanged:function(a){var b=a.detail.key,c=a.detail.index,d=a.detail.oldValue,e=a.detail.newValue,f=a.detail.oldItem,g=a.detail.newItem,h=this._filter,i=h(d),j=h(e);if(i&&j){var k=this._filteredKeys,l=k.indexOf(b);this._notifyItemChanged(b,l,d,e,f,g)}else i&&!j?this._listItemRemoved({detail:{key:b,index:c,value:d,item:f}}):!i&&j&&this._listItemInserted({detail:{key:b,index:c,value:e}})},_listItemInserted:function(a){var b=a.detail.key,c=a.detail.index,d=a.detail.value,e=this._filter;if(e(d)){var f=this._findInsertionPosition(b,c),g=this._filteredKeys;g.splice(f,0,b),this._notifyItemInserted(b,f,d)}},_listItemMoved:function(a){var b=a.detail.key,c=a.detail.newIndex,d=a.detail.value,e=this._filteredKeys,f=e.indexOf(b);if(-1!==f){e.splice(f,1);var g=this._findInsertionPosition(b,c);e.splice(g,0,b),this._notifyItemMoved(b,f,g,d)}},_listItemMutated:function(a){var b=a.detail.key,c=a.detail.value,d=a.detail.item,e=this._filter,f=this._filteredKeys,g=f.indexOf(b),h=-1!==g,i=e(c);h&&i?this._notifyItemMutated(b,c,d):h&&!i?(f.splice(g,1),this._notifyItemRemoved(b,g,c,d)):!h&&i&&this._listItemInserted({detail:{key:b,index:this._list.indexOfKey(b),value:c}})},_listItemRemoved:function(a){var b=a.detail.key,c=a.detail.value,d=a.detail.item,e=this._filteredKeys,f=e.indexOf(b);-1!==f&&(e.splice(f,1),this._notifyItemRemoved(b,f,c,d))},_listReload:function(){this._initFilteredKeys(),this._notifyReload()},length:{get:function(){return this._filteredKeys.length},set:function(a){if(!("number"==typeof a&&a>=0))throw new WinJS.ErrorFromName("WinJS.Binding.List.IllegalLength",h.illegalListLength);var b=this.length;b>a&&this.splice(a,b-a)}},getItem:function(a){return a=e(a),this.getItemFromKey(this._filteredKeys[a])},indexOfKey:function(a){return this._filteredKeys.indexOf(a)},notifyMutated:function(a){return a=e(a),this._notifyMutatedFromKey(this._filteredKeys[a])},setAt:function(a,b){a=e(a),this._setAtKey(this._filteredKeys[a],b)},_spliceFromKey:function(a,b){if(arguments.length>2){var d=c(arguments);d[1]=0,this._list._spliceFromKey.apply(this._list,d)}var e=[];if(b){for(var f=[],g=this._filteredKeys,h=g.indexOf(a),i=h,j=g.length;j>i&&b>i-h;i++){var a=g[i];f.push(a)}var k=this;f.forEach(function(a){e.push(k._list._spliceFromKey(a,1)[0])})}return e}},{supportedForProcessing:!1})}),SortedListProjection:WinJS.Namespace._lazy(function(){return WinJS.Class.derive(k.ListProjection,function(a,b){this._list=a,this._addListListener("itemchanged",this._listItemChanged),this._addListListener("iteminserted",this._listItemInserted),this._addListListener("itemmoved",this._listItemMoved),this._addListListener("itemmutated",this._listItemMutated),this._addListListener("itemremoved",this._listItemRemoved),this._addListListener("reload",this._listReload),this._sortFunction=b,this._initSortedKeys()},{_sortFunction:null,_sortedKeys:null,_initSortedKeys:function(){for(var a=this._list,b=[],c=0,d=a.length;d>c;c++){var e=a.getItem(c);e&&(b[c]=e.key)}var g=this._sortFunction,h=f(b,function(b,c){return b=a.getItemFromKey(b).data,c=a.getItemFromKey(c).data,g(b,c)});this._sortedKeys=h},_findInsertionPos:function(a,b,c,d,e){for(var f=this._sortFunction,g=this._sortedKeys,h=Math.max(0,d||-1),i=Math.min(g.length,e||Number.MAX_VALUE),j=h;i>=h;){j=(h+i)/2>>>0;var k=g[j];if(!k)break;var l=this.getItemFromKey(k),m=f(l.data,c);if(0>m)h=j+1;else{if(0===m)return this._findStableInsertionPos(a,b,h,i,j,c);i=j-1}}return h},_findBeginningOfGroup:function(a,b,c,d,e){for(var f=0,g=a;g>=f;){a=(f+g)/2>>>0;var h=d[a],i=c.getItemFromKey(h),j=b(i.data,e);0>j?f=a+1:g=a-1}return f},_findEndOfGroup:function(a,b,c,d,e){for(var f=a,g=d.length;g>=f;){a=(f+g)/2>>>0;var h=d[a];if(!h)return d.length;var i=c.getItemFromKey(h),j=b(i.data,e);0>=j?f=a+1:g=a-1}return f},_findStableInsertionPos:function(a,b,c,d,e,f){var g=this._list,h=g.length,i=this._sortFunction,j=this._sortedKeys;if(h/2>b){for(var k=b-1;k>=0;k--){var l=g.getItem(k);if(0===i(l.data,f))return h-c>d?j.indexOf(l.key,c)+1:j.lastIndexOf(l.key,d)+1}return this._findBeginningOfGroup(e,i,g,j,f)}for(var k=b+1;h>k;k++){var l=g.getItem(k);if(0===i(l.data,f))return h-c>d?j.indexOf(l.key,c):j.lastIndexOf(l.key,d)}return this._findEndOfGroup(e,i,g,j,f)},_listItemChanged:function(a){var b=a.detail.key,c=a.detail.newValue,d=a.detail.oldValue,e=this._sortFunction;if(0===e(d,c)){var f=this.indexOfKey(b);this._notifyItemChanged(b,f,d,c,a.detail.oldItem,a.detail.newItem)}else this._listItemRemoved({detail:{key:b,index:a.detail.index,value:a.detail.oldValue,item:a.detail.oldItem}}),this._listItemInserted({detail:{key:b,index:a.detail.index,value:a.detail.newValue}})},_listItemInserted:function(a,b,c){var d=a.detail.key,e=a.detail.index,f=a.detail.value,g=this._findInsertionPos(d,e,f,b,c);this._sortedKeys.splice(g,0,d),this._notifyItemInserted(d,g,f)},_listItemMoved:function(a,b,c){var d=a.detail.key,e=a.detail.newIndex,f=a.detail.value,g=this._sortedKeys,h=g.indexOf(d,b);g.splice(h,1);var i=this._findInsertionPos(d,e,f,b,c);g.splice(i,0,d),i!==h&&this._notifyItemMoved(d,h,i,f)},_listItemMutated:function(a){var b=a.detail.key,c=a.detail.value,d=a.detail.item,e=this._list.indexOfKey(b),f=this._sortedKeys.indexOf(b);this._sortedKeys.splice(f,1);var g=this._findInsertionPos(b,e,c);return this._sortedKeys.splice(f,0,b),f===g?void this._notifyItemMutated(b,c,d):(this._listItemRemoved({detail:{key:b,index:e,value:c,item:d}}),void this._listItemInserted({detail:{key:b,index:e,value:c}}))},_listItemRemoved:function(a,b){var c=a.detail.key,d=a.detail.value,e=a.detail.item,f=this._sortedKeys,g=f.indexOf(c,b);f.splice(g,1),this._notifyItemRemoved(c,g,d,e)},_listReload:function(){this._initSortedKeys(),this._notifyReload()},length:{get:function(){return this._sortedKeys.length},set:function(a){if(!("number"==typeof a&&a>=0))throw new WinJS.ErrorFromName("WinJS.Binding.List.IllegalLength",h.illegalListLength);var b=this.length;b>a&&this.splice(a,b-a)}},getItem:function(a){return a=e(a),this.getItemFromKey(this._sortedKeys[a])},indexOfKey:function(a){return this._sortedKeys.indexOf(a)},notifyMutated:function(a){a=e(a),this._notifyMutatedFromKey(this._sortedKeys[a])},setAt:function(a,b){a=e(a),this._setAtKey(this._sortedKeys[a],b)},_spliceFromKey:function(a,b){if(arguments.length>2){var d=c(arguments);d[1]=0,this._list._spliceFromKey.apply(this._list,d)}var e=[];if(b){for(var f=[],g=this._sortedKeys,h=g.indexOf(a),i=h,j=g.length;j>i&&b>i-h;i++)f.push(g[i]);var k=this;f.forEach(function(a){e.push(k._list._spliceFromKey(a,1)[0])})}return e}},{supportedForProcessing:!1})}),GroupedSortedListProjection:WinJS.Namespace._lazy(function(){return WinJS.Class.derive(k.SortedListProjection,function(a,b,c,d){this._list=a,this._addListListener("itemchanged",this._listGroupedItemChanged),this._addListListener("iteminserted",this._listGroupedItemInserted),this._addListListener("itemmoved",this._listGroupedItemMoved),this._addListListener("itemmutated",this._listGroupedItemMutated),this._addListListener("itemremoved",this._listGroupedItemRemoved),this._addListListener("reload",this._listReload),this._sortFunction=function(a,c){return a=b(a),c=b(c),d?d(a,c):c>a?-1:a===c?0:1},this._groupKeyOf=b,this._groupDataOf=c,this._initSortedKeys(),this._initGroupedItems()},{_groupKeyOf:null,_groupDataOf:null,_groupedItems:null,_initGroupedItems:function(){for(var a={},b=this._list,c=this._groupKeyOf,e=0,f=b.length;f>e;e++){var g=d(b.getItem(e));g.groupKey=c(g.data),a[g.key]=g}this._groupedItems=a},_groupsProjection:null,_listGroupedItemChanged:function(a){var b=a.detail.key,c=a.detail.oldValue,e=a.detail.newValue,f=this._groupedItems,g=f[b],h=d(g);h.data=e,h.groupKey=this._groupKeyOf(e),f[b]=h;var i;g.groupKey===h.groupKey?(i=this.indexOfKey(b),this._notifyItemChanged(b,i,c,e,g,h)):(i=a.detail.index,this._listItemChanged({detail:{key:b,index:i,oldValue:c,newValue:e,oldItem:g,newItem:h}}))},_listGroupedItemInserted:function(a){var b=a.detail.key,c=a.detail.value,d=this._groupKeyOf(c);this._groupedItems[b]={handle:b,key:b,data:c,groupKey:d};var e,f;if(this._groupsProjection){var g=this._groupsProjection._groupItems[d];g&&(e=g.firstItemIndexHint,f=e+g.groupSize)}this._listItemInserted(a,e,f)},_listGroupedItemMoved:function(a){var b,c,d=this._groupedItems[a.detail.key].groupKey;if(this._groupsProjection){var e=this._groupsProjection._groupItems[d];b=e.firstItemIndexHint,c=b+e.groupSize}this._listItemMoved(a,b,c)},_listGroupedItemMutated:function(a){var b=a.detail.key,c=a.detail.value,e=this._groupedItems,f=e[b],g=this._groupKeyOf(c);if(f.groupKey===g)this._notifyItemMutated(b,c,f);else{var h=d(f);h.groupKey=g,e[b]=h;var i=this._list.indexOfKey(b);this._listItemRemoved({detail:{key:b,index:i,value:c,item:f}}),this._listItemInserted({detail:{key:b,index:i,value:c}})}},_listGroupedItemRemoved:function(a){var b=a.detail.key,c=a.detail.index,d=a.detail.value,e=this._groupedItems,f=e[b];delete e[b];var g,h;if(this._groupsProjection){var i=this._groupsProjection._groupItems[f.groupKey];g=i.firstItemIndexHint,h=g+i.groupSize}this._listItemRemoved({detail:{key:b,index:c,value:d,item:f}},g,h)},_listReload:function(){this._initGroupedItems(),k.SortedListProjection.prototype._listReload.call(this)},groups:{get:function(){return null===this._groupsProjection&&(this._groupsProjection=new k.GroupsListProjection(this,this._groupKeyOf,this._groupDataOf)),this._groupsProjection}},getItemFromKey:function(a){return this._groupedItems[a]}},{supportedForProcessing:!1})}),GroupsListProjection:WinJS.Namespace._lazy(function(){return WinJS.Class.derive(k.ListBase,function(a,b,c){this._list=a,this._addListListener("itemchanged",this._listItemChanged),this._addListListener("iteminserted",this._listItemInserted),this._addListListener("itemmoved",this._listItemMoved),this._addListListener("itemremoved",this._listItemRemoved),this._addListListener("reload",this._listReload),this._groupKeyOf=b,this._groupDataOf=c,this._initGroupKeysAndItems()},{_list:null,_addListListener:function(a,b){this._list.addEventListener(a,b.bind(this))},_groupDataOf:null,_groupKeyOf:null,_groupOf:function(a){return this.getItemFromKey(this._groupKeyOf(a.data))},_groupKeys:null,_groupItems:null,_initGroupKeysAndItems:function(){for(var a,b=this._groupDataOf,c=this._list,d={},e=[],f=null,g=null,h=0,i=c.length;i>h;h++){var j=c.getItem(h),k=j.groupKey;k!==f?(g&&(g.groupSize=a),a=1,f=k,g={handle:k,key:k,data:b(j.data),firstItemKey:j.key,firstItemIndexHint:h},d[k]=g,e.push(k)):a++}g&&(g.groupSize=a),this._groupKeys=e,this._groupItems=d},_listItemChanged:function(a){var b=a.detail.key,c=a.detail.index,e=a.detail.newValue,f=this._list,g=f.getItemFromKey(b).groupKey,h=this._groupItems,i=h[g];if(i.firstItemIndexHint===c){var j=d(i);j.data=this._groupDataOf(e),j.firstItemKey=b,h[g]=j,this._notifyItemChanged(g,this._groupKeys.indexOf(g),i.data,j.data,i,j)}},_listItemInserted:function(a){var b,c,e,f,g,h=a.detail.key,i=a.detail.index,j=a.detail.value,k=this._list,l=k.getItemFromKey(h).groupKey,m=this._groupItems,n=this._groupKeys,o=m[l];if(o)c=o,e=d(c),e.groupSize++,c.firstItemIndexHint===i&&(e.groupData=this._groupDataOf(j),e.firstItemKey=h,e.firstItemIndexHint=i),m[l]=e,b=n.indexOf(l),this._notifyItemChanged(l,b,c.data,e.data,c,e);else{for(f=0,g=n.length;g>f&&(o=m[n[f]],!(o.firstItemIndexHint>=i));f++);b=f,o={handle:l,key:l,data:this._groupDataOf(j),groupSize:1,firstItemKey:h,firstItemIndexHint:i},n.splice(b,0,l),m[l]=o,this._notifyItemInserted(l,b,o.data)}for(f=b+1,g=n.length;g>f;f++)c=m[n[f]],e=d(c),e.firstItemIndexHint++,m[e.key]=e,this._notifyItemChanged(e.key,f,c.data,e.data,c,e)},_listItemMoved:function(a){var b=a.detail.key,c=a.detail.oldIndex,e=a.detail.newIndex,f=this._list,g=f.getItemFromKey(b).groupKey,h=this._groupItems,i=h[g];if(i.firstItemIndexHint===e||i.firstItemIndexHint===c){var j=f.getItem(i.firstItemIndexHint),k=d(i);k.data=this._groupDataOf(j.data),k.firstItemKey=j.key,h[g]=k,this._notifyItemChanged(g,this._groupKeys.indexOf(g),i.data,k.data,i,k)}},_listItemRemoved:function(a){var b,c,e=a.detail.index,f=a.detail.item,g=this._groupItems,h=this._groupKeys,i=f.groupKey,j=g[i],k=h.indexOf(i);if(1===j.groupSize)h.splice(k,1),delete g[i],this._notifyItemRemoved(i,k,j.data,j),k--;else{if(b=j,c=d(b),c.groupSize--,b.firstItemIndexHint===e){var l=this._list.getItem(e);c.data=this._groupDataOf(l.data),c.firstItemKey=l.key}g[i]=c,this._notifyItemChanged(i,k,b.data,c.data,b,c)}for(var m=k+1,n=h.length;n>m;m++)b=g[h[m]],c=d(b),c.firstItemIndexHint--,g[c.key]=c,this._notifyItemChanged(c.key,m,b.data,c.data,b,c)},_listReload:function(){this._initGroupKeysAndItems(),this._notifyReload()},length:{get:function(){return this._groupKeys.length}},getItem:function(a){return a=e(a),this._groupItems[this._groupKeys[a]]},getItemFromKey:function(a){return this._groupItems[a]},indexOfKey:function(a){return this._groupKeys.indexOf(a)}},{supportedForProcessing:!1})})});WinJS.Namespace.define("WinJS.Binding",{List:WinJS.Namespace._lazy(function(){return WinJS.Class.derive(k.ListBaseWithMutators,function(a,b){if(this._currentKey=0,this._keys=null,this._keyMap={},b=b||j,this._proxy=b.proxy,this._binding=b.binding,this._proxy){if(Object.keys(a).length!==a.length)throw new WinJS.ErrorFromName("WinJS.Binding.List.NotSupported",h.sparseArrayNotSupported);this._data=a,this._currentKey=a.length}else if(a){for(var c=this._keyMap,d=0,e=0,f=a.length;f>e;e++)if(e in a){var g=a[e];this._binding&&(g=WinJS.Binding.as(g));var i=d.toString();d++,c[i]={handle:i,key:i,data:g}}d!==e&&this._initializeKeys(),this._currentKey=d}},{_currentKey:0,_keys:null,_keyMap:null,_modifyingData:0,_initializeKeys:function(){if(!this._keys){var a=[];if(this._data){for(var b=this._keyMap,c=this._data,d=0,e=c.length;e>d;d++)if(d in c){var f=d.toString();if(a[d]=f,!(f in b)){var g=c[d];this._binding&&(g=WinJS.Binding.as(g)),b[f]={handle:f,key:f,data:g}}}}else Object.keys(this._keyMap).forEach(function(b){a[b>>>0]=b});this._keys=a}},_lazyPopulateEntry:function(a){if(this._data&&a in this._data){var b=this._data[a];this._binding&&(b=WinJS.Binding.as(b));var c=a.toString(),d={handle:c,key:c,data:b};return this._keyMap[d.key]=d,d}},_assignKey:function(){return(++this._currentKey).toString()},length:{get:function(){return this._data?this._data.length:this._keys?this._keys.length:this._currentKey},set:function(a){if(!("number"==typeof a&&a>=0))throw new WinJS.ErrorFromName("WinJS.Binding.List.IllegalLength",h.illegalListLength);this._initializeKeys();var b=this.length;if(b>a?this.splice(a,b-a):a=b,this._data){this._modifyingData++;try{this._data.length=a}finally{this._modifyingData--}}this._keys&&(this._keys.length=a)}},getItem:function(a){var b,c;return a=e(a),this._keys?(c=this._keys[a],b=c&&this._keyMap[c]):(c=a.toString(),b=this._keyMap[c]||this._lazyPopulateEntry(a)),b},getItemFromKey:function(a){var b;return b=this._keys||!this._data?this._keyMap[a]:this.getItem(a>>>0)},indexOfKey:function(a){var b=-1;if(this._keys)b=this._keys.indexOf(a);else{var c=a>>>0;c<this._currentKey&&(b=c)}return b},move:function(a,b){if(a=e(a),b=e(b),this._initializeKeys(),!(a===b||0>a||0>b||a>=this.length||b>=this.length)){if(this._data){this._modifyingData++;try{var c=this._data.splice(a,1)[0];this._data.splice(b,0,c)}finally{this._modifyingData--}}var d=this._keys.splice(a,1)[0];this._keys.splice(b,0,d),this._notifyItemMoved(d,a,b,this.getItemFromKey(d).data)}},notifyMutated:function(a){a=e(a);var b=this._keys?this._keys[a]:a.toString();this._notifyMutatedFromKey(b)},setAt:function(a,b){a=e(a),this._initializeKeys();var c=this.length;if(a===c)this.push(b);else if(c>a){if(this._data){this._modifyingData++;try{this._data[a]=b}finally{this._modifyingData--}}if(this._binding&&(b=WinJS.Binding.as(b)),a in this._keys){var f=this._keys[a],g=this._keyMap[f],h=d(g);h.data=b,this._keyMap[f]=h,this._notifyItemChanged(f,a,g.data,b,g,h)}}},_setAtKey:function(a,b){this.setAt(this.indexOfKey(a),b)},reverse:function(){if(this._initializeKeys(),this._data){this._modifyingData++;try{this._data.reverse()}finally{this._modifyingData--}}return this._keys.reverse(),this._notifyReload(),this},sort:function(a){if(this._initializeKeys(),this._data){this._modifyingData++;try{this._data.sort(a)}finally{this._modifyingData--}}var b=this;return this._keys.sort(function(c,d){return c=b._keyMap[c],d=b._keyMap[d],a?a(c.data,d.data):(c=(c&&c.data||"").toString(),d=(c&&d.data||"").toString(),d>c?-1:c===d?0:1)}),this._notifyReload(),this},pop:function(){if(0!==this.length){this._initializeKeys();var a=this._keys.pop(),b=this._keyMap[a],c=b&&b.data;if(this._data){this._modifyingData++;try{this._data.pop()}finally{this._modifyingData--}}return delete this._keyMap[a],this._notifyItemRemoved(a,this._keys.length,c,b),c}},push:function(){this._initializeKeys();for(var a=arguments.length,b=0;a>b;b++){var c=arguments[b];this._binding&&(c=WinJS.Binding.as(c));var d=this._assignKey();if(this._keys.push(d),this._data){this._modifyingData++;try{this._data.push(arguments[b])}finally{this._modifyingData--}}this._keyMap[d]={handle:d,key:d,data:c},this._notifyItemInserted(d,this._keys.length-1,c)}return this.length},shift:function(){if(0!==this.length){this._initializeKeys();var a=this._keys.shift(),b=this._keyMap[a],c=b&&b.data;if(this._data){this._modifyingData++;try{this._data.shift()}finally{this._modifyingData--}}return delete this._keyMap[a],this._notifyItemRemoved(a,0,c,b),c}},unshift:function(){this._initializeKeys();for(var a=arguments.length,b=a-1;b>=0;b--){var c=arguments[b];this._binding&&(c=WinJS.Binding.as(c));var d=this._assignKey();if(this._keys.unshift(d),this._data){this._modifyingData++;try{this._data.unshift(arguments[b])}finally{this._modifyingData--}}this._keyMap[d]={handle:d,key:d,data:c},this._notifyItemInserted(d,0,c)}return this.length},splice:function(a,b){a=e(a),this._initializeKeys(),a=Math.max(0,this._normalizeIndex(a)),b=Math.max(0,Math.min(b||0,this.length-a));for(var c=[];b;){var d=this._keys[a],f=this._keyMap[d],g=f&&f.data;if(c.push(g),this._keys.splice(a,1),this._data){this._modifyingData++;try{this._data.splice(a,1)}finally{this._modifyingData--}}delete this._keyMap[d],this._notifyItemRemoved(d,a,g,f),--b}if(arguments.length>2)for(var h=2,i=arguments.length;i>h;h++){var j=arguments[h];this._binding&&(j=WinJS.Binding.as(j));var k=Math.min(a+h-2,this.length),l=this._assignKey();if(this._keys.splice(k,0,l),this._data){this._modifyingData++;try{this._data.splice(k,0,arguments[h])}finally{this._modifyingData--}}this._keyMap[l]={handle:l,key:l,data:j},this._notifyItemInserted(l,k,j)}return c},_spliceFromKey:function(a){this._initializeKeys();var b=c(arguments);return b[0]=this._keys.indexOf(a),this.splice.apply(this,b)}},{supportedForProcessing:!1})})})}(this),function(a){"use strict";if(a.document){var b={get attributeBindingSingleProperty(){return WinJS.Resources._getWinJSString("base/attributeBindingSingleProperty").value},get cannotBindToThis(){return WinJS.Resources._getWinJSString("base/cannotBindToThis").value},get idBindingNotSupported(){return WinJS.Resources._getWinJSString("base/idBindingNotSupported").value}};WinJS.Namespace.define("WinJS.Binding",{_TemplateCompiler:WinJS.Namespace._lazy(function(){function c(a,b,c){var d=WinJS.Utilities.data(a).bindTokens;d&&d.forEach(function(a){a&&a.cancel&&a.cancel()}),b&&b.cancel(),c&&c.cancel()}function d(a,b){return function(c){return WinJS.Binding.processAll(c,a,!1,null,b)}}function e(a){return a=K(a),a instanceof Node?null:a}function f(a,b){var c=-1!==a.indexOf("\n"),d=arguments,e=a.replace($,function(e,f,h,i,j,k,l){if(j||k)throw new WinJS.ErrorFromName("Format:MalformedInputString","Did you forget to escape a: "+(j||k)+" at: "+l);if(f)return"{";if(h)return"}";var m,n=+i;if(m=n===+n?d[n+1]:b[i],void 0===m)throw new WinJS.ErrorFromName("Format:MissingPart","Missing part '"+i+"'");if(c){for(var o=l;o>0&&" "===a[--o];);o>=0&&"\n"===a[o]&&(m=g(l-o-1,m))}return m});return e}function g(a,b){for(var c="",d=0;a>d;d++)c+=" ";return b.split("\n").map(function(a,b){return b?c+a:a}).join("\n")}function h(a){return a.trim()}function i(a){return a.join(";\n")}function j(a){return a.join(", ")||"empty"}function k(a){return a.map(function(a){return a.match(W)?"."+a:+a===a?f("[{0}]",a):f("[{0}]",m(a))}).join("")}function l(a,b,c,d){var b=b.map(function(a){return a.match(W)?"."+a:(+a===a&&(a=+a),q(m(a)))}).map(function(a){return f("{filter}({temp} = {temp}{part})",{filter:d,temp:c,part:a})});return b.unshift(p(o(c,a))),b.push(c),p(b.join(" && "))}function m(a){return JSON.stringify(a)}function n(a){return a?"new Array("+ +a+")":"[]"}function o(a,b){return""+a+" = "+b}function p(a){return"("+a+")"}function q(a){return"["+a+"]"}function r(a){return a.match(W)?a:+a===a?+a:m(a)}function s(a){return a=""+a,a.replace(Y,function(a){return Z[a]||" "})}function t(a,b,c){return new String(c?""+a+b+"_"+c:""+a+b)}function u(a){return a.replace(/\\n/g,"\\n\\\n")}function v(a){return Object.keys(a)}function w(a){return Object.keys(a).map(function(b){return a[b]})}function x(a,b){return y([a,b])}function y(a){for(var b={},c=0,d=a.length;d>c;c++)for(var e=a[c],f=Object.keys(e),g=0,h=f.length;h>g;g++){var i=f[g];b[i]=e[i]}return b}function z(b){return b.reduce(function(a,b){return a?K(a[b]):null},a)}function A(a,b,c,d){var e=a.children;if(e){var f=Object.keys(e);b&&c&&c(a,b,f.length);for(var g=0,h=f.length;h>g;g++){var i=f[g],j=e[i];A(j,i,c,d)}b&&d&&d(a,b,Object.keys(e).length)}else b&&c&&c(a,b,0),b&&d&&d(a,b,0)}function B(a){return a.replace(/^\s*$/gm,"").replace(/^(.*[^\s])( *)$/gm,function(a,b){return b})}var C=(WinJS._Signal,WinJS.Promise),D=C._cancelBlocker,E=WinJS.Binding.defaultBind,F=WinJS.Binding.oneTime,G=WinJS.Binding.setAttribute,H=WinJS.Binding.setAttributeOneTime,I=WinJS.Binding.addClassOneTime,J=(WinJS.Binding.as,WinJS.Promise.as),K=(WinJS.Utilities.supportedForProcessing,WinJS.Utilities.requireSupportedForProcessing),L=WinJS.Utilities.insertAdjacentHTMLUnsafe,M=WinJS.Utilities.data,N=WinJS.Utilities.markDisposable,O=WinJS.UI.processAll,P=WinJS.Binding.processAll,Q=WinJS.UI._optionsParser,R=WinJS.UI._CallExpression,S=WinJS.UI._IdentifierExpression,T=WinJS.Binding._bindingParser2,U=WinJS.UI.scopedSelect,V=WinJS.Utilities._writeProfilerMark,W=/^[A-Za-z]\w*$/,X=/[^A-Za-z\w$]/g,Y=/[&<>'"]/g,Z={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},$=/({{)|(}})|{(\w+)}|({)|(})/g,_=/^\s*;\s*$/,ab=/[A-Z]/g,bb=WinJS.Class.define(function(a,b,c,d,e){var f=this;this.compiler=a,this.kind=c,this.base=new String(b),this.tree={children:{},parent:this.base,reference:function(){return f.base}},this.accessExpression=d,this.filter=e||""},{createPathExpression:function(a,b){if(a.length){var c=this,d=a.reduce(function(a,b){return a.children=a.children||{},a.children[b]=a.children[b]||{parent:a},a.children[b]},this.tree);return d.name=d.name||c.compiler.defineInstance(c.kind,b||"",function(){return c.accessExpression(d.parent.name?d.parent.name:d.parent.reference(),a.slice(-1)[0],d.parent.parent===c.base,c.filter,!0)}),d.name}return this.base},lower:function(){var a=this,b=[],c=function(b,c,d){return a.accessExpression(b.parent.name?b.parent.name:b.parent.reference(),c,b.parent.parent===a.base,a.filter,d)};A(this.tree,"",function(d,e,f){b.push(e),f>1?(d.name=d.name||a.compiler.defineInstance(a.kind,b.join("_"),c.bind(null,d,e,!0)),d.reference=function(){return d.name}):1===f&&(d.reference=c.bind(null,d,e))},function(){b.pop()})},deadNodeElimination:function(){A(this.tree,"",null,function(a,b,c){(!a.name||a.name.dead)&&0===c&&a.parent&&a.parent.children&&delete a.parent.children[b]})},definitions:function(){var a=[];return A(this.tree,"",function(b){b.name&&a.push(b)}),a.map(function(a){return a.name.definition()})}}),cb={capture:"capture",temporary:"temporary",variable:"variable",data:"data",global:"global"},db={capture:"c",temporary:"t",variable:"iv",data:"d",global:"g"},eb={"import":"import",variable:"variable"},fb={"import":"i",variable:"sv"},gb={tree:"tree",text:"text",initializer:"initializer",template:"template",error:"error"},hb={attribute:"attribute",booleanAttribute:"booleanAttribute",inlineStyle:"inlineStyle",textContent:"textContent"},ib="imports",jb={initial:0,analyze:1,optimze:2,lower:3,compile:4,link:5,done:6},kb=WinJS.Class.define(function(b,c){if(this._stage=jb.initial,this._staticVariables={},this._staticVariablesCount=0,this._instanceVariables={},this._instanceVariablesCount={},this._debugBreak=c.debugBreakOnRender,this._defaultInitializer=K(c.defaultInitializer||E),this._optimizeTextBindings=!c.disableTextBindingOptimization,this._templateElement=b,this._templateContent=document.createElement(b.tagName),this._extractChild=c.extractChild||!1,this._controls=null,this._bindings=null,this._bindTokens=null,this._textBindingPrefix=null,this._textBindingId=0,this._suffix=[],this._htmlProcessors=[],this._profilerMarkIdentifier=c.profilerMarkIdentifier,this._captureCSE=new bb(this,"container",cb.capture,this.generateElementCaptureAccess.bind(this)),this._dataCSE=new bb(this,"data",cb.data,this.generateNormalAccess.bind(this),this.importSafe("dataSecurityCheck",K)),this._globalCSE=new bb(this,this.importSafe("global",a),cb.global,this.generateNormalAccess.bind(this),this.importSafe("globalSecurityCheck",K)),WinJS.UI.Fragments.renderCopy(this._templateElement,this._templateContent),this._extractChild)for(;this._templateContent.childElementCount>1;)this._templateContent.removeChild(this._templateContent.lastElementChild)
},{addClassOneTimeTextBinding:function(a){var b=this,c=this.createTextBindingHole(a.elementCapture.element.tagName,"class",++this._textBindingId);a.textBindingId=c,a.kind=gb.text,a.elementCapture.element.classList.add(c),a.elementCapture.refCount--,a.definition=function(){return b.formatCode("{htmlEscape}({value})",{htmlEscape:b._staticVariables.htmlEscape,value:a.value()})}},addClassOneTimeTreeBinding:function(a){var b=this;a.pathExpression=this.bindingExpression(a),a.value=function(){return a.pathExpression},a.kind=gb.tree,a.definition=function(){return b.formatCode("{element}.classList.add({value})",{element:a.elementCapture,value:a.value()})}},analyze:function(){if(this._stage>jb.analyze)throw"Illegal: once we have moved past analyze we cannot revist it";this._stage=jb.analyze,this._controls=this.gatherControls(),this._bindings=this.gatherBindings(),this._children=this.gatherChildren(),this.cleanControlAndBindingAttributes(),this.async&&this.createAsyncParts(),this.nullableIdentifierAccessTemporary=this.defineInstance(cb.temporary);var a=this._templateContent.innerHTML;this._html=function(){return u(m(a))},this._html.text=a},bindingExpression:function(a){return this._dataCSE.createPathExpression(a.source,a.source.join("_"))},capture:function(a){var b=a.capture;if(b)return b.refCount++,b;for(var c=[a],d=a.parentNode,e=a.tagName;d!==this._templateContent;)e=d.tagName+"_"+e,c.unshift(d),d=d.parentNode;for(var f=0,g=c.length;g>f;f++){var h=c[f];c[f]=Array.prototype.indexOf.call(d.children,h),d=h}return b=this._captureCSE.createPathExpression(c,e.toLowerCase()),b.element=a,b.element.capture=b,b.refCount=1,b},cleanControlAndBindingAttributes:function(){for(var a="[data-win-bind],[data-win-control]",b=this._templateContent.querySelectorAll(a),c=0,d=b.length;d>c;c++){var e=b[c];e.isDeclarativeControlContainer&&(c+=e.querySelectorAll("[data-win-bind],[data-win-control]").length),e.removeAttribute("data-win-bind"),e.removeAttribute("data-win-control"),e.removeAttribute("data-win-options")}},compile:function(a,b,c){if(this._stage>jb.compile)throw"Illegal: once we have moved past compile we cannot revist it";this._stage=jb.compile;var d=this;this._returnedElement=this._extractChild?"container.firstElementChild":"container";var e,f,g=this._controls.map(function(a){var b;b=a.async?"{target}.winControl = {target}.winControl || new {SafeConstructor}({target}, {options}, controlDone)":"{target}.winControl = {target}.winControl || new {SafeConstructor}({target}, {options})";var c=d.formatCode(b,{target:a.elementCapture,SafeConstructor:a.SafeConstructor,options:d.generateOptionsLiteral(a.optionsParsed,a.elementCapture)});if(a.isDeclarativeControlContainer&&"function"==typeof a.isDeclarativeControlContainer.import){var e=[c];return e.push(d.formatCode("{isDeclarativeControlContainer}({target}.winControl, {delayedControlProcessing})",{target:a.elementCapture,isDeclarativeControlContainer:a.isDeclarativeControlContainer,delayedControlProcessing:d._staticVariables.ui_processAll})),e.push(d.formatCode("{isDeclarativeControlContainer}({target}.winControl, {delayedBindingProcessing}(data, {templateDefaultInitializer}))",{target:a.elementCapture,isDeclarativeControlContainer:a.isDeclarativeControlContainer,delayedBindingProcessing:d._staticVariables.delayedBindingProcessing,templateDefaultInitializer:d._staticVariables.templateDefaultInitializer||m(null)})),e.join(";\n")}return c}),h=this._bindings.map(function(a){switch(a.kind){case gb.template:return d.formatCode("({nestedTemplates}[{nestedTemplate}] = {template}.render({path}, {dest}))",{nestedTemplates:d._nestedTemplates,nestedTemplate:m(a.nestedTemplate),template:a.template,path:a.pathExpression,dest:a.elementCapture});case gb.initializer:var b;return b=a.initialValue?"({bindTokens}[{bindToken}] = {initializer}(data, {sourceProperties}, {dest}, {destProperties}, {initialValue}))":"({bindTokens}[{bindToken}] = {initializer}(data, {sourceProperties}, {dest}, {destProperties}))",d.formatCode(b,{bindTokens:d._bindTokens,bindToken:m(a.bindToken),initializer:a.initializer,sourceProperties:m(a.source),destProperties:m(a.destination),dest:a.elementCapture,initialValue:a.initialValue});case gb.tree:return a.definition();case gb.text:break;case gb.error:break;default:throw"NYI"}});c?(e=h.filter(function(a,b){return!d._bindings[b].delayable}),f=h.filter(function(a,b){return d._bindings[b].delayable})):(e=h,f=[]);var k=w(this._instanceVariables),l=k.filter(function(a){return a.kind===cb.variable}).map(function(a){return a.definition()}),n=this._captureCSE.definitions(),o=this._globalCSE.definitions(),p=this._dataCSE.definitions(),q=this._children.map(function(a){return d.formatCodeN("{0}.msParentSelectorScope = true",a)}),r=this._suffix.map(function(a){return a()}),s="";c&&f.length&&(s=d.formatCode(tb,{delayed_binding_processing:i(f)}));var t=d.formatCode(a,y([this._staticVariables,b||{},{profilerMarkIdentifierStart:m("WinJS.Binding.Template:render"+this._profilerMarkIdentifier+",StartTM"),profilerMarkIdentifierStop:m("WinJS.Binding.Template:render"+this._profilerMarkIdentifier+",StopTM"),html:this._html(),tagName:m(this._templateElement.tagName),instance_variable_declarations:j(k),global_definitions:i(o),data_definitions:i(p),instance_variable_definitions:i(l),capture_definitions:i(n),set_msParentSelectorScope:i(q),debug_break:this.generateDebugBreak(),control_processing:i(g),control_counter:this._controlCounter,binding_processing:i(e),renderComplete:s,suffix_statements:i(r),nestedTemplates:this._nestedTemplates,returnedElement:this._returnedElement}]));return this.prettify(t)},createAsyncParts:function(){this._nestedTemplates=this._nestedTemplates||this.defineInstance(cb.variable,"nestedTemplates",function(){return n(0)}),this._controlCounter=this._controlCounter||this.defineInstance(cb.variable,"controlCounter",function(){return m(1)})},createTextBindingHole:function(a,b,c){if(!this._textBindingPrefix){for(var d="";-1!==this._html.text.indexOf("textbinding"+d);)d=d||0,d++;this._textBindingPrefix="textbinding"+d,this._textBindingRegex=new RegExp("(#?"+this._textBindingPrefix+"_\\d+)")}var e=this._textBindingPrefix+"_"+c;return"IMG"===a&&"src"===b&&(e="#"+e),e},deadCodeElimination:function(){var a=this;Object.keys(this._instanceVariables).forEach(function(b){var c=a._instanceVariables[b];c.kind===cb.capture&&(a._templateContent.contains(c.element)||(c.dead=!0),0===c.refCount&&(c.dead=!0),c.dead&&(c.definition=function(){},c.name=null,delete a._instanceVariables[b]))}),this._controls=this._controls.filter(function(a){return!a.elementCapture.dead}),this._bindings=this._bindings.filter(function(a){return!a.elementCapture.dead}),this._captureCSE.deadNodeElimination()},defineInstance:function(a,b,c){if(this._stage>=jb.compile)throw"Illegal: define instance variable after compilation stage has started";var d=this._instanceVariablesCount[a]||0,e=b?b.replace(X,"_"):"",f=t(db[a],d,e);return f.definition=function(){return o(f,c())},f.kind=a,this._instanceVariables[f]=f,this._instanceVariablesCount[a]=d+1,f},defineStatic:function(a,b,c){if(this._stage>=jb.link)throw"Illegal: define static variable after link stage has started";if(b){var d=this._staticVariables[b];if(d)return d}var e=b?b.replace(X,"_"):"",f=t(fb[a],this._staticVariablesCount,e);return f.definition=function(){return o(f,c())},f.kind=a,this._staticVariables[b||f]=f,this._staticVariablesCount++,f},done:function(){if(this._stage>jb.done)throw"Illegal: once we have moved past done we cannot revist it";this._stage=jb.done},emitScopedSelect:function(a,b){return this.formatCode("{scopedSelect}({selector}, {element})",{scopedSelect:this._staticVariables.scopedSelect,selector:m(a),element:b})},emitOptionsNode:function(a,b,c){var d=this;if(a)switch(typeof a){case"object":if(Array.isArray(a)){b.push("[");for(var e=0,f=a.length;f>e;e++)this.emitOptionsNode(a[e],b,c),b.push(",");b.push("]")}else if(a instanceof R)b.push("select"===a.target?this.emitScopedSelect(a.arg0Value,c):m(null));else if(a instanceof S&&a.parts[0]instanceof R){var g=a.parts[0];b.push(l("select"===g.target?this.emitScopedSelect(g.arg0Value,c):m(null),a.parts.slice(1),this.nullableIdentifierAccessTemporary,this.importSafe("requireSupportedForProcessing",K)))}else a instanceof S?b.push(a.pathExpression):(b.push("{"),Object.keys(a).forEach(function(e){b.push(r(e)),b.push(":"),d.emitOptionsNode(a[e],b,c),b.push(",")}),b.push("}"));break;default:b.push(m(a))}else b.push(m(null))},findGlobalIdentifierExpressions:function(a,b){b=b||[];var c=this;return Object.keys(a).forEach(function(d){var e=a[d];"object"==typeof e&&(e instanceof S?e.parts[0]instanceof R||b.push(e):c.findGlobalIdentifierExpressions(e,b))}),b},formatCodeN:function(){if(this._stage<jb.compile)throw"Illegal: format code at before compilation stage has started";return f.apply(null,arguments)},formatCode:function(a,b){if(this._stage<jb.compile)throw"Illegal: format code at before compilation stage has started";return f(a,b)},gatherBindings:function(){for(var b=-1,c=this,d=-1,e=[],f="[data-win-bind],[data-win-control]",g=this._templateContent.querySelectorAll(f),h=0,i=g.length;i>h;h++){var j=g[h];if(j.isDeclarativeControlContainer&&(h+=j.querySelectorAll(f).length),j.hasAttribute("data-win-bind")){var k=j.getAttribute("data-win-bind"),l=T(k,a);l.forEach(function(a){if(a.initializer){var e=a.initializer.join("."),f=z(a.initializer);f.render?(K(f.render),a.template=c.importSafe(e,f),a.pathExpression=c.bindingExpression(a),a.nestedTemplate=++d,a.kind=gb.template):f.winControl&&f.winControl.render?(K(f.winControl.render),a.template=c.importSafe(e,f.winControl),a.pathExpression=c.bindingExpression(a),a.nestedTemplate=++d,a.kind=gb.template):(a.initializer=c.import(e,f),a.bindToken=++b,a.kind=gb.initializer)}else a.initializer=c.importSafe("templateDefaultInitializer",c._defaultInitializer),a.bindToken=++b,a.kind=gb.initializer;a.elementCapture=c.capture(j),a.bindingText=k}),e.push.apply(e,l)}}var m=d+1;m>0&&(this.async=!0,this._nestedTemplates=this.defineInstance(cb.variable,"nestedTemplates",function(){return n(m)}));var o=b+1;return o>0&&(this._bindTokens=this.defineInstance(cb.variable,"bindTokens",function(){return n(o)}),this._suffix.push(function(){return c.formatCode("{utilities_data}(returnedElement).bindTokens = {bindTokens}",{utilities_data:c._staticVariables.utilities_data,bindTokens:c._bindTokens})})),e},gatherChildren:function(){var a=this;return Array.prototype.map.call(this._templateContent.children,function(b){return a.capture(b)})},gatherControls:function(){for(var b=this,c=0,d=[],e="[data-win-control]",f=this._templateContent.querySelectorAll(e),g=0,h=f.length;h>g;g++){var i=f[g],j=i.getAttribute("data-win-control"),k=WinJS.Utilities._getMemberFiltered(j.trim(),a,K);if(k){var l=i.getAttribute("data-win-options")||m({}),n=k.length>2;n&&(c++,this.async=!0);var o=k.isDeclarativeControlContainer;o&&("function"==typeof o&&(o=this.import(j+"_isDeclarativeControlContainer",o)),i.isDeclarativeControlContainer=o,g+=i.querySelectorAll(e).length);var p={elementCapture:this.capture(i),name:j,SafeConstructor:this.importSafe(j,k),async:n,optionsText:m(l),optionsParsed:Q(l),isDeclarativeControlContainer:o};d.push(p);var q=this.findGlobalIdentifierExpressions(p.optionsParsed);q.forEach(function(a){a.pathExpression=b.globalExpression(a.parts)})}}return c>0&&(this._controlCounter=this.defineInstance(cb.variable,"controlCounter",function(){return m(c+1)})),d},generateElementCaptureAccess:function(a,b,c){if(c){var d=""+b=="0"?"":" + "+b;return this.formatCodeN("{0}.children[startIndex{1}]",a,d)}return this.formatCodeN("{0}.children[{1}]",a,b)},generateNormalAccess:function(a,b,c,d,e){if(a.indexOf(this.nullableIdentifierAccessTemporary)>=0){var f;return f=e?"{left} && {filter}({temp}{right})":"{left} && ({temp} = {filter}({temp}{right}))",this.formatCode(f,{temp:this.nullableIdentifierAccessTemporary,left:a,right:k([b]),filter:d})}var f;return f=e?"({temp} = {left}) && {filter}({temp}{right})":"({temp} = {left}) && ({temp} = {filter}({temp}{right}))",this.formatCode(f,{temp:this.nullableIdentifierAccessTemporary,left:a,right:k([b]),filter:d})},generateOptionsLiteral:function(a,b){var c=[];return this.emitOptionsNode(a,c,b),c.join(" ")},generateDebugBreak:function(){if(this._debugBreak){var a=this.defineStatic(eb.variable,"debugCounter",function(){return m(0)});return this.formatCodeN("if (++{0} === 1) {{ debugger; }}",a)}return""},globalExpression:function(a){return this._globalCSE.createPathExpression(a,a.join("_"))},"import":function(a,b){return this.importSafe(a,K(b))},importSafe:function(a,b){var c=this,d=this.defineStatic(eb.import,a,function(){return c.formatCodeN("({0}{1})",ib,k([a]))});if(d.import&&d.import!==b)throw"Duplicate import: '"+a+"'";return d.import=b,d},importAll:function(a){return Object.keys(a).forEach(function(b){K(a[b])}),this.importAllSafe(a)},importAllSafe:function(a){var b=this,c=Object.keys(a).reduce(function(c,d){return c[d]=b.importSafe(d,a[d]),c},{});return c},link:function(a){if(this._stage>jb.link)throw"Illegal: once we have moved past link we cannot revist it";this._stage=jb.link;var b=this,c=v(this._staticVariables).filter(function(a){return b._staticVariables[a].kind===eb.import}).reduce(function(a,c){return a[c]=b._staticVariables[c].import,a},{}),d=w(this._staticVariables);return new Function(ib,this.formatCode(vb,{static_variable_declarations:j(d),static_variable_definitions:i(d.map(function(a){return a.definition()})),body:a.trim()}))(c)},lower:function(){if(this._stage>jb.lower)throw"Illegal: once we have moved past lower we cannot revist it";this._stage=jb.lower,this._captureCSE.lower(),this._dataCSE.lower(),this._globalCSE.lower()},markBindingAsError:function(a){a&&(a.kind=gb.error,this.markBindingAsError(a.original))},oneTimeTextBinding:function(a){var b=this,c=this.oneTimeTextBindingAnalyze(a);if(c){var d;a.original&&(d=a.original.initialValue);var e=this.createTextBindingHole(a.elementCapture.element.tagName,c.attribute,++this._textBindingId);switch(a.textBindingId=e,a.kind=gb.text,a.elementCapture.refCount--,a.definition=function(){var c;return c=d?"{htmlEscape}({initialValue})":"{htmlEscape}({getter})",b.formatCode(c,{htmlEscape:b._staticVariables.htmlEscape,getter:a.value(),initialValue:d})},c.kind){case hb.attribute:a.elementCapture.element.setAttribute(c.attribute,e);break;case hb.booleanAttribute:a.elementCapture.element.setAttribute(c.attribute,e);{a.definition}a.definition=function(){var e;return e=d?'({initialValue} ? {attribute} : "")':'({value} ? {attribute} : "")',b.formatCode(e,{value:a.value(),attribute:m(c.attribute),initialValue:d})},this._htmlProcessors.push(function(a){return a.replace(new RegExp(c.attribute+'="'+e+'"',"i"),e)});break;case hb.textContent:a.elementCapture.element.textContent=e;break;case hb.inlineStyle:var f=a.elementCapture.element;if(!f.msReplaceStyle){f.msReplaceStyle=f.getAttribute("style")||"",""!==f.msReplaceStyle&&";"!==f.msReplaceStyle[f.msReplaceStyle.length-1]&&(f.msReplaceStyle=f.msReplaceStyle+";"),f.setAttribute("style","msReplaceStyle:'"+e+"'");var g=f.getAttribute("style");this._htmlProcessors.push(function(a){return a.replace(g,f.msReplaceStyle)})}f.msReplaceStyle=f.msReplaceStyle+c.property+":"+e+";";break;default:throw"NYI"}}},oneTimeTextBindingAnalyze:function(a){var b=a.elementCapture.element,c=b.tagName,d=a.destination[0];switch(c){case"A":switch(d){case"href":return{kind:hb.attribute,attribute:d}}break;case"IMG":switch(d){case"alt":case"src":case"width":case"height":return{kind:hb.attribute,attribute:d}}break;case"SELECT":switch(d){case"disabled":case"multiple":case"required":return{kind:hb.booleanAttribute,attribute:d};case"size":return{kind:hb.attribute,attribute:d}}break;case"OPTION":switch(d){case"label":case"value":return{kind:hb.attribute,attribute:d};case"disabled":case"selected":return{kind:hb.booleanAttribute,attribute:d}}break;case"INPUT":switch(d){case"checked":switch(b.type){case"checkbox":case"radio":return{kind:hb.booleanAttribute,attribute:d}}break;case"disabled":return{kind:hb.booleanAttribute,attribute:d};case"max":case"maxLength":case"min":case"step":case"value":return{kind:hb.attribute,attribute:d};case"size":switch(b.type){case"text":case"search":case"tel":case"url":case"email":case"password":return{kind:hb.attribute,attribute:d}}break;case"readOnly":switch(b.type){case"hidden":case"range":case"color":case"checkbox":case"radio":case"file":case"button":break;default:return{kind:hb.attribute,attribute:d}}}break;case"BUTTON":switch(d){case"disabled":return{kind:hb.booleanAttribute,attribute:d};case"value":return{kind:hb.attribute,attribute:d}}break;case"TEXTAREA":switch(d){case"disabled":case"readOnly":case"required":return{kind:hb.booleanAttribute,attribute:d};case"cols":case"maxLength":case"placeholder":case"rows":case"wrap":return{kind:hb.attribute,attribute:d}}}switch(d){case"className":return{kind:hb.attribute,attribute:"class"};case"dir":case"lang":case"name":case"title":case"tabIndex":return{kind:hb.attribute,attribute:d};case"style":if(a.destination.length>1){var e=a.destination[1];if("cssText"===e)return;var f="string"==typeof b.style[e];if(f)return("m"===e[0]&&"s"===e[1]||"webkit"===e.substring(0,6))&&(e="-"+e),e=e.replace(ab,function(a){return"-"+a.toLowerCase()}),{kind:hb.inlineStyle,property:e,attribute:"style"}}break;case"innerText":case"textContent":return{kind:hb.textContent,attribute:"textContent"}}},oneTimeTreeBinding:function(a){if(1===a.destination.length&&"id"===a.destination[0]){if(WinJS.validation)throw new WinJS.ErrorFromName("WinJS.Binding.IdBindingNotSupported",WinJS.Resources._formatString(b.idBindingNotSupported,a.bindingText));return WinJS.log&&WinJS.log(WinJS.Resources._formatString(b.idBindingNotSupported,a.bindingText),"winjs binding","error"),void this.markBindingAsError(a)}if(0===a.destination.length)return WinJS.log&&WinJS.log(b.cannotBindToThis,"winjs binding","error"),void this.markBindingAsError(a);var c,d=this;a.pathExpression=this.bindingExpression(a),a.value=function(){return a.pathExpression},a.original&&(c=a.pathExpression,a.original.initialValue=c),a.kind=gb.tree,a.definition=function(){var b;return b=c?"({targetPath} || {{}}){prop} = {initialValue}":"({targetPath} || {{}}){prop} = {sourcePath}",d.formatCode(b,{targetPath:l(a.elementCapture,a.destination.slice(0,-1),d.nullableIdentifierAccessTemporary,d.importSafe("targetSecurityCheck",e)),prop:k(a.destination.slice(-1)),sourcePath:a.value(),initialValue:c})}},optimize:function(){if(this._stage>jb.optimze)throw"Illegal: once we have moved past link we cannot revist it";this._stage=jb.optimze;for(var a=0;a<this._bindings.length;a++){var b=this._bindings[a];if(!b.template)switch(b.initializer.import){case E:var c=x(b,{kind:gb.tree,initializer:this.importSafe("init_oneTime",F),original:b});c.elementCapture.refCount++,this.oneTimeTreeBinding(c),this._bindings.splice(a,0,c),b.delayable=!0,a++;break;case G:var c=x(b,{kind:gb.tree,initializer:this.importSafe("init_setAttributeOneTime",H),original:b});c.elementCapture.refCount++,this.setAttributeOneTimeTreeBinding(c),this._bindings.splice(a,0,c),b.delayable=!0,a++;break;case F:this.oneTimeTreeBinding(b);break;case H:this.setAttributeOneTimeTreeBinding(b);break;case I:this.addClassOneTimeTreeBinding(b);break;default:b.initializer&&(b.delayable=!!b.initializer.import.delayable)}}if(this._optimizeTextBindings){for(var d={},a=0;a<this._bindings.length;a++){var b=this._bindings[a];if(!b.template&&b.kind!==gb.error){switch(b.initializer.import){case F:this.oneTimeTextBinding(b);break;case H:this.setAttributeOneTimeTextBinding(b);break;case I:this.addClassOneTimeTextBinding(b)}b.textBindingId&&(d[b.textBindingId]=b)}}if(Object.keys(d).length){var e=this._templateContent.innerHTML;e=this._htmlProcessors.reduce(function(a,b){return b(a)},e);for(var f=e.split(this._textBindingRegex),a=1;a<f.length;a+=2){var b=d[f[a]];f[a]=b.definition}this._html=function(){var a=f.map(function(a){return"string"==typeof a?m(a):a()}).join(" + ");return u(a)}}}},prettify:function(a){var b=a.split("\n");return b.filter(function(a){return!_.test(a)}).join("\n")},setAttributeOneTimeTextBinding:function(a){var b,c=this,d=a.destination[0],e=this.createTextBindingHole(a.elementCapture.element.tagName,d,++this._textBindingId);a.original&&(b=a.original.initialValue),a.textBindingId=e,a.kind=gb.text,a.elementCapture.element.setAttribute(d,e),a.elementCapture.refCount--,a.definition=function(){var d;return d=b?"{htmlEscape}({initialValue})":"{htmlEscape}({value})",c.formatCode(d,{htmlEscape:c._staticVariables.htmlEscape,initialValue:b,value:a.value()})}},setAttributeOneTimeTreeBinding:function(a){if(1===a.destination.length&&"id"===a.destination[0]){if(WinJS.validation)throw new WinJS.ErrorFromName("WinJS.Binding.IdBindingNotSupported",WinJS.Resources._formatString(b.idBindingNotSupported,a.bindingText));return WinJS.log&&WinJS.log(WinJS.Resources._formatString(b.idBindingNotSupported,a.bindingText),"winjs binding","error"),void this.markBindingAsError(a)}if(1!==a.destination.length||!a.destination[0])return WinJS.log&&WinJS.log(b.attributeBindingSingleProperty,"winjs binding","error"),void this.markBindingAsError(a);var c,d=this;a.pathExpression=this.bindingExpression(a),a.value=function(){return a.pathExpression},a.original&&(c=this.defineInstance(cb.variable,"",a.value),a.original.initialValue=c),a.kind=gb.tree,a.definition=function(){var b;return b=c?'{element}.setAttribute({attribute}, "" + {initialValue})':'{element}.setAttribute({attribute}, "" + {value})',d.formatCode(b,{element:a.elementCapture,attribute:m(a.destination[0]),initialValue:c,value:a.value()})}}},{_TreeCSE:bb,compile:function(b,e,f){if(!(e instanceof HTMLElement))throw"Illegal";V("WinJS.Binding.Template:compile"+f.profilerMarkIdentifier+",StartTM");var g=new kb(e,f);g.analyze();var h=g.importAllSafe({Signal:WinJS._Signal,global:a,document:document,cancelBlocker:D,promise_as:J,disposeInstance:c,markDisposable:N,ui_processAll:O,binding_processAll:P,insertAdjacentHTMLUnsafe:L,promise:C,utilities_data:M,requireSupportedForProcessing:K,htmlEscape:s,scopedSelect:U,delayedBindingProcessing:d,writeProfilerMark:V});g.optimize(),g.deadCodeElimination(),g.lower();var i,j;switch(f.target){case"render":i=g.async?qb:pb,j=!1;break;case"renderItem":i=g.async?ub:sb,j=!0}var k=g.compile(i,h,j),l=g.link(k);return g.done(),V("WinJS.Binding.Template:compile"+f.profilerMarkIdentifier+",StopTM"),l}}),lb=B('container.classList.add("win-template");                                                              \nvar html = {html};                                                                                      \n{insertAdjacentHTMLUnsafe}(container, "beforeend", html);                                             \nreturnedElement = {returnedElement};                                                                    \n                                                                                                        \n// Capture Definitions                                                                                  \n{capture_definitions};                                                                                  \n{set_msParentSelectorScope};                                                                            \n                                                                                                        \n'),mb=B("// Control Processing                                                                                   \n{control_processing};                                                                                   \n                                                                                                        \n// Binding Processing                                                                                   \n{binding_processing};                                                                                   \n                                                                                                        \nvar result = {promise_as}(returnedElement);                                                             \n"),nb=B('var controlSignal = new {Signal}();                                                                     \nvar controlDone = function () {{ if (--{control_counter} === 0) {{ controlSignal.complete(); }} }};     \ncontrolDone();                                                                                          \n                                                                                                        \n// Control Processing                                                                                   \n{control_processing};                                                                                   \n                                                                                                        \nvar result = controlSignal.promise.then(function () {{                                                  \n    // Binding Processing                                                                               \n    {binding_processing};                                                                               \n    return {promise}.join({nestedTemplates});                                                           \n}}).then(function () {{                                                                                 \n    return returnedElement;                                                                             \n}}).then(null, function (e) {{                                                                          \n    if (typeof e === "object" && e.name === "Canceled") {{ returnedElement.dispose(); }}            \n    return {promise}.wrapError(e);                                                                      \n}});                                                                                                    \n'),ob=B("{markDisposable}(returnedElement, function () {{ {disposeInstance}(returnedElement, result); }});       \n{suffix_statements};                                                                                    \n"),pb=B('function render(data, container) {{                                                                     \n    {debug_break}                                                                                       \n    if (typeof data === "object" && typeof data.then === "function") {{                             \n        // async data + a container falls back to interpreted path                                      \n        if (container) {{                                                                               \n            var result = this._renderInterpreted(data, container);                                      \n            return result.element.then(function () {{ return result.renderComplete; }});                \n        }}                                                                                              \n        return {cancelBlocker}(data).then(function(data) {{ return render(data); }});                   \n    }}                                                                                                  \n                                                                                                        \n    {writeProfilerMark}({profilerMarkIdentifierStart});                                                 \n                                                                                                        \n    // Declarations                                                                                     \n    var {instance_variable_declarations};                                                               \n    var returnedElement;                                                                                \n                                                                                                        \n    // Global Definitions                                                                               \n    {global_definitions};                                                                               \n                                                                                                        \n    // Data Definitions                                                                                 \n    data = (data === {global} ? data : {requireSupportedForProcessing}(data));                          \n    {data_definitions};                                                                                 \n                                                                                                        \n    // Instance Variable Definitions                                                                    \n    {instance_variable_definitions};                                                                    \n                                                                                                        \n    // HTML Processing                                                                                  \n    container = container || {document}.createElement({tagName});                                       \n    var startIndex = container.childElementCount;                                                       \n    '+h(g(4,lb))+"                                           \n                                                                                                        \n    "+h(g(4,mb))+"                                      \n    "+h(g(4,ob))+"                                           \n                                                                                                        \n    {writeProfilerMark}({profilerMarkIdentifierStop});                                                  \n                                                                                                        \n    return result;                                                                                      \n}}                                                                                                      \n"),qb=B('function render(data, container) {{                                                                     \n    {debug_break}                                                                                       \n    if (typeof data === "object" && typeof data.then === "function") {{                             \n        // async data + a container falls back to interpreted path                                      \n        if (container) {{                                                                               \n            var result = this._renderInterpreted(data, container);                                      \n            return result.element.then(function () {{ return result.renderComplete; }});                \n        }}                                                                                              \n        return {cancelBlocker}(data).then(function(data) {{ return render(data, container); }});        \n    }}                                                                                                  \n                                                                                                        \n    {writeProfilerMark}({profilerMarkIdentifierStart});                                                 \n                                                                                                        \n    // Declarations                                                                                     \n    var {instance_variable_declarations};                                                               \n    var returnedElement;                                                                                \n                                                                                                        \n    // Global Definitions                                                                               \n    {global_definitions};                                                                               \n                                                                                                        \n    // Data Definitions                                                                                 \n    data = (data === {global} ? data : {requireSupportedForProcessing}(data));                          \n    {data_definitions};                                                                                 \n                                                                                                        \n    // Instance Variable Definitions                                                                    \n    {instance_variable_definitions};                                                                    \n                                                                                                        \n    // HTML Processing                                                                                  \n    container = container || {document}.createElement({tagName});                                       \n    var startIndex = container.childElementCount;                                                       \n    '+h(g(4,lb))+"                                           \n                                                                                                        \n    "+h(g(4,nb))+"                                 \n    "+h(g(4,ob))+"                                           \n                                                                                                        \n    {writeProfilerMark}({profilerMarkIdentifierStop});                                                  \n                                                                                                        \n    return result;                                                                                      \n}}                                                                                                      \n"),rb=B("{markDisposable}(returnedElement, function () {{ {disposeInstance}(returnedElement, result, renderComplete); }});\n{suffix_statements};                                                                                    \n"),sb=B('function renderItem(itemPromise) {{                                                                     \n    {debug_break}                                                                                       \n    // Declarations                                                                                     \n    var {instance_variable_declarations};                                                               \n    var element, renderComplete, data, returnedElement;                                                 \n                                                                                                        \n    element = itemPromise.then(function renderItem(item) {{                                             \n        if (typeof item.data === "object" && typeof item.data.then === "function") {{               \n            return {cancelBlocker}(item.data).then(function (data) {{ return renderItem({{ data: data }}); }});\n        }}                                                                                              \n                                                                                                        \n        {writeProfilerMark}({profilerMarkIdentifierStart});                                             \n                                                                                                        \n        // Global Definitions                                                                           \n        {global_definitions};                                                                           \n                                                                                                        \n        // Data Definitions                                                                             \n        data = item.data;                                                                               \n        data = (data === {global} ? data : {requireSupportedForProcessing}(data));                      \n        {data_definitions};                                                                             \n                                                                                                        \n        // Instance Variable Definitions                                                                \n        {instance_variable_definitions};                                                                \n                                                                                                        \n        // HTML Processing                                                                              \n        var container = {document}.createElement({tagName});                                            \n        var startIndex = 0;                                                                             \n        '+h(g(8,lb))+"                                       \n                                                                                                        \n        "+h(g(8,mb))+"                                  \n        "+h(g(8,rb))+"                                   \n                                                                                                        \n        {writeProfilerMark}({profilerMarkIdentifierStop});                                              \n                                                                                                        \n        return result;                                                                                  \n    }});                                                                                                \n    {renderComplete};                                                                                   \n    return {{                                                                                           \n        element: element,                                                                               \n        renderComplete: renderComplete || element,                                                      \n    }};                                                                                                 \n}}                                                                                                      \n"),tb=B("renderComplete = element.then(function () {{                                                            \n    return itemPromise;                                                                                 \n}}).then(function (item) {{                                                                             \n    return item.ready || item;                                                                          \n}}).then(function (item) {{                                                                             \n    {delayed_binding_processing};                                                                       \n    return element;                                                                                     \n}});                                                                                                    \n"),ub=B('function renderItem(itemPromise) {{                                                                     \n    {debug_break}                                                                                       \n    // Declarations                                                                                     \n    var {instance_variable_declarations};                                                               \n    var element, renderComplete, data, returnedElement;                                                 \n                                                                                                        \n    element = itemPromise.then(function renderItem(item) {{                                             \n        if (typeof item.data === "object" && typeof item.data.then === "function") {{               \n            return {cancelBlocker}(item.data).then(function (data) {{ return renderItem({{ data: data }}); }});\n        }}                                                                                              \n                                                                                                        \n        {writeProfilerMark}({profilerMarkIdentifierStart});                                             \n                                                                                                        \n        // Global Definitions                                                                           \n        {global_definitions};                                                                           \n                                                                                                        \n        // Data Definitions                                                                             \n        data = item.data;                                                                               \n        data = (data === {global} ? data : {requireSupportedForProcessing}(data));                      \n        {data_definitions};                                                                             \n                                                                                                        \n        // Instance Variable Definitions                                                                \n        {instance_variable_definitions};                                                                \n                                                                                                        \n        // HTML Processing                                                                              \n        var container = {document}.createElement({tagName});                                            \n        var startIndex = 0;                                                                             \n        '+h(g(8,lb))+"                                       \n                                                                                                        \n        "+h(g(8,nb))+"                             \n        "+h(g(8,rb))+"                                   \n                                                                                                        \n        {writeProfilerMark}({profilerMarkIdentifierStop});                                              \n                                                                                                        \n        return result;                                                                                  \n    }});                                                                                                \n    {renderComplete};                                                                                   \n    return {{                                                                                           \n        element: element,                                                                               \n        renderComplete: renderComplete || element,                                                      \n    }};                                                                                                 \n}}                                                                                                      \n"),vb=B('"use strict";                                                                                         \n                                                                                                        \n// statics                                                                                              \nvar {static_variable_declarations};                                                                     \n{static_variable_definitions};                                                                          \n                                                                                                        \n// generated template rendering function                                                                \nreturn {body};                                                                                          \n');
return kb})})}}(this),function(a,b){"use strict";function c(b,c){b=b||document.body;var c=c||0;if(4>c){if(0===c&&b.getAttribute){var d=b.getAttribute("data-win-res");if(d){var e=a.UI.optionsParser(d);f(b,b,e,c)}}var g="[data-win-res],[data-win-control]",i=b.querySelectorAll(g);if(0===i.length)return a.Promise.as(b);for(var j=0,k=i.length;k>j;j++){var l=i[j];if(l.winControl&&l.winControl.constructor&&l.winControl.constructor.isDeclarativeControlContainer){var m=l.winControl.constructor.isDeclarativeControlContainer;"function"==typeof m&&(m=h(m),m(l.winControl,a.Resources.processAll),j+=l.querySelectorAll(g).length)}if(l.hasAttribute("data-win-res")){var e=a.UI.optionsParser(l.getAttribute("data-win-res"));f(l,l,e,c)}}}else if(a.validation)throw new a.ErrorFromName("WinJS.Res.NestingExceeded",a.Resources._getWinJSString("base/nestingExceeded").value);return a.Promise.as(b)}function d(c,d){for(var f=Object.keys(d),g=0,h=f.length;h>g;g++){var i=f[g],j=d[i],k=a.Resources.getString(j);k&&k.empty?a.validation&&e(j):(c.setAttribute(i,k.value),k.lang!==b&&c.lang!==b&&c.lang!==k.lang&&(c.lang=k.lang))}}function e(b){throw new a.ErrorFromName("WinJS.Res.NotFound",a.Resources._formatString(a.Resources._getWinJSString("base/notFound").value,b))}function f(g,i,j,k){var l=Object.keys(j);i=h(i);for(var m=0,n=l.length;n>m;m++){var o=l[m],p=j[o];if("string"==typeof p){var q=a.Resources.getString(p);q&&q.empty?a.validation&&e(p):(i[o]=q.value,q.lang!==b&&g.lang!==b&&g.lang!==q.lang&&(g.lang=q.lang),"innerHTML"===o&&c(i,k+1))}else g===i&&"attributes"===o?d(g,p):f(g,i[o],p,k)}}var g=!1,h=a.Utilities.requireSupportedForProcessing;a.Namespace.define("WinJS.Resources",{processAll:function(b){if(!g)return a.Utilities.ready().then(function(){return g=!0,c(b)});try{return c(b)}catch(d){return a.Promise.wrapError(d)}}})}(WinJS),WinJS.Utilities._writeProfilerMark("WinJS.2.1 2.0.1.WinJS.2014.4.28 base.js,StopTM");